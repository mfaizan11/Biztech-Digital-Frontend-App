This file is a merged representation of a subset of the codebase, containing files not matching ignore patterns, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching these patterns are excluded: *.svg
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.env.production
.gitignore
index.html
package.json
src/App.tsx
src/assets/8c308caf909810f493480578c4eab6aa4f6235bf.png
src/components/figma/ImageWithFallback.tsx
src/components/Footer.tsx
src/components/Header.tsx
src/components/ProgressCircle.tsx
src/components/ProjectNotes.tsx
src/components/ProposalGenerator.tsx
src/components/ProtectedRoute.tsx
src/components/Sidebar.tsx
src/components/StatusBadge.tsx
src/components/ui/accordion.tsx
src/components/ui/alert-dialog.tsx
src/components/ui/alert.tsx
src/components/ui/aspect-ratio.tsx
src/components/ui/avatar.tsx
src/components/ui/badge.tsx
src/components/ui/breadcrumb.tsx
src/components/ui/button.tsx
src/components/ui/calendar.tsx
src/components/ui/card.tsx
src/components/ui/carousel.tsx
src/components/ui/chart.tsx
src/components/ui/checkbox.tsx
src/components/ui/collapsible.tsx
src/components/ui/command.tsx
src/components/ui/context-menu.tsx
src/components/ui/dialog.tsx
src/components/ui/drawer.tsx
src/components/ui/dropdown-menu.tsx
src/components/ui/form.tsx
src/components/ui/hover-card.tsx
src/components/ui/input-otp.tsx
src/components/ui/input.tsx
src/components/ui/label.tsx
src/components/ui/menubar.tsx
src/components/ui/navigation-menu.tsx
src/components/ui/pagination.tsx
src/components/ui/popover.tsx
src/components/ui/progress.tsx
src/components/ui/radio-group.tsx
src/components/ui/resizable.tsx
src/components/ui/scroll-area.tsx
src/components/ui/select.tsx
src/components/ui/separator.tsx
src/components/ui/sheet.tsx
src/components/ui/sidebar.tsx
src/components/ui/skeleton.tsx
src/components/ui/slider.tsx
src/components/ui/sonner.tsx
src/components/ui/switch.tsx
src/components/ui/table.tsx
src/components/ui/tabs.tsx
src/components/ui/textarea.tsx
src/components/ui/toggle-group.tsx
src/components/ui/toggle.tsx
src/components/ui/tooltip.tsx
src/components/ui/use-mobile.ts
src/components/ui/utils.ts
src/components/VaultInput.tsx
src/contexts/AuthContext.tsx
src/guidelines/Guidelines.md
src/hooks/useAppNavigation.ts
src/layout/Layouts.tsx
src/lib/api.ts
src/main.tsx
src/pages/AdminAgents.tsx
src/pages/AdminApprovals.tsx
src/pages/AdminDashboard.tsx
src/pages/AdminRequests.tsx
src/pages/AdminServices.tsx
src/pages/AdminSettings.tsx
src/pages/AgentClients.tsx
src/pages/AgentDashboard.tsx
src/pages/AgentProfile.tsx
src/pages/AgentProjectManagement.tsx
src/pages/AgentProjects.tsx
src/pages/ClientDashboard.tsx
src/pages/ForgotPassword.tsx
src/pages/Home.tsx
src/pages/Login.tsx
src/pages/MyDocuments.tsx
src/pages/MyProfile.tsx
src/pages/MyProjects.tsx
src/pages/NeedsAssessment.tsx
src/pages/PendingApproval.tsx
src/pages/ProjectCommandCenter.tsx
src/pages/ProposalBuilder.tsx
src/pages/Register.tsx
src/services/api.ts
src/styles/globals.css
src/types/index.ts
src/vite-env.d.ts
tsconfig.json
tsconfig.node.json
vite.config.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".env.production">
# Replace this with your actual live backend domain
VITE_API_URL=https://api.yourdomain.com/api/v1
</file>

<file path=".gitignore">
node_modules
</file>

<file path="index.html">
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="BizTech Biz Digital - Agency Management Portal for Digital Services" />
    <title>BizTech Biz Digital - Agency Management Portal</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="./src/main.tsx"></script>
  </body>
</html>
</file>

<file path="src/components/figma/ImageWithFallback.tsx">
import React, { useState } from 'react'

const ERROR_IMG_SRC =
  'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg=='

export function ImageWithFallback(props: React.ImgHTMLAttributes<HTMLImageElement>) {
  const [didError, setDidError] = useState(false)

  const handleError = () => {
    setDidError(true)
  }

  const { src, alt, style, className, ...rest } = props

  return didError ? (
    <div
      className={`inline-block bg-gray-100 text-center align-middle ${className ?? ''}`}
      style={style}
    >
      <div className="flex items-center justify-center w-full h-full">
        <img src={ERROR_IMG_SRC} alt="Error loading image" {...rest} data-original-url={src} />
      </div>
    </div>
  ) : (
    <img src={src} alt={alt} className={className} style={style} {...rest} onError={handleError} />
  )
}
</file>

<file path="src/components/Footer.tsx">
import React from 'react';
import { useNavigate } from 'react-router-dom';
import { Mail, Phone } from 'lucide-react';
import logoImage from 'figma:asset/8c308caf909810f493480578c4eab6aa4f6235bf.png';

export function Footer() {
  const navigate = useNavigate();

  return (
    <footer className="bg-[#0D1B2A] text-white">
      {/* CTA Section */}
      <div className="border-b border-white/10">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 py-12 sm:py-16 text-center">
          <h2 className="text-white mb-3">Ready to Get Started?</h2>
          <p className="text-gray-300 mb-8 max-w-2xl mx-auto">
            Transform your digital service delivery with our comprehensive agency management platform
          </p>
          <div className="flex flex-col sm:flex-row gap-4 justify-center">
            <button
              onClick={() => navigate('/register')}
              className="bg-[#2EC4B6] hover:bg-[#26a599] text-white px-8 py-3 rounded-lg transition-all font-medium h-[48px]"
            >
              Create Account
            </button>
            <button
              onClick={() => navigate('/login')}
              className="bg-white hover:bg-gray-100 text-[#0D1B2A] px-8 py-3 rounded-lg transition-all font-medium h-[48px]"
            >
              Sign In
            </button>
          </div>
        </div>
      </div>

      {/* Footer Content */}
      <div className="max-w-7xl mx-auto px-4 sm:px-6 py-12">
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12">
          {/* Brand Column */}
          <div className="lg:col-span-1">
            <div className="flex items-center gap-2 mb-4">
              <img src={logoImage} alt="BizTech Biz Digital" className="h-8" />
            </div>
            <p className="text-gray-400 text-sm leading-relaxed">
              Streamline your digital agency operations with our comprehensive management platform for web development, SEO, and marketing services
            </p>
          </div>

          {/* Quick Links */}
          <div>
            <h3 className="text-white mb-4">Quick Links</h3>
            <ul className="space-y-3">
              <li>
                <button
                  onClick={() => navigate('/login')}
                  className="text-gray-400 hover:text-[#2EC4B6] transition-colors text-sm"
                >
                  Request Services
                </button>
              </li>
              <li>
                <button
                  onClick={() => navigate('/register')}
                  className="text-gray-400 hover:text-[#2EC4B6] transition-colors text-sm"
                >
                  Become an Agent
                </button>
              </li>
              <li>
                <button
                  onClick={() => navigate('/')}
                  className="text-gray-400 hover:text-[#2EC4B6] transition-colors text-sm"
                >
                  How It Works
                </button>
              </li>
            </ul>
          </div>

          {/* Legal */}
          <div>
            <h3 className="text-white mb-4">Legal</h3>
            <ul className="space-y-3">
              <li>
                <button
                  onClick={() => navigate('/')}
                  className="text-gray-400 hover:text-[#2EC4B6] transition-colors text-sm"
                >
                  Terms of Service
                </button>
              </li>
              <li>
                <button
                  onClick={() => navigate('/')}
                  className="text-gray-400 hover:text-[#2EC4B6] transition-colors text-sm"
                >
                  Privacy Policy
                </button>
              </li>
            </ul>
          </div>

          {/* Contact Us */}
          <div>
            <h3 className="text-white mb-4">Contact Us</h3>
            <ul className="space-y-3">
              <li className="flex items-center gap-2">
                <Phone size={16} className="text-[#2EC4B6]" />
                <a
                  href="tel:+97150328786"
                  className="text-gray-400 hover:text-[#2EC4B6] transition-colors text-sm"
                >
                  +971 50 328 8786
                </a>
              </li>
              <li className="flex items-center gap-2">
                <Mail size={16} className="text-[#2EC4B6]" />
                <a
                  href="mailto:services@biztech.ae"
                  className="text-gray-400 hover:text-[#2EC4B6] transition-colors text-sm"
                >
                  services@biztech.ae
                </a>
              </li>
            </ul>
          </div>
        </div>

        {/* Copyright */}
        <div className="border-t border-white/10 mt-12 pt-8 text-center">
          <p className="text-gray-500 text-sm">
            BizTech Biz Digital Copyright Â© 2025. All Rights Reserved.
          </p>
        </div>
      </div>
    </footer>
  );
}
</file>

<file path="src/components/Header.tsx">
import React, { useState } from 'react';
import { useNavigate, useLocation } from 'react-router-dom';
import { Menu, X, LogOut, User as UserIcon } from 'lucide-react';
import { useAuth } from '../contexts/AuthContext';
import logoImage from 'figma:asset/8c308caf909810f493480578c4eab6aa4f6235bf.png';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "./ui/dropdown-menu";

interface HeaderProps {
  variant?: 'default' | 'transparent';
}

export function Header({ variant = 'default' }: HeaderProps) {
  const navigate = useNavigate();
  const location = useLocation();
  const { user, logout, isAuthenticated } = useAuth();
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

  // If user is Agent or Admin, they use Sidebar, so we don't render this header
  // (unless you specifically want a double header, but usually Sidebar replaces Header)
  if (user?.role === 'agent' || user?.role === 'admin') {
    return null;
  }

  // Styles
  const headerClass = variant === 'transparent' 
    ? "bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50"
    : "bg-white border-b border-gray-200 sticky top-0 z-50";

  const getLinkClass = (path: string) => {
    const isActive = location.pathname === path;
    return isActive
      ? "text-[#2EC4B6] border-b-2 border-[#2EC4B6] pb-1 font-medium text-sm lg:text-base"
      : "text-gray-600 hover:text-[#1A202C] pb-1 font-medium text-sm lg:text-base transition-colors";
  };

  const handleLogout = () => {
    logout();
    setMobileMenuOpen(false);
  };

  return (
    <header className={headerClass}>
      <div className="max-w-7xl mx-auto px-4 sm:px-6 py-4">
        <div className="flex justify-between items-center">
          {/* Logo */}
          <div className="flex items-center gap-2 z-10 cursor-pointer" onClick={() => navigate(isAuthenticated ? '/client-dashboard' : '/')}>
            <img src={logoImage} alt="BizTech" className="h-7 sm:h-8" />
          </div>

          {/* === DESKTOP NAVIGATION === */}
          <nav className="hidden md:flex absolute left-1/2 transform -translate-x-1/2 gap-4 lg:gap-6">
            {!isAuthenticated ? (
              // Public Nav (Optional - add links if needed)
              <></> 
            ) : (
              // Client Nav
              <>
                <button onClick={() => navigate('/client-dashboard')} className={getLinkClass('/client-dashboard')}>
                  Dashboard
                </button>
                <button onClick={() => navigate('/my-projects')} className={getLinkClass('/my-projects')}>
                  My Projects
                </button>
                <button onClick={() => navigate('/my-profile')} className={getLinkClass('/my-profile')}>
                  My Profile
                </button>
              </>
            )}
          </nav>

          {/* === RIGHT SIDE ACTIONS === */}
          <div className="flex items-center gap-3 z-10">
            {!isAuthenticated ? (
              // Public Buttons
              <div className="hidden md:flex items-center gap-4">
                <button
                  onClick={() => navigate('/login')}
                  className="text-[#1A202C] hover:text-[#2EC4B6] transition-colors text-sm font-medium"
                >
                  Sign In
                </button>
                <button
                  onClick={() => navigate('/register')}
                  className="bg-gradient-to-r from-[#2EC4B6] to-[#26a599] text-white px-5 py-2 rounded-lg hover:shadow-md transition-all text-sm font-medium"
                >
                  Get Started
                </button>
              </div>
            ) : (
              // Logged In Dropdown
              <DropdownMenu>
                <DropdownMenuTrigger className="outline-none">
                  <div className="w-8 h-8 bg-[#0D1B2A] rounded-full flex items-center justify-center text-white text-sm font-medium cursor-pointer hover:bg-[#1a2d42] transition-colors">
                    {user?.name?.charAt(0).toUpperCase() || 'U'}
                  </div>
                </DropdownMenuTrigger>
                <DropdownMenuContent align="end" className="w-56 bg-white">
                  <DropdownMenuLabel>My Account</DropdownMenuLabel>
                  <DropdownMenuSeparator />
                  <DropdownMenuItem onClick={() => navigate('/my-profile')} className="cursor-pointer hover:bg-gray-100">
                    <UserIcon className="mr-2 h-4 w-4" />
                    <span>Profile</span>
                  </DropdownMenuItem>
                  <DropdownMenuSeparator />
                  <DropdownMenuItem onClick={handleLogout} className="cursor-pointer text-red-600 focus:text-red-600 focus:bg-red-50 hover:bg-red-50">
                    <LogOut className="mr-2 h-4 w-4" />
                    <span>Log out</span>
                  </DropdownMenuItem>
                </DropdownMenuContent>
              </DropdownMenu>
            )}

            {/* Mobile Menu Toggle */}
            <button
              onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
              className="md:hidden text-[#0D1B2A] p-1"
            >
              {mobileMenuOpen ? <X size={24} /> : <Menu size={24} />}
            </button>
          </div>
        </div>

        {/* === MOBILE MENU === */}
        {mobileMenuOpen && (
          <nav className="md:hidden mt-4 pb-4 border-t border-gray-200 pt-4">
            <div className="flex flex-col gap-3">
              {!isAuthenticated ? (
                <>
                  <button 
                    onClick={() => { navigate('/login'); setMobileMenuOpen(false); }}
                    className="w-full text-center border-2 border-[#0D1B2A] text-[#0D1B2A] py-2 rounded-lg font-medium"
                  >
                    Sign In
                  </button>
                  <button 
                    onClick={() => { navigate('/register'); setMobileMenuOpen(false); }}
                    className="w-full text-center bg-[#2EC4B6] text-white py-2 rounded-lg font-medium"
                  >
                    Get Started
                  </button>
                </>
              ) : (
                <>
                  <button 
                    onClick={() => { navigate('/client-dashboard'); setMobileMenuOpen(false); }}
                    className={`text-left font-medium py-2 px-4 rounded-lg ${location.pathname === '/client-dashboard' ? 'text-[#2EC4B6] bg-[#F0FDFA]' : 'text-gray-600 hover:bg-gray-50'}`}
                  >
                    Dashboard
                  </button>
                  <button 
                    onClick={() => { navigate('/my-projects'); setMobileMenuOpen(false); }}
                    className={`text-left font-medium py-2 px-4 rounded-lg ${location.pathname === '/my-projects' ? 'text-[#2EC4B6] bg-[#F0FDFA]' : 'text-gray-600 hover:bg-gray-50'}`}
                  >
                    My Projects
                  </button>
                  <button 
                    onClick={() => { navigate('/my-profile'); setMobileMenuOpen(false); }}
                    className={`text-left font-medium py-2 px-4 rounded-lg ${location.pathname === '/my-profile' ? 'text-[#2EC4B6] bg-[#F0FDFA]' : 'text-gray-600 hover:bg-gray-50'}`}
                  >
                    My Profile
                  </button>
                  <hr className="border-gray-100 my-1" />
                  <button 
                    onClick={handleLogout}
                    className="text-left text-red-600 font-medium py-2 px-4 hover:bg-red-50 rounded-lg flex items-center gap-2"
                  >
                    <LogOut size={18} />
                    Sign Out
                  </button>
                </>
              )}
            </div>
          </nav>
        )}
      </div>
    </header>
  );
}
</file>

<file path="src/components/ProgressCircle.tsx">
import React from 'react';

interface ProgressCircleProps {
  progress?: number;
  percentage?: number;
  size?: number;
}

export function ProgressCircle({ progress, percentage, size = 120 }: ProgressCircleProps) {
  // Use either progress or percentage, default to 0 if neither is provided
  const value = progress ?? percentage ?? 0;
  // Ensure the value is a valid number between 0 and 100
  const validPercentage = isNaN(value) ? 0 : Math.min(Math.max(value, 0), 100);
  
  const radius = (size - 10) / 2;
  const circumference = 2 * Math.PI * radius;
  const offset = circumference - (validPercentage / 100) * circumference;

  return (
    <div className="relative inline-flex items-center justify-center">
      <svg width={size} height={size} className="transform -rotate-90">
        <circle
          cx={size / 2}
          cy={size / 2}
          r={radius}
          stroke="#E5E7EB"
          strokeWidth="8"
          fill="none"
        />
        <circle
          cx={size / 2}
          cy={size / 2}
          r={radius}
          stroke="#2EC4B6"
          strokeWidth="8"
          fill="none"
          strokeDasharray={circumference}
          strokeDashoffset={offset}
          strokeLinecap="round"
          className="transition-all duration-500"
        />
      </svg>
      <div className="absolute inset-0 flex items-center justify-center">
        <span className="metric text-3xl text-[#0D1B2A]">{validPercentage}%</span>
      </div>
    </div>
  );
}
</file>

<file path="src/components/ProjectNotes.tsx">
import React, { useState, useEffect, useRef } from 'react';
import { Send, Loader2, MessageSquare } from 'lucide-react';
import api from '../lib/api';
import { toast } from 'sonner';
import { useAuth } from '../contexts/AuthContext';

interface Note {
  id: string;
  content: string;
  createdAt: string;
  Author: {
    fullName: string;
    role: string;
  };
}

interface ProjectNotesProps {
  projectId: string;
}

export function ProjectNotes({ projectId }: ProjectNotesProps) {
  const { user } = useAuth();
  const [notes, setNotes] = useState<Note[]>([]);
  const [newNote, setNewNote] = useState('');
  const [loading, setLoading] = useState(true);
  const [submitting, setSubmitting] = useState(false);
  
  // Reference for the scrollable container
  const scrollRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    fetchNotes();
  }, [projectId]);

  // Auto-scroll to bottom whenever notes change
  useEffect(() => {
    if (scrollRef.current) {
      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;
    }
  }, [notes]);

  const fetchNotes = async () => {
    try {
      const res = await api.get(`/projects/${projectId}/notes`);
      setNotes(res.data);
    } catch (error) {
      console.error("Failed to load notes");
    } finally {
      setLoading(false);
    }
  };

  const handleSend = async () => {
    if (!newNote.trim()) return;

    try {
      setSubmitting(true);
      const res = await api.post(`/projects/${projectId}/notes`, { content: newNote });
      setNotes([...notes, res.data]);
      setNewNote('');
    } catch (error) {
      toast.error("Failed to post note");
    } finally {
      setSubmitting(false);
    }
  };

  return (
    <div className="bg-white rounded-xl shadow-sm border border-gray-200 flex flex-col h-[500px]">
      <div className="p-4 border-b border-gray-200 flex items-center gap-2">
        <MessageSquare className="text-[#2EC4B6]" size={20} />
        <h3 className="font-semibold text-[#0D1B2A]">Project Discussion</h3>
      </div>

      {/* Notes Feed */}
      <div 
        ref={scrollRef}
        className="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 scroll-smooth"
      >
        {loading ? (
          <div className="flex justify-center py-4">
            <Loader2 className="animate-spin text-gray-400" />
          </div>
        ) : notes.length === 0 ? (
          <div className="text-center text-gray-400 py-8 text-sm">
            No notes yet. Start the discussion!
          </div>
        ) : (
          notes.map((note) => {
            const isMe = note.Author.fullName === user?.name; 

            return (
              <div key={note.id} className={`flex gap-3 ${isMe ? 'flex-row-reverse' : ''}`}>
                {/* Avatar */}
                <div className={`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 text-xs text-white font-bold
                  ${isMe ? 'bg-[#0D1B2A]' : 'bg-[#2EC4B6]'}`}
                >
                  {note.Author.fullName.charAt(0)}
                </div>

                {/* Bubble */}
                <div className={`max-w-[80%]`}>
                  <div className={`flex items-baseline gap-2 mb-1 ${isMe ? 'justify-end' : ''}`}>
                    <span className="text-xs font-bold text-gray-700">{note.Author.fullName}</span>
                    <span className="text-[10px] text-gray-400 uppercase">{note.Author.role}</span>
                  </div>
                  <div className={`p-3 rounded-lg text-sm shadow-sm whitespace-pre-wrap break-words
                    ${isMe ? 'bg-[#0D1B2A] text-white rounded-tr-none' : 'bg-white text-gray-700 border border-gray-200 rounded-tl-none'}`}
                  >
                    {note.content}
                  </div>
                  <p className={`text-[10px] text-gray-400 mt-1 ${isMe ? 'text-right' : ''}`}>
                    {new Date(note.createdAt).toLocaleString([], { dateStyle: 'short', timeStyle: 'short' })}
                  </p>
                </div>
              </div>
            );
          })
        )}
      </div>

      {/* Input Area */}
      <div className="p-4 bg-white border-t border-gray-200 rounded-b-xl">
        <div className="flex gap-2">
          <textarea
            value={newNote}
            onChange={(e) => setNewNote(e.target.value)}
            placeholder="Type a note or update..."
            className="flex-1 border border-gray-300 rounded-lg p-3 text-sm focus:outline-none focus:border-[#2EC4B6] resize-none h-[50px]"
            onKeyDown={(e) => {
              if(e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                handleSend();
              }
            }}
          />
          <button
            onClick={handleSend}
            disabled={submitting || !newNote.trim()}
            className="bg-[#2EC4B6] hover:bg-[#26a599] text-white px-4 rounded-lg flex items-center justify-center transition-colors disabled:opacity-50"
          >
            {submitting ? <Loader2 className="animate-spin" size={18} /> : <Send size={18} />}
          </button>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/components/ProtectedRoute.tsx">
import React from 'react';
import { Navigate, useLocation } from 'react-router-dom';
import { useAuth, UserRole } from '../contexts/AuthContext';

interface ProtectedRouteProps {
  children: React.ReactNode;
  allowedRoles?: UserRole[];
}

export const ProtectedRoute: React.FC<ProtectedRouteProps> = ({ 
  children, 
  allowedRoles 
}) => {
  const { isAuthenticated, user } = useAuth();
  const location = useLocation();

  if (!isAuthenticated) {
    // Redirect to login while saving the attempted location
    return <Navigate to="/login" state={{ from: location }} replace />;
  }

  // Check if user has the required role
  if (allowedRoles && user && !allowedRoles.includes(user.role)) {
    // Redirect to appropriate dashboard based on user role
    const dashboardPath = 
      user.role === 'admin' ? '/admin/dashboard' :
      user.role === 'agent' ? '/agent/dashboard' :
      '/client-dashboard';
    
    return <Navigate to={dashboardPath} replace />;
  }

  return <>{children}</>;
};
</file>

<file path="src/components/StatusBadge.tsx">
import React from 'react';

type StatusType = 'pending' | 'in-progress' | 'action-required' | 'delivered' | 'approved' | 'rejected' | 'Pending Review' | 'Awaiting Quote' | 'Action Required';

interface StatusBadgeProps {
  status: StatusType | string;
  label?: string;
}

export function StatusBadge({ status, label }: StatusBadgeProps) {
  const statusConfig: Record<string, { bg: string; text: string; label: string }> = {
    'pending': { bg: 'bg-[#F39C12]', text: 'text-white', label: 'Pending Triage' },
    'in-progress': { bg: 'bg-[#3498DB]', text: 'text-white', label: 'In Progress' },
    'action-required': { bg: 'bg-[#E74C3C]', text: 'text-white', label: 'Action Required' },
    'delivered': { bg: 'bg-[#2ECC71]', text: 'text-white', label: 'Delivered' },
    'approved': { bg: 'bg-[#2ECC71]', text: 'text-white', label: 'Approved' },
    'rejected': { bg: 'bg-[#E74C3C]', text: 'text-white', label: 'Rejected' },
    'Pending Review': { bg: 'bg-[#F39C12]', text: 'text-white', label: 'Pending Review' },
    'Awaiting Quote': { bg: 'bg-[#3498DB]', text: 'text-white', label: 'Awaiting Quote' },
    'Action Required': { bg: 'bg-[#E74C3C]', text: 'text-white', label: 'Action Required' }
  };

  const config = statusConfig[status] || { bg: 'bg-gray-500', text: 'text-white', label: status };

  return (
    <span className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${config.bg} ${config.text}`}>
      {label || config.label}
    </span>
  );
}
</file>

<file path="src/components/ui/accordion.tsx">
"use client";

import * as React from "react";
import * as AccordionPrimitive from "@radix-ui/react-accordion";
import { ChevronDownIcon } from "lucide-react";

import { cn } from "./utils";

function Accordion({
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Root>) {
  return <AccordionPrimitive.Root data-slot="accordion" {...props} />;
}

function AccordionItem({
  className,
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Item>) {
  return (
    <AccordionPrimitive.Item
      data-slot="accordion-item"
      className={cn("border-b last:border-b-0", className)}
      {...props}
    />
  );
}

function AccordionTrigger({
  className,
  children,
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Trigger>) {
  return (
    <AccordionPrimitive.Header className="flex">
      <AccordionPrimitive.Trigger
        data-slot="accordion-trigger"
        className={cn(
          "focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",
          className,
        )}
        {...props}
      >
        {children}
        <ChevronDownIcon className="text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200" />
      </AccordionPrimitive.Trigger>
    </AccordionPrimitive.Header>
  );
}

function AccordionContent({
  className,
  children,
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Content>) {
  return (
    <AccordionPrimitive.Content
      data-slot="accordion-content"
      className="data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm"
      {...props}
    >
      <div className={cn("pt-0 pb-4", className)}>{children}</div>
    </AccordionPrimitive.Content>
  );
}

export { Accordion, AccordionItem, AccordionTrigger, AccordionContent };
</file>

<file path="src/components/ui/alert-dialog.tsx">
"use client";

import * as React from "react";
import * as AlertDialogPrimitive from "@radix-ui/react-alert-dialog";

import { cn } from "./utils";
import { buttonVariants } from "./button";

function AlertDialog({
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Root>) {
  return <AlertDialogPrimitive.Root data-slot="alert-dialog" {...props} />;
}

function AlertDialogTrigger({
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Trigger>) {
  return (
    <AlertDialogPrimitive.Trigger data-slot="alert-dialog-trigger" {...props} />
  );
}

function AlertDialogPortal({
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Portal>) {
  return (
    <AlertDialogPrimitive.Portal data-slot="alert-dialog-portal" {...props} />
  );
}

function AlertDialogOverlay({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Overlay>) {
  return (
    <AlertDialogPrimitive.Overlay
      data-slot="alert-dialog-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className,
      )}
      {...props}
    />
  );
}

function AlertDialogContent({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Content>) {
  return (
    <AlertDialogPortal>
      <AlertDialogOverlay />
      <AlertDialogPrimitive.Content
        data-slot="alert-dialog-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",
          className,
        )}
        {...props}
      />
    </AlertDialogPortal>
  );
}

function AlertDialogHeader({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="alert-dialog-header"
      className={cn("flex flex-col gap-2 text-center sm:text-left", className)}
      {...props}
    />
  );
}

function AlertDialogFooter({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="alert-dialog-footer"
      className={cn(
        "flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",
        className,
      )}
      {...props}
    />
  );
}

function AlertDialogTitle({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Title>) {
  return (
    <AlertDialogPrimitive.Title
      data-slot="alert-dialog-title"
      className={cn("text-lg font-semibold", className)}
      {...props}
    />
  );
}

function AlertDialogDescription({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Description>) {
  return (
    <AlertDialogPrimitive.Description
      data-slot="alert-dialog-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  );
}

function AlertDialogAction({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Action>) {
  return (
    <AlertDialogPrimitive.Action
      className={cn(buttonVariants(), className)}
      {...props}
    />
  );
}

function AlertDialogCancel({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Cancel>) {
  return (
    <AlertDialogPrimitive.Cancel
      className={cn(buttonVariants({ variant: "outline" }), className)}
      {...props}
    />
  );
}

export {
  AlertDialog,
  AlertDialogPortal,
  AlertDialogOverlay,
  AlertDialogTrigger,
  AlertDialogContent,
  AlertDialogHeader,
  AlertDialogFooter,
  AlertDialogTitle,
  AlertDialogDescription,
  AlertDialogAction,
  AlertDialogCancel,
};
</file>

<file path="src/components/ui/alert.tsx">
import * as React from "react";
import { cva, type VariantProps } from "class-variance-authority";

import { cn } from "./utils";

const alertVariants = cva(
  "relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",
  {
    variants: {
      variant: {
        default: "bg-card text-card-foreground",
        destructive:
          "text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  },
);

function Alert({
  className,
  variant,
  ...props
}: React.ComponentProps<"div"> & VariantProps<typeof alertVariants>) {
  return (
    <div
      data-slot="alert"
      role="alert"
      className={cn(alertVariants({ variant }), className)}
      {...props}
    />
  );
}

function AlertTitle({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="alert-title"
      className={cn(
        "col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",
        className,
      )}
      {...props}
    />
  );
}

function AlertDescription({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="alert-description"
      className={cn(
        "text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",
        className,
      )}
      {...props}
    />
  );
}

export { Alert, AlertTitle, AlertDescription };
</file>

<file path="src/components/ui/aspect-ratio.tsx">
"use client";

import * as AspectRatioPrimitive from "@radix-ui/react-aspect-ratio";

function AspectRatio({
  ...props
}: React.ComponentProps<typeof AspectRatioPrimitive.Root>) {
  return <AspectRatioPrimitive.Root data-slot="aspect-ratio" {...props} />;
}

export { AspectRatio };
</file>

<file path="src/components/ui/avatar.tsx">
"use client";

import * as React from "react";
import * as AvatarPrimitive from "@radix-ui/react-avatar";

import { cn } from "./utils";

function Avatar({
  className,
  ...props
}: React.ComponentProps<typeof AvatarPrimitive.Root>) {
  return (
    <AvatarPrimitive.Root
      data-slot="avatar"
      className={cn(
        "relative flex size-10 shrink-0 overflow-hidden rounded-full",
        className,
      )}
      {...props}
    />
  );
}

function AvatarImage({
  className,
  ...props
}: React.ComponentProps<typeof AvatarPrimitive.Image>) {
  return (
    <AvatarPrimitive.Image
      data-slot="avatar-image"
      className={cn("aspect-square size-full", className)}
      {...props}
    />
  );
}

function AvatarFallback({
  className,
  ...props
}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {
  return (
    <AvatarPrimitive.Fallback
      data-slot="avatar-fallback"
      className={cn(
        "bg-muted flex size-full items-center justify-center rounded-full",
        className,
      )}
      {...props}
    />
  );
}

export { Avatar, AvatarImage, AvatarFallback };
</file>

<file path="src/components/ui/badge.tsx">
import * as React from "react";
import { Slot } from "@radix-ui/react-slot";
import { cva, type VariantProps } from "class-variance-authority";

import { cn } from "./utils";

const badgeVariants = cva(
  "inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",
  {
    variants: {
      variant: {
        default:
          "border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",
        secondary:
          "border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",
        destructive:
          "border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  },
);

function Badge({
  className,
  variant,
  asChild = false,
  ...props
}: React.ComponentProps<"span"> &
  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {
  const Comp = asChild ? Slot : "span";

  return (
    <Comp
      data-slot="badge"
      className={cn(badgeVariants({ variant }), className)}
      {...props}
    />
  );
}

export { Badge, badgeVariants };
</file>

<file path="src/components/ui/breadcrumb.tsx">
import * as React from "react";
import { Slot } from "@radix-ui/react-slot";
import { ChevronRight, MoreHorizontal } from "lucide-react";

import { cn } from "./utils";

function Breadcrumb({ ...props }: React.ComponentProps<"nav">) {
  return <nav aria-label="breadcrumb" data-slot="breadcrumb" {...props} />;
}

function BreadcrumbList({ className, ...props }: React.ComponentProps<"ol">) {
  return (
    <ol
      data-slot="breadcrumb-list"
      className={cn(
        "text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",
        className,
      )}
      {...props}
    />
  );
}

function BreadcrumbItem({ className, ...props }: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="breadcrumb-item"
      className={cn("inline-flex items-center gap-1.5", className)}
      {...props}
    />
  );
}

function BreadcrumbLink({
  asChild,
  className,
  ...props
}: React.ComponentProps<"a"> & {
  asChild?: boolean;
}) {
  const Comp = asChild ? Slot : "a";

  return (
    <Comp
      data-slot="breadcrumb-link"
      className={cn("hover:text-foreground transition-colors", className)}
      {...props}
    />
  );
}

function BreadcrumbPage({ className, ...props }: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="breadcrumb-page"
      role="link"
      aria-disabled="true"
      aria-current="page"
      className={cn("text-foreground font-normal", className)}
      {...props}
    />
  );
}

function BreadcrumbSeparator({
  children,
  className,
  ...props
}: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="breadcrumb-separator"
      role="presentation"
      aria-hidden="true"
      className={cn("[&>svg]:size-3.5", className)}
      {...props}
    >
      {children ?? <ChevronRight />}
    </li>
  );
}

function BreadcrumbEllipsis({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="breadcrumb-ellipsis"
      role="presentation"
      aria-hidden="true"
      className={cn("flex size-9 items-center justify-center", className)}
      {...props}
    >
      <MoreHorizontal className="size-4" />
      <span className="sr-only">More</span>
    </span>
  );
}

export {
  Breadcrumb,
  BreadcrumbList,
  BreadcrumbItem,
  BreadcrumbLink,
  BreadcrumbPage,
  BreadcrumbSeparator,
  BreadcrumbEllipsis,
};
</file>

<file path="src/components/ui/button.tsx">
import * as React from "react";
import { Slot } from "@radix-ui/react-slot";
import { cva, type VariantProps } from "class-variance-authority";

import { cn } from "./utils";

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive:
          "bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",
        secondary:
          "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost:
          "hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-9 px-4 py-2 has-[>svg]:px-3",
        sm: "h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",
        lg: "h-10 rounded-md px-6 has-[>svg]:px-4",
        icon: "size-9 rounded-md",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  },
);

function Button({
  className,
  variant,
  size,
  asChild = false,
  ...props
}: React.ComponentProps<"button"> &
  VariantProps<typeof buttonVariants> & {
    asChild?: boolean;
  }) {
  const Comp = asChild ? Slot : "button";

  return (
    <Comp
      data-slot="button"
      className={cn(buttonVariants({ variant, size, className }))}
      {...props}
    />
  );
}

export { Button, buttonVariants };
</file>

<file path="src/components/ui/calendar.tsx">
"use client";

import * as React from "react";
import { ChevronLeft, ChevronRight } from "lucide-react";
import { DayPicker } from "react-day-picker";

import { cn } from "./utils";
import { buttonVariants } from "./button";

function Calendar({
  className,
  classNames,
  showOutsideDays = true,
  ...props
}: React.ComponentProps<typeof DayPicker>) {
  return (
    <DayPicker
      showOutsideDays={showOutsideDays}
      className={cn("p-3", className)}
      classNames={{
        months: "flex flex-col sm:flex-row gap-2",
        month: "flex flex-col gap-4",
        caption: "flex justify-center pt-1 relative items-center w-full",
        caption_label: "text-sm font-medium",
        nav: "flex items-center gap-1",
        nav_button: cn(
          buttonVariants({ variant: "outline" }),
          "size-7 bg-transparent p-0 opacity-50 hover:opacity-100",
        ),
        nav_button_previous: "absolute left-1",
        nav_button_next: "absolute right-1",
        table: "w-full border-collapse space-x-1",
        head_row: "flex",
        head_cell:
          "text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",
        row: "flex w-full mt-2",
        cell: cn(
          "relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-range-end)]:rounded-r-md",
          props.mode === "range"
            ? "[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md"
            : "[&:has([aria-selected])]:rounded-md",
        ),
        day: cn(
          buttonVariants({ variant: "ghost" }),
          "size-8 p-0 font-normal aria-selected:opacity-100",
        ),
        day_range_start:
          "day-range-start aria-selected:bg-primary aria-selected:text-primary-foreground",
        day_range_end:
          "day-range-end aria-selected:bg-primary aria-selected:text-primary-foreground",
        day_selected:
          "bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",
        day_today: "bg-accent text-accent-foreground",
        day_outside:
          "day-outside text-muted-foreground aria-selected:text-muted-foreground",
        day_disabled: "text-muted-foreground opacity-50",
        day_range_middle:
          "aria-selected:bg-accent aria-selected:text-accent-foreground",
        day_hidden: "invisible",
        ...classNames,
      }}
      components={{
        IconLeft: ({ className, ...props }) => (
          <ChevronLeft className={cn("size-4", className)} {...props} />
        ),
        IconRight: ({ className, ...props }) => (
          <ChevronRight className={cn("size-4", className)} {...props} />
        ),
      }}
      {...props}
    />
  );
}

export { Calendar };
</file>

<file path="src/components/ui/card.tsx">
import * as React from "react";

import { cn } from "./utils";

function Card({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card"
      className={cn(
        "bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",
        className,
      )}
      {...props}
    />
  );
}

function CardHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card-header"
      className={cn(
        "@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",
        className,
      )}
      {...props}
    />
  );
}

function CardTitle({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <h4
      data-slot="card-title"
      className={cn("leading-none", className)}
      {...props}
    />
  );
}

function CardDescription({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <p
      data-slot="card-description"
      className={cn("text-muted-foreground", className)}
      {...props}
    />
  );
}

function CardAction({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card-action"
      className={cn(
        "col-start-2 row-span-2 row-start-1 self-start justify-self-end",
        className,
      )}
      {...props}
    />
  );
}

function CardContent({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card-content"
      className={cn("px-6 [&:last-child]:pb-6", className)}
      {...props}
    />
  );
}

function CardFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card-footer"
      className={cn("flex items-center px-6 pb-6 [.border-t]:pt-6", className)}
      {...props}
    />
  );
}

export {
  Card,
  CardHeader,
  CardFooter,
  CardTitle,
  CardAction,
  CardDescription,
  CardContent,
};
</file>

<file path="src/components/ui/carousel.tsx">
"use client";

import * as React from "react";
import useEmblaCarousel, {
  type UseEmblaCarouselType,
} from "embla-carousel-react";
import { ArrowLeft, ArrowRight } from "lucide-react";

import { cn } from "./utils";
import { Button } from "./button";

type CarouselApi = UseEmblaCarouselType[1];
type UseCarouselParameters = Parameters<typeof useEmblaCarousel>;
type CarouselOptions = UseCarouselParameters[0];
type CarouselPlugin = UseCarouselParameters[1];

type CarouselProps = {
  opts?: CarouselOptions;
  plugins?: CarouselPlugin;
  orientation?: "horizontal" | "vertical";
  setApi?: (api: CarouselApi) => void;
};

type CarouselContextProps = {
  carouselRef: ReturnType<typeof useEmblaCarousel>[0];
  api: ReturnType<typeof useEmblaCarousel>[1];
  scrollPrev: () => void;
  scrollNext: () => void;
  canScrollPrev: boolean;
  canScrollNext: boolean;
} & CarouselProps;

const CarouselContext = React.createContext<CarouselContextProps | null>(null);

function useCarousel() {
  const context = React.useContext(CarouselContext);

  if (!context) {
    throw new Error("useCarousel must be used within a <Carousel />");
  }

  return context;
}

function Carousel({
  orientation = "horizontal",
  opts,
  setApi,
  plugins,
  className,
  children,
  ...props
}: React.ComponentProps<"div"> & CarouselProps) {
  const [carouselRef, api] = useEmblaCarousel(
    {
      ...opts,
      axis: orientation === "horizontal" ? "x" : "y",
    },
    plugins,
  );
  const [canScrollPrev, setCanScrollPrev] = React.useState(false);
  const [canScrollNext, setCanScrollNext] = React.useState(false);

  const onSelect = React.useCallback((api: CarouselApi) => {
    if (!api) return;
    setCanScrollPrev(api.canScrollPrev());
    setCanScrollNext(api.canScrollNext());
  }, []);

  const scrollPrev = React.useCallback(() => {
    api?.scrollPrev();
  }, [api]);

  const scrollNext = React.useCallback(() => {
    api?.scrollNext();
  }, [api]);

  const handleKeyDown = React.useCallback(
    (event: React.KeyboardEvent<HTMLDivElement>) => {
      if (event.key === "ArrowLeft") {
        event.preventDefault();
        scrollPrev();
      } else if (event.key === "ArrowRight") {
        event.preventDefault();
        scrollNext();
      }
    },
    [scrollPrev, scrollNext],
  );

  React.useEffect(() => {
    if (!api || !setApi) return;
    setApi(api);
  }, [api, setApi]);

  React.useEffect(() => {
    if (!api) return;
    onSelect(api);
    api.on("reInit", onSelect);
    api.on("select", onSelect);

    return () => {
      api?.off("select", onSelect);
    };
  }, [api, onSelect]);

  return (
    <CarouselContext.Provider
      value={{
        carouselRef,
        api: api,
        opts,
        orientation:
          orientation || (opts?.axis === "y" ? "vertical" : "horizontal"),
        scrollPrev,
        scrollNext,
        canScrollPrev,
        canScrollNext,
      }}
    >
      <div
        onKeyDownCapture={handleKeyDown}
        className={cn("relative", className)}
        role="region"
        aria-roledescription="carousel"
        data-slot="carousel"
        {...props}
      >
        {children}
      </div>
    </CarouselContext.Provider>
  );
}

function CarouselContent({ className, ...props }: React.ComponentProps<"div">) {
  const { carouselRef, orientation } = useCarousel();

  return (
    <div
      ref={carouselRef}
      className="overflow-hidden"
      data-slot="carousel-content"
    >
      <div
        className={cn(
          "flex",
          orientation === "horizontal" ? "-ml-4" : "-mt-4 flex-col",
          className,
        )}
        {...props}
      />
    </div>
  );
}

function CarouselItem({ className, ...props }: React.ComponentProps<"div">) {
  const { orientation } = useCarousel();

  return (
    <div
      role="group"
      aria-roledescription="slide"
      data-slot="carousel-item"
      className={cn(
        "min-w-0 shrink-0 grow-0 basis-full",
        orientation === "horizontal" ? "pl-4" : "pt-4",
        className,
      )}
      {...props}
    />
  );
}

function CarouselPrevious({
  className,
  variant = "outline",
  size = "icon",
  ...props
}: React.ComponentProps<typeof Button>) {
  const { orientation, scrollPrev, canScrollPrev } = useCarousel();

  return (
    <Button
      data-slot="carousel-previous"
      variant={variant}
      size={size}
      className={cn(
        "absolute size-8 rounded-full",
        orientation === "horizontal"
          ? "top-1/2 -left-12 -translate-y-1/2"
          : "-top-12 left-1/2 -translate-x-1/2 rotate-90",
        className,
      )}
      disabled={!canScrollPrev}
      onClick={scrollPrev}
      {...props}
    >
      <ArrowLeft />
      <span className="sr-only">Previous slide</span>
    </Button>
  );
}

function CarouselNext({
  className,
  variant = "outline",
  size = "icon",
  ...props
}: React.ComponentProps<typeof Button>) {
  const { orientation, scrollNext, canScrollNext } = useCarousel();

  return (
    <Button
      data-slot="carousel-next"
      variant={variant}
      size={size}
      className={cn(
        "absolute size-8 rounded-full",
        orientation === "horizontal"
          ? "top-1/2 -right-12 -translate-y-1/2"
          : "-bottom-12 left-1/2 -translate-x-1/2 rotate-90",
        className,
      )}
      disabled={!canScrollNext}
      onClick={scrollNext}
      {...props}
    >
      <ArrowRight />
      <span className="sr-only">Next slide</span>
    </Button>
  );
}

export {
  type CarouselApi,
  Carousel,
  CarouselContent,
  CarouselItem,
  CarouselPrevious,
  CarouselNext,
};
</file>

<file path="src/components/ui/chart.tsx">
"use client";

import * as React from "react";
import * as RechartsPrimitive from "recharts";

import { cn } from "./utils";

// Format: { THEME_NAME: CSS_SELECTOR }
const THEMES = { light: "", dark: ".dark" } as const;

export type ChartConfig = {
  [k in string]: {
    label?: React.ReactNode;
    icon?: React.ComponentType;
  } & (
    | { color?: string; theme?: never }
    | { color?: never; theme: Record<keyof typeof THEMES, string> }
  );
};

type ChartContextProps = {
  config: ChartConfig;
};

const ChartContext = React.createContext<ChartContextProps | null>(null);

function useChart() {
  const context = React.useContext(ChartContext);

  if (!context) {
    throw new Error("useChart must be used within a <ChartContainer />");
  }

  return context;
}

function ChartContainer({
  id,
  className,
  children,
  config,
  ...props
}: React.ComponentProps<"div"> & {
  config: ChartConfig;
  children: React.ComponentProps<
    typeof RechartsPrimitive.ResponsiveContainer
  >["children"];
}) {
  const uniqueId = React.useId();
  const chartId = `chart-${id || uniqueId.replace(/:/g, "")}`;

  return (
    <ChartContext.Provider value={{ config }}>
      <div
        data-slot="chart"
        data-chart={chartId}
        className={cn(
          "[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",
          className,
        )}
        {...props}
      >
        <ChartStyle id={chartId} config={config} />
        <RechartsPrimitive.ResponsiveContainer>
          {children}
        </RechartsPrimitive.ResponsiveContainer>
      </div>
    </ChartContext.Provider>
  );
}

const ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {
  const colorConfig = Object.entries(config).filter(
    ([, config]) => config.theme || config.color,
  );

  if (!colorConfig.length) {
    return null;
  }

  return (
    <style
      dangerouslySetInnerHTML={{
        __html: Object.entries(THEMES)
          .map(
            ([theme, prefix]) => `
${prefix} [data-chart=${id}] {
${colorConfig
  .map(([key, itemConfig]) => {
    const color =
      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||
      itemConfig.color;
    return color ? `  --color-${key}: ${color};` : null;
  })
  .join("\n")}
}
`,
          )
          .join("\n"),
      }}
    />
  );
};

const ChartTooltip = RechartsPrimitive.Tooltip;

function ChartTooltipContent({
  active,
  payload,
  className,
  indicator = "dot",
  hideLabel = false,
  hideIndicator = false,
  label,
  labelFormatter,
  labelClassName,
  formatter,
  color,
  nameKey,
  labelKey,
}: React.ComponentProps<typeof RechartsPrimitive.Tooltip> &
  React.ComponentProps<"div"> & {
    hideLabel?: boolean;
    hideIndicator?: boolean;
    indicator?: "line" | "dot" | "dashed";
    nameKey?: string;
    labelKey?: string;
  }) {
  const { config } = useChart();

  const tooltipLabel = React.useMemo(() => {
    if (hideLabel || !payload?.length) {
      return null;
    }

    const [item] = payload;
    const key = `${labelKey || item?.dataKey || item?.name || "value"}`;
    const itemConfig = getPayloadConfigFromPayload(config, item, key);
    const value =
      !labelKey && typeof label === "string"
        ? config[label as keyof typeof config]?.label || label
        : itemConfig?.label;

    if (labelFormatter) {
      return (
        <div className={cn("font-medium", labelClassName)}>
          {labelFormatter(value, payload)}
        </div>
      );
    }

    if (!value) {
      return null;
    }

    return <div className={cn("font-medium", labelClassName)}>{value}</div>;
  }, [
    label,
    labelFormatter,
    payload,
    hideLabel,
    labelClassName,
    config,
    labelKey,
  ]);

  if (!active || !payload?.length) {
    return null;
  }

  const nestLabel = payload.length === 1 && indicator !== "dot";

  return (
    <div
      className={cn(
        "border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl",
        className,
      )}
    >
      {!nestLabel ? tooltipLabel : null}
      <div className="grid gap-1.5">
        {payload.map((item, index) => {
          const key = `${nameKey || item.name || item.dataKey || "value"}`;
          const itemConfig = getPayloadConfigFromPayload(config, item, key);
          const indicatorColor = color || item.payload.fill || item.color;

          return (
            <div
              key={item.dataKey}
              className={cn(
                "[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5",
                indicator === "dot" && "items-center",
              )}
            >
              {formatter && item?.value !== undefined && item.name ? (
                formatter(item.value, item.name, item, index, item.payload)
              ) : (
                <>
                  {itemConfig?.icon ? (
                    <itemConfig.icon />
                  ) : (
                    !hideIndicator && (
                      <div
                        className={cn(
                          "shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)",
                          {
                            "h-2.5 w-2.5": indicator === "dot",
                            "w-1": indicator === "line",
                            "w-0 border-[1.5px] border-dashed bg-transparent":
                              indicator === "dashed",
                            "my-0.5": nestLabel && indicator === "dashed",
                          },
                        )}
                        style={
                          {
                            "--color-bg": indicatorColor,
                            "--color-border": indicatorColor,
                          } as React.CSSProperties
                        }
                      />
                    )
                  )}
                  <div
                    className={cn(
                      "flex flex-1 justify-between leading-none",
                      nestLabel ? "items-end" : "items-center",
                    )}
                  >
                    <div className="grid gap-1.5">
                      {nestLabel ? tooltipLabel : null}
                      <span className="text-muted-foreground">
                        {itemConfig?.label || item.name}
                      </span>
                    </div>
                    {item.value && (
                      <span className="text-foreground font-mono font-medium tabular-nums">
                        {item.value.toLocaleString()}
                      </span>
                    )}
                  </div>
                </>
              )}
            </div>
          );
        })}
      </div>
    </div>
  );
}

const ChartLegend = RechartsPrimitive.Legend;

function ChartLegendContent({
  className,
  hideIcon = false,
  payload,
  verticalAlign = "bottom",
  nameKey,
}: React.ComponentProps<"div"> &
  Pick<RechartsPrimitive.LegendProps, "payload" | "verticalAlign"> & {
    hideIcon?: boolean;
    nameKey?: string;
  }) {
  const { config } = useChart();

  if (!payload?.length) {
    return null;
  }

  return (
    <div
      className={cn(
        "flex items-center justify-center gap-4",
        verticalAlign === "top" ? "pb-3" : "pt-3",
        className,
      )}
    >
      {payload.map((item) => {
        const key = `${nameKey || item.dataKey || "value"}`;
        const itemConfig = getPayloadConfigFromPayload(config, item, key);

        return (
          <div
            key={item.value}
            className={cn(
              "[&>svg]:text-muted-foreground flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3",
            )}
          >
            {itemConfig?.icon && !hideIcon ? (
              <itemConfig.icon />
            ) : (
              <div
                className="h-2 w-2 shrink-0 rounded-[2px]"
                style={{
                  backgroundColor: item.color,
                }}
              />
            )}
            {itemConfig?.label}
          </div>
        );
      })}
    </div>
  );
}

// Helper to extract item config from a payload.
function getPayloadConfigFromPayload(
  config: ChartConfig,
  payload: unknown,
  key: string,
) {
  if (typeof payload !== "object" || payload === null) {
    return undefined;
  }

  const payloadPayload =
    "payload" in payload &&
    typeof payload.payload === "object" &&
    payload.payload !== null
      ? payload.payload
      : undefined;

  let configLabelKey: string = key;

  if (
    key in payload &&
    typeof payload[key as keyof typeof payload] === "string"
  ) {
    configLabelKey = payload[key as keyof typeof payload] as string;
  } else if (
    payloadPayload &&
    key in payloadPayload &&
    typeof payloadPayload[key as keyof typeof payloadPayload] === "string"
  ) {
    configLabelKey = payloadPayload[
      key as keyof typeof payloadPayload
    ] as string;
  }

  return configLabelKey in config
    ? config[configLabelKey]
    : config[key as keyof typeof config];
}

export {
  ChartContainer,
  ChartTooltip,
  ChartTooltipContent,
  ChartLegend,
  ChartLegendContent,
  ChartStyle,
};
</file>

<file path="src/components/ui/checkbox.tsx">
"use client";

import * as React from "react";
import * as CheckboxPrimitive from "@radix-ui/react-checkbox";
import { CheckIcon } from "lucide-react";

import { cn } from "./utils";

function Checkbox({
  className,
  ...props
}: React.ComponentProps<typeof CheckboxPrimitive.Root>) {
  return (
    <CheckboxPrimitive.Root
      data-slot="checkbox"
      className={cn(
        "peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
        className,
      )}
      {...props}
    >
      <CheckboxPrimitive.Indicator
        data-slot="checkbox-indicator"
        className="flex items-center justify-center text-current transition-none"
      >
        <CheckIcon className="size-3.5" />
      </CheckboxPrimitive.Indicator>
    </CheckboxPrimitive.Root>
  );
}

export { Checkbox };
</file>

<file path="src/components/ui/collapsible.tsx">
"use client";

import * as CollapsiblePrimitive from "@radix-ui/react-collapsible";

const Collapsible = CollapsiblePrimitive.Root;

function CollapsibleTrigger({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleTrigger>) {
  return (
    <CollapsiblePrimitive.CollapsibleTrigger
      data-slot="collapsible-trigger"
      {...props}
    />
  );
}

function CollapsibleContent({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleContent>) {
  return (
    <CollapsiblePrimitive.CollapsibleContent
      data-slot="collapsible-content"
      {...props}
    />
  );
}

export { Collapsible, CollapsibleTrigger, CollapsibleContent };
</file>

<file path="src/components/ui/command.tsx">
"use client";

import * as React from "react";
import { Command as CommandPrimitive } from "cmdk";
import { SearchIcon } from "lucide-react";

import { cn } from "./utils";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
} from "./dialog";

function Command({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive>) {
  return (
    <CommandPrimitive
      data-slot="command"
      className={cn(
        "bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",
        className,
      )}
      {...props}
    />
  );
}

function CommandDialog({
  title = "Command Palette",
  description = "Search for a command to run...",
  children,
  ...props
}: React.ComponentProps<typeof Dialog> & {
  title?: string;
  description?: string;
}) {
  return (
    <Dialog {...props}>
      <DialogHeader className="sr-only">
        <DialogTitle>{title}</DialogTitle>
        <DialogDescription>{description}</DialogDescription>
      </DialogHeader>
      <DialogContent className="overflow-hidden p-0">
        <Command className="[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5">
          {children}
        </Command>
      </DialogContent>
    </Dialog>
  );
}

function CommandInput({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Input>) {
  return (
    <div
      data-slot="command-input-wrapper"
      className="flex h-9 items-center gap-2 border-b px-3"
    >
      <SearchIcon className="size-4 shrink-0 opacity-50" />
      <CommandPrimitive.Input
        data-slot="command-input"
        className={cn(
          "placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",
          className,
        )}
        {...props}
      />
    </div>
  );
}

function CommandList({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.List>) {
  return (
    <CommandPrimitive.List
      data-slot="command-list"
      className={cn(
        "max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",
        className,
      )}
      {...props}
    />
  );
}

function CommandEmpty({
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Empty>) {
  return (
    <CommandPrimitive.Empty
      data-slot="command-empty"
      className="py-6 text-center text-sm"
      {...props}
    />
  );
}

function CommandGroup({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Group>) {
  return (
    <CommandPrimitive.Group
      data-slot="command-group"
      className={cn(
        "text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",
        className,
      )}
      {...props}
    />
  );
}

function CommandSeparator({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Separator>) {
  return (
    <CommandPrimitive.Separator
      data-slot="command-separator"
      className={cn("bg-border -mx-1 h-px", className)}
      {...props}
    />
  );
}

function CommandItem({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Item>) {
  return (
    <CommandPrimitive.Item
      data-slot="command-item"
      className={cn(
        "data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function CommandShortcut({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="command-shortcut"
      className={cn(
        "text-muted-foreground ml-auto text-xs tracking-widest",
        className,
      )}
      {...props}
    />
  );
}

export {
  Command,
  CommandDialog,
  CommandInput,
  CommandList,
  CommandEmpty,
  CommandGroup,
  CommandItem,
  CommandShortcut,
  CommandSeparator,
};
</file>

<file path="src/components/ui/context-menu.tsx">
"use client";

import * as React from "react";
import * as ContextMenuPrimitive from "@radix-ui/react-context-menu";
import { CheckIcon, ChevronRightIcon, CircleIcon } from "lucide-react";

import { cn } from "./utils";

function ContextMenu({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Root>) {
  return <ContextMenuPrimitive.Root data-slot="context-menu" {...props} />;
}

function ContextMenuTrigger({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Trigger>) {
  return (
    <ContextMenuPrimitive.Trigger data-slot="context-menu-trigger" {...props} />
  );
}

function ContextMenuGroup({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Group>) {
  return (
    <ContextMenuPrimitive.Group data-slot="context-menu-group" {...props} />
  );
}

function ContextMenuPortal({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Portal>) {
  return (
    <ContextMenuPrimitive.Portal data-slot="context-menu-portal" {...props} />
  );
}

function ContextMenuSub({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Sub>) {
  return <ContextMenuPrimitive.Sub data-slot="context-menu-sub" {...props} />;
}

function ContextMenuRadioGroup({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.RadioGroup>) {
  return (
    <ContextMenuPrimitive.RadioGroup
      data-slot="context-menu-radio-group"
      {...props}
    />
  );
}

function ContextMenuSubTrigger({
  className,
  inset,
  children,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.SubTrigger> & {
  inset?: boolean;
}) {
  return (
    <ContextMenuPrimitive.SubTrigger
      data-slot="context-menu-sub-trigger"
      data-inset={inset}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      {children}
      <ChevronRightIcon className="ml-auto" />
    </ContextMenuPrimitive.SubTrigger>
  );
}

function ContextMenuSubContent({
  className,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.SubContent>) {
  return (
    <ContextMenuPrimitive.SubContent
      data-slot="context-menu-sub-content"
      className={cn(
        "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",
        className,
      )}
      {...props}
    />
  );
}

function ContextMenuContent({
  className,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Content>) {
  return (
    <ContextMenuPrimitive.Portal>
      <ContextMenuPrimitive.Content
        data-slot="context-menu-content"
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",
          className,
        )}
        {...props}
      />
    </ContextMenuPrimitive.Portal>
  );
}

function ContextMenuItem({
  className,
  inset,
  variant = "default",
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Item> & {
  inset?: boolean;
  variant?: "default" | "destructive";
}) {
  return (
    <ContextMenuPrimitive.Item
      data-slot="context-menu-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function ContextMenuCheckboxItem({
  className,
  children,
  checked,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.CheckboxItem>) {
  return (
    <ContextMenuPrimitive.CheckboxItem
      data-slot="context-menu-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      checked={checked}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <ContextMenuPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </ContextMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </ContextMenuPrimitive.CheckboxItem>
  );
}

function ContextMenuRadioItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.RadioItem>) {
  return (
    <ContextMenuPrimitive.RadioItem
      data-slot="context-menu-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <ContextMenuPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </ContextMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </ContextMenuPrimitive.RadioItem>
  );
}

function ContextMenuLabel({
  className,
  inset,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Label> & {
  inset?: boolean;
}) {
  return (
    <ContextMenuPrimitive.Label
      data-slot="context-menu-label"
      data-inset={inset}
      className={cn(
        "text-foreground px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",
        className,
      )}
      {...props}
    />
  );
}

function ContextMenuSeparator({
  className,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Separator>) {
  return (
    <ContextMenuPrimitive.Separator
      data-slot="context-menu-separator"
      className={cn("bg-border -mx-1 my-1 h-px", className)}
      {...props}
    />
  );
}

function ContextMenuShortcut({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="context-menu-shortcut"
      className={cn(
        "text-muted-foreground ml-auto text-xs tracking-widest",
        className,
      )}
      {...props}
    />
  );
}

export {
  ContextMenu,
  ContextMenuTrigger,
  ContextMenuContent,
  ContextMenuItem,
  ContextMenuCheckboxItem,
  ContextMenuRadioItem,
  ContextMenuLabel,
  ContextMenuSeparator,
  ContextMenuShortcut,
  ContextMenuGroup,
  ContextMenuPortal,
  ContextMenuSub,
  ContextMenuSubContent,
  ContextMenuSubTrigger,
  ContextMenuRadioGroup,
};
</file>

<file path="src/components/ui/dialog.tsx">
"use client";

import * as React from "react";
import * as DialogPrimitive from "@radix-ui/react-dialog@1.1.6";
import { XIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function Dialog({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Root>) {
  return <DialogPrimitive.Root data-slot="dialog" {...props} />;
}

function DialogTrigger({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {
  return <DialogPrimitive.Trigger data-slot="dialog-trigger" {...props} />;
}

function DialogPortal({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Portal>) {
  return <DialogPrimitive.Portal data-slot="dialog-portal" {...props} />;
}

function DialogClose({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Close>) {
  return <DialogPrimitive.Close data-slot="dialog-close" {...props} />;
}

function DialogOverlay({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {
  return (
    <DialogPrimitive.Overlay
      data-slot="dialog-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className,
      )}
      {...props}
    />
  );
}

function DialogContent({
  className,
  children,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Content>) {
  return (
    <DialogPortal data-slot="dialog-portal">
      <DialogOverlay />
      <DialogPrimitive.Content
        data-slot="dialog-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",
          className,
        )}
        {...props}
      >
        {children}
        <DialogPrimitive.Close className="ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4">
          <XIcon />
          <span className="sr-only">Close</span>
        </DialogPrimitive.Close>
      </DialogPrimitive.Content>
    </DialogPortal>
  );
}

function DialogHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="dialog-header"
      className={cn("flex flex-col gap-2 text-center sm:text-left", className)}
      {...props}
    />
  );
}

function DialogFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="dialog-footer"
      className={cn(
        "flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",
        className,
      )}
      {...props}
    />
  );
}

function DialogTitle({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Title>) {
  return (
    <DialogPrimitive.Title
      data-slot="dialog-title"
      className={cn("text-lg leading-none font-semibold", className)}
      {...props}
    />
  );
}

function DialogDescription({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Description>) {
  return (
    <DialogPrimitive.Description
      data-slot="dialog-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  );
}

export {
  Dialog,
  DialogClose,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogOverlay,
  DialogPortal,
  DialogTitle,
  DialogTrigger,
};
</file>

<file path="src/components/ui/drawer.tsx">
"use client";

import * as React from "react";
import { Drawer as DrawerPrimitive } from "vaul@1.1.2";

import { cn } from "./utils";

function Drawer({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Root>) {
  return <DrawerPrimitive.Root data-slot="drawer" {...props} />;
}

function DrawerTrigger({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Trigger>) {
  return <DrawerPrimitive.Trigger data-slot="drawer-trigger" {...props} />;
}

function DrawerPortal({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Portal>) {
  return <DrawerPrimitive.Portal data-slot="drawer-portal" {...props} />;
}

function DrawerClose({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Close>) {
  return <DrawerPrimitive.Close data-slot="drawer-close" {...props} />;
}

function DrawerOverlay({
  className,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Overlay>) {
  return (
    <DrawerPrimitive.Overlay
      data-slot="drawer-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className,
      )}
      {...props}
    />
  );
}

function DrawerContent({
  className,
  children,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Content>) {
  return (
    <DrawerPortal data-slot="drawer-portal">
      <DrawerOverlay />
      <DrawerPrimitive.Content
        data-slot="drawer-content"
        className={cn(
          "group/drawer-content bg-background fixed z-50 flex h-auto flex-col",
          "data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b",
          "data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t",
          "data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm",
          "data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm",
          className,
        )}
        {...props}
      >
        <div className="bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block" />
        {children}
      </DrawerPrimitive.Content>
    </DrawerPortal>
  );
}

function DrawerHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="drawer-header"
      className={cn("flex flex-col gap-1.5 p-4", className)}
      {...props}
    />
  );
}

function DrawerFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="drawer-footer"
      className={cn("mt-auto flex flex-col gap-2 p-4", className)}
      {...props}
    />
  );
}

function DrawerTitle({
  className,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Title>) {
  return (
    <DrawerPrimitive.Title
      data-slot="drawer-title"
      className={cn("text-foreground font-semibold", className)}
      {...props}
    />
  );
}

function DrawerDescription({
  className,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Description>) {
  return (
    <DrawerPrimitive.Description
      data-slot="drawer-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  );
}

export {
  Drawer,
  DrawerPortal,
  DrawerOverlay,
  DrawerTrigger,
  DrawerClose,
  DrawerContent,
  DrawerHeader,
  DrawerFooter,
  DrawerTitle,
  DrawerDescription,
};
</file>

<file path="src/components/ui/dropdown-menu.tsx">
"use client";

import * as React from "react";
import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu@2.1.6";
import { CheckIcon, ChevronRightIcon, CircleIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function DropdownMenu({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {
  return <DropdownMenuPrimitive.Root data-slot="dropdown-menu" {...props} />;
}

function DropdownMenuPortal({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {
  return (
    <DropdownMenuPrimitive.Portal data-slot="dropdown-menu-portal" {...props} />
  );
}

function DropdownMenuTrigger({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {
  return (
    <DropdownMenuPrimitive.Trigger
      data-slot="dropdown-menu-trigger"
      {...props}
    />
  );
}

function DropdownMenuContent({
  className,
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {
  return (
    <DropdownMenuPrimitive.Portal>
      <DropdownMenuPrimitive.Content
        data-slot="dropdown-menu-content"
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",
          className,
        )}
        {...props}
      />
    </DropdownMenuPrimitive.Portal>
  );
}

function DropdownMenuGroup({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {
  return (
    <DropdownMenuPrimitive.Group data-slot="dropdown-menu-group" {...props} />
  );
}

function DropdownMenuItem({
  className,
  inset,
  variant = "default",
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {
  inset?: boolean;
  variant?: "default" | "destructive";
}) {
  return (
    <DropdownMenuPrimitive.Item
      data-slot="dropdown-menu-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function DropdownMenuCheckboxItem({
  className,
  children,
  checked,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {
  return (
    <DropdownMenuPrimitive.CheckboxItem
      data-slot="dropdown-menu-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      checked={checked}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.CheckboxItem>
  );
}

function DropdownMenuRadioGroup({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {
  return (
    <DropdownMenuPrimitive.RadioGroup
      data-slot="dropdown-menu-radio-group"
      {...props}
    />
  );
}

function DropdownMenuRadioItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {
  return (
    <DropdownMenuPrimitive.RadioItem
      data-slot="dropdown-menu-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.RadioItem>
  );
}

function DropdownMenuLabel({
  className,
  inset,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {
  inset?: boolean;
}) {
  return (
    <DropdownMenuPrimitive.Label
      data-slot="dropdown-menu-label"
      data-inset={inset}
      className={cn(
        "px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",
        className,
      )}
      {...props}
    />
  );
}

function DropdownMenuSeparator({
  className,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {
  return (
    <DropdownMenuPrimitive.Separator
      data-slot="dropdown-menu-separator"
      className={cn("bg-border -mx-1 my-1 h-px", className)}
      {...props}
    />
  );
}

function DropdownMenuShortcut({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="dropdown-menu-shortcut"
      className={cn(
        "text-muted-foreground ml-auto text-xs tracking-widest",
        className,
      )}
      {...props}
    />
  );
}

function DropdownMenuSub({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {
  return <DropdownMenuPrimitive.Sub data-slot="dropdown-menu-sub" {...props} />;
}

function DropdownMenuSubTrigger({
  className,
  inset,
  children,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {
  inset?: boolean;
}) {
  return (
    <DropdownMenuPrimitive.SubTrigger
      data-slot="dropdown-menu-sub-trigger"
      data-inset={inset}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8",
        className,
      )}
      {...props}
    >
      {children}
      <ChevronRightIcon className="ml-auto size-4" />
    </DropdownMenuPrimitive.SubTrigger>
  );
}

function DropdownMenuSubContent({
  className,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {
  return (
    <DropdownMenuPrimitive.SubContent
      data-slot="dropdown-menu-sub-content"
      className={cn(
        "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",
        className,
      )}
      {...props}
    />
  );
}

export {
  DropdownMenu,
  DropdownMenuPortal,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuGroup,
  DropdownMenuLabel,
  DropdownMenuItem,
  DropdownMenuCheckboxItem,
  DropdownMenuRadioGroup,
  DropdownMenuRadioItem,
  DropdownMenuSeparator,
  DropdownMenuShortcut,
  DropdownMenuSub,
  DropdownMenuSubTrigger,
  DropdownMenuSubContent,
};
</file>

<file path="src/components/ui/form.tsx">
"use client";

import * as React from "react";
import * as LabelPrimitive from "@radix-ui/react-label@2.1.2";
import { Slot } from "@radix-ui/react-slot@1.1.2";
import {
  Controller,
  FormProvider,
  useFormContext,
  useFormState,
  type ControllerProps,
  type FieldPath,
  type FieldValues,
} from "react-hook-form@7.55.0";

import { cn } from "./utils";
import { Label } from "./label";

const Form = FormProvider;

type FormFieldContextValue<
  TFieldValues extends FieldValues = FieldValues,
  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,
> = {
  name: TName;
};

const FormFieldContext = React.createContext<FormFieldContextValue>(
  {} as FormFieldContextValue,
);

const FormField = <
  TFieldValues extends FieldValues = FieldValues,
  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,
>({
  ...props
}: ControllerProps<TFieldValues, TName>) => {
  return (
    <FormFieldContext.Provider value={{ name: props.name }}>
      <Controller {...props} />
    </FormFieldContext.Provider>
  );
};

const useFormField = () => {
  const fieldContext = React.useContext(FormFieldContext);
  const itemContext = React.useContext(FormItemContext);
  const { getFieldState } = useFormContext();
  const formState = useFormState({ name: fieldContext.name });
  const fieldState = getFieldState(fieldContext.name, formState);

  if (!fieldContext) {
    throw new Error("useFormField should be used within <FormField>");
  }

  const { id } = itemContext;

  return {
    id,
    name: fieldContext.name,
    formItemId: `${id}-form-item`,
    formDescriptionId: `${id}-form-item-description`,
    formMessageId: `${id}-form-item-message`,
    ...fieldState,
  };
};

type FormItemContextValue = {
  id: string;
};

const FormItemContext = React.createContext<FormItemContextValue>(
  {} as FormItemContextValue,
);

function FormItem({ className, ...props }: React.ComponentProps<"div">) {
  const id = React.useId();

  return (
    <FormItemContext.Provider value={{ id }}>
      <div
        data-slot="form-item"
        className={cn("grid gap-2", className)}
        {...props}
      />
    </FormItemContext.Provider>
  );
}

function FormLabel({
  className,
  ...props
}: React.ComponentProps<typeof LabelPrimitive.Root>) {
  const { error, formItemId } = useFormField();

  return (
    <Label
      data-slot="form-label"
      data-error={!!error}
      className={cn("data-[error=true]:text-destructive", className)}
      htmlFor={formItemId}
      {...props}
    />
  );
}

function FormControl({ ...props }: React.ComponentProps<typeof Slot>) {
  const { error, formItemId, formDescriptionId, formMessageId } =
    useFormField();

  return (
    <Slot
      data-slot="form-control"
      id={formItemId}
      aria-describedby={
        !error
          ? `${formDescriptionId}`
          : `${formDescriptionId} ${formMessageId}`
      }
      aria-invalid={!!error}
      {...props}
    />
  );
}

function FormDescription({ className, ...props }: React.ComponentProps<"p">) {
  const { formDescriptionId } = useFormField();

  return (
    <p
      data-slot="form-description"
      id={formDescriptionId}
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  );
}

function FormMessage({ className, ...props }: React.ComponentProps<"p">) {
  const { error, formMessageId } = useFormField();
  const body = error ? String(error?.message ?? "") : props.children;

  if (!body) {
    return null;
  }

  return (
    <p
      data-slot="form-message"
      id={formMessageId}
      className={cn("text-destructive text-sm", className)}
      {...props}
    >
      {body}
    </p>
  );
}

export {
  useFormField,
  Form,
  FormItem,
  FormLabel,
  FormControl,
  FormDescription,
  FormMessage,
  FormField,
};
</file>

<file path="src/components/ui/hover-card.tsx">
"use client";

import * as React from "react";
import * as HoverCardPrimitive from "@radix-ui/react-hover-card@1.1.6";

import { cn } from "./utils";

function HoverCard({
  ...props
}: React.ComponentProps<typeof HoverCardPrimitive.Root>) {
  return <HoverCardPrimitive.Root data-slot="hover-card" {...props} />;
}

function HoverCardTrigger({
  ...props
}: React.ComponentProps<typeof HoverCardPrimitive.Trigger>) {
  return (
    <HoverCardPrimitive.Trigger data-slot="hover-card-trigger" {...props} />
  );
}

function HoverCardContent({
  className,
  align = "center",
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof HoverCardPrimitive.Content>) {
  return (
    <HoverCardPrimitive.Portal data-slot="hover-card-portal">
      <HoverCardPrimitive.Content
        data-slot="hover-card-content"
        align={align}
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-64 origin-(--radix-hover-card-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",
          className,
        )}
        {...props}
      />
    </HoverCardPrimitive.Portal>
  );
}

export { HoverCard, HoverCardTrigger, HoverCardContent };
</file>

<file path="src/components/ui/input-otp.tsx">
"use client";

import * as React from "react";
import { OTPInput, OTPInputContext } from "input-otp@1.4.2";
import { MinusIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function InputOTP({
  className,
  containerClassName,
  ...props
}: React.ComponentProps<typeof OTPInput> & {
  containerClassName?: string;
}) {
  return (
    <OTPInput
      data-slot="input-otp"
      containerClassName={cn(
        "flex items-center gap-2 has-disabled:opacity-50",
        containerClassName,
      )}
      className={cn("disabled:cursor-not-allowed", className)}
      {...props}
    />
  );
}

function InputOTPGroup({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="input-otp-group"
      className={cn("flex items-center gap-1", className)}
      {...props}
    />
  );
}

function InputOTPSlot({
  index,
  className,
  ...props
}: React.ComponentProps<"div"> & {
  index: number;
}) {
  const inputOTPContext = React.useContext(OTPInputContext);
  const { char, hasFakeCaret, isActive } = inputOTPContext?.slots[index] ?? {};

  return (
    <div
      data-slot="input-otp-slot"
      data-active={isActive}
      className={cn(
        "data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm bg-input-background transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",
        className,
      )}
      {...props}
    >
      {char}
      {hasFakeCaret && (
        <div className="pointer-events-none absolute inset-0 flex items-center justify-center">
          <div className="animate-caret-blink bg-foreground h-4 w-px duration-1000" />
        </div>
      )}
    </div>
  );
}

function InputOTPSeparator({ ...props }: React.ComponentProps<"div">) {
  return (
    <div data-slot="input-otp-separator" role="separator" {...props}>
      <MinusIcon />
    </div>
  );
}

export { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator };
</file>

<file path="src/components/ui/input.tsx">
import * as React from "react";

import { cn } from "./utils";

function Input({ className, type, ...props }: React.ComponentProps<"input">) {
  return (
    <input
      type={type}
      data-slot="input"
      className={cn(
        "file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        "focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",
        "aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
        className,
      )}
      {...props}
    />
  );
}

export { Input };
</file>

<file path="src/components/ui/label.tsx">
"use client";

import * as React from "react";
import * as LabelPrimitive from "@radix-ui/react-label@2.1.2";

import { cn } from "./utils";

function Label({
  className,
  ...props
}: React.ComponentProps<typeof LabelPrimitive.Root>) {
  return (
    <LabelPrimitive.Root
      data-slot="label"
      className={cn(
        "flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",
        className,
      )}
      {...props}
    />
  );
}

export { Label };
</file>

<file path="src/components/ui/menubar.tsx">
"use client";

import * as React from "react";
import * as MenubarPrimitive from "@radix-ui/react-menubar@1.1.6";
import { CheckIcon, ChevronRightIcon, CircleIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function Menubar({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Root>) {
  return (
    <MenubarPrimitive.Root
      data-slot="menubar"
      className={cn(
        "bg-background flex h-9 items-center gap-1 rounded-md border p-1 shadow-xs",
        className,
      )}
      {...props}
    />
  );
}

function MenubarMenu({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {
  return <MenubarPrimitive.Menu data-slot="menubar-menu" {...props} />;
}

function MenubarGroup({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Group>) {
  return <MenubarPrimitive.Group data-slot="menubar-group" {...props} />;
}

function MenubarPortal({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {
  return <MenubarPrimitive.Portal data-slot="menubar-portal" {...props} />;
}

function MenubarRadioGroup({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {
  return (
    <MenubarPrimitive.RadioGroup data-slot="menubar-radio-group" {...props} />
  );
}

function MenubarTrigger({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Trigger>) {
  return (
    <MenubarPrimitive.Trigger
      data-slot="menubar-trigger"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex items-center rounded-sm px-2 py-1 text-sm font-medium outline-hidden select-none",
        className,
      )}
      {...props}
    />
  );
}

function MenubarContent({
  className,
  align = "start",
  alignOffset = -4,
  sideOffset = 8,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Content>) {
  return (
    <MenubarPortal>
      <MenubarPrimitive.Content
        data-slot="menubar-content"
        align={align}
        alignOffset={alignOffset}
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[12rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-md",
          className,
        )}
        {...props}
      />
    </MenubarPortal>
  );
}

function MenubarItem({
  className,
  inset,
  variant = "default",
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Item> & {
  inset?: boolean;
  variant?: "default" | "destructive";
}) {
  return (
    <MenubarPrimitive.Item
      data-slot="menubar-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function MenubarCheckboxItem({
  className,
  children,
  checked,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.CheckboxItem>) {
  return (
    <MenubarPrimitive.CheckboxItem
      data-slot="menubar-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-xs py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      checked={checked}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <MenubarPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </MenubarPrimitive.ItemIndicator>
      </span>
      {children}
    </MenubarPrimitive.CheckboxItem>
  );
}

function MenubarRadioItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.RadioItem>) {
  return (
    <MenubarPrimitive.RadioItem
      data-slot="menubar-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-xs py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <MenubarPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </MenubarPrimitive.ItemIndicator>
      </span>
      {children}
    </MenubarPrimitive.RadioItem>
  );
}

function MenubarLabel({
  className,
  inset,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Label> & {
  inset?: boolean;
}) {
  return (
    <MenubarPrimitive.Label
      data-slot="menubar-label"
      data-inset={inset}
      className={cn(
        "px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",
        className,
      )}
      {...props}
    />
  );
}

function MenubarSeparator({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Separator>) {
  return (
    <MenubarPrimitive.Separator
      data-slot="menubar-separator"
      className={cn("bg-border -mx-1 my-1 h-px", className)}
      {...props}
    />
  );
}

function MenubarShortcut({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="menubar-shortcut"
      className={cn(
        "text-muted-foreground ml-auto text-xs tracking-widest",
        className,
      )}
      {...props}
    />
  );
}

function MenubarSub({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {
  return <MenubarPrimitive.Sub data-slot="menubar-sub" {...props} />;
}

function MenubarSubTrigger({
  className,
  inset,
  children,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.SubTrigger> & {
  inset?: boolean;
}) {
  return (
    <MenubarPrimitive.SubTrigger
      data-slot="menubar-sub-trigger"
      data-inset={inset}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-none select-none data-[inset]:pl-8",
        className,
      )}
      {...props}
    >
      {children}
      <ChevronRightIcon className="ml-auto h-4 w-4" />
    </MenubarPrimitive.SubTrigger>
  );
}

function MenubarSubContent({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.SubContent>) {
  return (
    <MenubarPrimitive.SubContent
      data-slot="menubar-sub-content"
      className={cn(
        "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",
        className,
      )}
      {...props}
    />
  );
}

export {
  Menubar,
  MenubarPortal,
  MenubarMenu,
  MenubarTrigger,
  MenubarContent,
  MenubarGroup,
  MenubarSeparator,
  MenubarLabel,
  MenubarItem,
  MenubarShortcut,
  MenubarCheckboxItem,
  MenubarRadioGroup,
  MenubarRadioItem,
  MenubarSub,
  MenubarSubTrigger,
  MenubarSubContent,
};
</file>

<file path="src/components/ui/navigation-menu.tsx">
import * as React from "react";
import * as NavigationMenuPrimitive from "@radix-ui/react-navigation-menu@1.2.5";
import { cva } from "class-variance-authority@0.7.1";
import { ChevronDownIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function NavigationMenu({
  className,
  children,
  viewport = true,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Root> & {
  viewport?: boolean;
}) {
  return (
    <NavigationMenuPrimitive.Root
      data-slot="navigation-menu"
      data-viewport={viewport}
      className={cn(
        "group/navigation-menu relative flex max-w-max flex-1 items-center justify-center",
        className,
      )}
      {...props}
    >
      {children}
      {viewport && <NavigationMenuViewport />}
    </NavigationMenuPrimitive.Root>
  );
}

function NavigationMenuList({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.List>) {
  return (
    <NavigationMenuPrimitive.List
      data-slot="navigation-menu-list"
      className={cn(
        "group flex flex-1 list-none items-center justify-center gap-1",
        className,
      )}
      {...props}
    />
  );
}

function NavigationMenuItem({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Item>) {
  return (
    <NavigationMenuPrimitive.Item
      data-slot="navigation-menu-item"
      className={cn("relative", className)}
      {...props}
    />
  );
}

const navigationMenuTriggerStyle = cva(
  "group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=open]:hover:bg-accent data-[state=open]:text-accent-foreground data-[state=open]:focus:bg-accent data-[state=open]:bg-accent/50 focus-visible:ring-ring/50 outline-none transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1",
);

function NavigationMenuTrigger({
  className,
  children,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Trigger>) {
  return (
    <NavigationMenuPrimitive.Trigger
      data-slot="navigation-menu-trigger"
      className={cn(navigationMenuTriggerStyle(), "group", className)}
      {...props}
    >
      {children}{" "}
      <ChevronDownIcon
        className="relative top-[1px] ml-1 size-3 transition duration-300 group-data-[state=open]:rotate-180"
        aria-hidden="true"
      />
    </NavigationMenuPrimitive.Trigger>
  );
}

function NavigationMenuContent({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Content>) {
  return (
    <NavigationMenuPrimitive.Content
      data-slot="navigation-menu-content"
      className={cn(
        "data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 top-0 left-0 w-full p-2 pr-2.5 md:absolute md:w-auto",
        "group-data-[viewport=false]/navigation-menu:bg-popover group-data-[viewport=false]/navigation-menu:text-popover-foreground group-data-[viewport=false]/navigation-menu:data-[state=open]:animate-in group-data-[viewport=false]/navigation-menu:data-[state=closed]:animate-out group-data-[viewport=false]/navigation-menu:data-[state=closed]:zoom-out-95 group-data-[viewport=false]/navigation-menu:data-[state=open]:zoom-in-95 group-data-[viewport=false]/navigation-menu:data-[state=open]:fade-in-0 group-data-[viewport=false]/navigation-menu:data-[state=closed]:fade-out-0 group-data-[viewport=false]/navigation-menu:top-full group-data-[viewport=false]/navigation-menu:mt-1.5 group-data-[viewport=false]/navigation-menu:overflow-hidden group-data-[viewport=false]/navigation-menu:rounded-md group-data-[viewport=false]/navigation-menu:border group-data-[viewport=false]/navigation-menu:shadow group-data-[viewport=false]/navigation-menu:duration-200 **:data-[slot=navigation-menu-link]:focus:ring-0 **:data-[slot=navigation-menu-link]:focus:outline-none",
        className,
      )}
      {...props}
    />
  );
}

function NavigationMenuViewport({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Viewport>) {
  return (
    <div
      className={cn(
        "absolute top-full left-0 isolate z-50 flex justify-center",
      )}
    >
      <NavigationMenuPrimitive.Viewport
        data-slot="navigation-menu-viewport"
        className={cn(
          "origin-top-center bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border shadow md:w-[var(--radix-navigation-menu-viewport-width)]",
          className,
        )}
        {...props}
      />
    </div>
  );
}

function NavigationMenuLink({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Link>) {
  return (
    <NavigationMenuPrimitive.Link
      data-slot="navigation-menu-link"
      className={cn(
        "data-[active=true]:focus:bg-accent data-[active=true]:hover:bg-accent data-[active=true]:bg-accent/50 data-[active=true]:text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus-visible:ring-ring/50 [&_svg:not([class*='text-'])]:text-muted-foreground flex flex-col gap-1 rounded-sm p-2 text-sm transition-all outline-none focus-visible:ring-[3px] focus-visible:outline-1 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function NavigationMenuIndicator({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Indicator>) {
  return (
    <NavigationMenuPrimitive.Indicator
      data-slot="navigation-menu-indicator"
      className={cn(
        "data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden",
        className,
      )}
      {...props}
    >
      <div className="bg-border relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm shadow-md" />
    </NavigationMenuPrimitive.Indicator>
  );
}

export {
  NavigationMenu,
  NavigationMenuList,
  NavigationMenuItem,
  NavigationMenuContent,
  NavigationMenuTrigger,
  NavigationMenuLink,
  NavigationMenuIndicator,
  NavigationMenuViewport,
  navigationMenuTriggerStyle,
};
</file>

<file path="src/components/ui/pagination.tsx">
import * as React from "react";
import {
  ChevronLeftIcon,
  ChevronRightIcon,
  MoreHorizontalIcon,
} from "lucide-react@0.487.0";

import { cn } from "./utils";
import { Button, buttonVariants } from "./button";

function Pagination({ className, ...props }: React.ComponentProps<"nav">) {
  return (
    <nav
      role="navigation"
      aria-label="pagination"
      data-slot="pagination"
      className={cn("mx-auto flex w-full justify-center", className)}
      {...props}
    />
  );
}

function PaginationContent({
  className,
  ...props
}: React.ComponentProps<"ul">) {
  return (
    <ul
      data-slot="pagination-content"
      className={cn("flex flex-row items-center gap-1", className)}
      {...props}
    />
  );
}

function PaginationItem({ ...props }: React.ComponentProps<"li">) {
  return <li data-slot="pagination-item" {...props} />;
}

type PaginationLinkProps = {
  isActive?: boolean;
} & Pick<React.ComponentProps<typeof Button>, "size"> &
  React.ComponentProps<"a">;

function PaginationLink({
  className,
  isActive,
  size = "icon",
  ...props
}: PaginationLinkProps) {
  return (
    <a
      aria-current={isActive ? "page" : undefined}
      data-slot="pagination-link"
      data-active={isActive}
      className={cn(
        buttonVariants({
          variant: isActive ? "outline" : "ghost",
          size,
        }),
        className,
      )}
      {...props}
    />
  );
}

function PaginationPrevious({
  className,
  ...props
}: React.ComponentProps<typeof PaginationLink>) {
  return (
    <PaginationLink
      aria-label="Go to previous page"
      size="default"
      className={cn("gap-1 px-2.5 sm:pl-2.5", className)}
      {...props}
    >
      <ChevronLeftIcon />
      <span className="hidden sm:block">Previous</span>
    </PaginationLink>
  );
}

function PaginationNext({
  className,
  ...props
}: React.ComponentProps<typeof PaginationLink>) {
  return (
    <PaginationLink
      aria-label="Go to next page"
      size="default"
      className={cn("gap-1 px-2.5 sm:pr-2.5", className)}
      {...props}
    >
      <span className="hidden sm:block">Next</span>
      <ChevronRightIcon />
    </PaginationLink>
  );
}

function PaginationEllipsis({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      aria-hidden
      data-slot="pagination-ellipsis"
      className={cn("flex size-9 items-center justify-center", className)}
      {...props}
    >
      <MoreHorizontalIcon className="size-4" />
      <span className="sr-only">More pages</span>
    </span>
  );
}

export {
  Pagination,
  PaginationContent,
  PaginationLink,
  PaginationItem,
  PaginationPrevious,
  PaginationNext,
  PaginationEllipsis,
};
</file>

<file path="src/components/ui/popover.tsx">
"use client";

import * as React from "react";
import * as PopoverPrimitive from "@radix-ui/react-popover@1.1.6";

import { cn } from "./utils";

function Popover({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Root>) {
  return <PopoverPrimitive.Root data-slot="popover" {...props} />;
}

function PopoverTrigger({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {
  return <PopoverPrimitive.Trigger data-slot="popover-trigger" {...props} />;
}

function PopoverContent({
  className,
  align = "center",
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Content>) {
  return (
    <PopoverPrimitive.Portal>
      <PopoverPrimitive.Content
        data-slot="popover-content"
        align={align}
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",
          className,
        )}
        {...props}
      />
    </PopoverPrimitive.Portal>
  );
}

function PopoverAnchor({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) {
  return <PopoverPrimitive.Anchor data-slot="popover-anchor" {...props} />;
}

export { Popover, PopoverTrigger, PopoverContent, PopoverAnchor };
</file>

<file path="src/components/ui/progress.tsx">
"use client";

import * as React from "react";
import * as ProgressPrimitive from "@radix-ui/react-progress@1.1.2";

import { cn } from "./utils";

function Progress({
  className,
  value,
  ...props
}: React.ComponentProps<typeof ProgressPrimitive.Root>) {
  return (
    <ProgressPrimitive.Root
      data-slot="progress"
      className={cn(
        "bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",
        className,
      )}
      {...props}
    >
      <ProgressPrimitive.Indicator
        data-slot="progress-indicator"
        className="bg-primary h-full w-full flex-1 transition-all"
        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}
      />
    </ProgressPrimitive.Root>
  );
}

export { Progress };
</file>

<file path="src/components/ui/radio-group.tsx">
"use client";

import * as React from "react";
import * as RadioGroupPrimitive from "@radix-ui/react-radio-group@1.2.3";
import { CircleIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function RadioGroup({
  className,
  ...props
}: React.ComponentProps<typeof RadioGroupPrimitive.Root>) {
  return (
    <RadioGroupPrimitive.Root
      data-slot="radio-group"
      className={cn("grid gap-3", className)}
      {...props}
    />
  );
}

function RadioGroupItem({
  className,
  ...props
}: React.ComponentProps<typeof RadioGroupPrimitive.Item>) {
  return (
    <RadioGroupPrimitive.Item
      data-slot="radio-group-item"
      className={cn(
        "border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
        className,
      )}
      {...props}
    >
      <RadioGroupPrimitive.Indicator
        data-slot="radio-group-indicator"
        className="relative flex items-center justify-center"
      >
        <CircleIcon className="fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2" />
      </RadioGroupPrimitive.Indicator>
    </RadioGroupPrimitive.Item>
  );
}

export { RadioGroup, RadioGroupItem };
</file>

<file path="src/components/ui/resizable.tsx">
"use client";

import * as React from "react";
import { GripVerticalIcon } from "lucide-react@0.487.0";
import * as ResizablePrimitive from "react-resizable-panels@2.1.7";

import { cn } from "./utils";

function ResizablePanelGroup({
  className,
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) {
  return (
    <ResizablePrimitive.PanelGroup
      data-slot="resizable-panel-group"
      className={cn(
        "flex h-full w-full data-[panel-group-direction=vertical]:flex-col",
        className,
      )}
      {...props}
    />
  );
}

function ResizablePanel({
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.Panel>) {
  return <ResizablePrimitive.Panel data-slot="resizable-panel" {...props} />;
}

function ResizableHandle({
  withHandle,
  className,
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {
  withHandle?: boolean;
}) {
  return (
    <ResizablePrimitive.PanelResizeHandle
      data-slot="resizable-handle"
      className={cn(
        "bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",
        className,
      )}
      {...props}
    >
      {withHandle && (
        <div className="bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border">
          <GripVerticalIcon className="size-2.5" />
        </div>
      )}
    </ResizablePrimitive.PanelResizeHandle>
  );
}

export { ResizablePanelGroup, ResizablePanel, ResizableHandle };
</file>

<file path="src/components/ui/scroll-area.tsx">
"use client";

import * as React from "react";
import * as ScrollAreaPrimitive from "@radix-ui/react-scroll-area@1.2.3";

import { cn } from "./utils";

function ScrollArea({
  className,
  children,
  ...props
}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {
  return (
    <ScrollAreaPrimitive.Root
      data-slot="scroll-area"
      className={cn("relative", className)}
      {...props}
    >
      <ScrollAreaPrimitive.Viewport
        data-slot="scroll-area-viewport"
        className="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1"
      >
        {children}
      </ScrollAreaPrimitive.Viewport>
      <ScrollBar />
      <ScrollAreaPrimitive.Corner />
    </ScrollAreaPrimitive.Root>
  );
}

function ScrollBar({
  className,
  orientation = "vertical",
  ...props
}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {
  return (
    <ScrollAreaPrimitive.ScrollAreaScrollbar
      data-slot="scroll-area-scrollbar"
      orientation={orientation}
      className={cn(
        "flex touch-none p-px transition-colors select-none",
        orientation === "vertical" &&
          "h-full w-2.5 border-l border-l-transparent",
        orientation === "horizontal" &&
          "h-2.5 flex-col border-t border-t-transparent",
        className,
      )}
      {...props}
    >
      <ScrollAreaPrimitive.ScrollAreaThumb
        data-slot="scroll-area-thumb"
        className="bg-border relative flex-1 rounded-full"
      />
    </ScrollAreaPrimitive.ScrollAreaScrollbar>
  );
}

export { ScrollArea, ScrollBar };
</file>

<file path="src/components/ui/select.tsx">
"use client";

import * as React from "react";
import * as SelectPrimitive from "@radix-ui/react-select@2.1.6";
import {
  CheckIcon,
  ChevronDownIcon,
  ChevronUpIcon,
} from "lucide-react@0.487.0";

import { cn } from "./utils";

function Select({
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Root>) {
  return <SelectPrimitive.Root data-slot="select" {...props} />;
}

function SelectGroup({
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Group>) {
  return <SelectPrimitive.Group data-slot="select-group" {...props} />;
}

function SelectValue({
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Value>) {
  return <SelectPrimitive.Value data-slot="select-value" {...props} />;
}

function SelectTrigger({
  className,
  size = "default",
  children,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {
  size?: "sm" | "default";
}) {
  return (
    <SelectPrimitive.Trigger
      data-slot="select-trigger"
      data-size={size}
      className={cn(
        "border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      {children}
      <SelectPrimitive.Icon asChild>
        <ChevronDownIcon className="size-4 opacity-50" />
      </SelectPrimitive.Icon>
    </SelectPrimitive.Trigger>
  );
}

function SelectContent({
  className,
  children,
  position = "popper",
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Content>) {
  return (
    <SelectPrimitive.Portal>
      <SelectPrimitive.Content
        data-slot="select-content"
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",
          position === "popper" &&
            "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
          className,
        )}
        position={position}
        {...props}
      >
        <SelectScrollUpButton />
        <SelectPrimitive.Viewport
          className={cn(
            "p-1",
            position === "popper" &&
              "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1",
          )}
        >
          {children}
        </SelectPrimitive.Viewport>
        <SelectScrollDownButton />
      </SelectPrimitive.Content>
    </SelectPrimitive.Portal>
  );
}

function SelectLabel({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Label>) {
  return (
    <SelectPrimitive.Label
      data-slot="select-label"
      className={cn("text-muted-foreground px-2 py-1.5 text-xs", className)}
      {...props}
    />
  );
}

function SelectItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Item>) {
  return (
    <SelectPrimitive.Item
      data-slot="select-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",
        className,
      )}
      {...props}
    >
      <span className="absolute right-2 flex size-3.5 items-center justify-center">
        <SelectPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </SelectPrimitive.ItemIndicator>
      </span>
      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
    </SelectPrimitive.Item>
  );
}

function SelectSeparator({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Separator>) {
  return (
    <SelectPrimitive.Separator
      data-slot="select-separator"
      className={cn("bg-border pointer-events-none -mx-1 my-1 h-px", className)}
      {...props}
    />
  );
}

function SelectScrollUpButton({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {
  return (
    <SelectPrimitive.ScrollUpButton
      data-slot="select-scroll-up-button"
      className={cn(
        "flex cursor-default items-center justify-center py-1",
        className,
      )}
      {...props}
    >
      <ChevronUpIcon className="size-4" />
    </SelectPrimitive.ScrollUpButton>
  );
}

function SelectScrollDownButton({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {
  return (
    <SelectPrimitive.ScrollDownButton
      data-slot="select-scroll-down-button"
      className={cn(
        "flex cursor-default items-center justify-center py-1",
        className,
      )}
      {...props}
    >
      <ChevronDownIcon className="size-4" />
    </SelectPrimitive.ScrollDownButton>
  );
}

export {
  Select,
  SelectContent,
  SelectGroup,
  SelectItem,
  SelectLabel,
  SelectScrollDownButton,
  SelectScrollUpButton,
  SelectSeparator,
  SelectTrigger,
  SelectValue,
};
</file>

<file path="src/components/ui/separator.tsx">
"use client";

import * as React from "react";
import * as SeparatorPrimitive from "@radix-ui/react-separator@1.1.2";

import { cn } from "./utils";

function Separator({
  className,
  orientation = "horizontal",
  decorative = true,
  ...props
}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {
  return (
    <SeparatorPrimitive.Root
      data-slot="separator-root"
      decorative={decorative}
      orientation={orientation}
      className={cn(
        "bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",
        className,
      )}
      {...props}
    />
  );
}

export { Separator };
</file>

<file path="src/components/ui/sheet.tsx">
"use client";

import * as React from "react";
import * as SheetPrimitive from "@radix-ui/react-dialog@1.1.6";
import { XIcon } from "lucide-react@0.487.0";

import { cn } from "./utils";

function Sheet({ ...props }: React.ComponentProps<typeof SheetPrimitive.Root>) {
  return <SheetPrimitive.Root data-slot="sheet" {...props} />;
}

function SheetTrigger({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Trigger>) {
  return <SheetPrimitive.Trigger data-slot="sheet-trigger" {...props} />;
}

function SheetClose({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Close>) {
  return <SheetPrimitive.Close data-slot="sheet-close" {...props} />;
}

function SheetPortal({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Portal>) {
  return <SheetPrimitive.Portal data-slot="sheet-portal" {...props} />;
}

function SheetOverlay({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Overlay>) {
  return (
    <SheetPrimitive.Overlay
      data-slot="sheet-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className,
      )}
      {...props}
    />
  );
}

function SheetContent({
  className,
  children,
  side = "right",
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Content> & {
  side?: "top" | "right" | "bottom" | "left";
}) {
  return (
    <SheetPortal>
      <SheetOverlay />
      <SheetPrimitive.Content
        data-slot="sheet-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",
          side === "right" &&
            "data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",
          side === "left" &&
            "data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",
          side === "top" &&
            "data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",
          side === "bottom" &&
            "data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",
          className,
        )}
        {...props}
      >
        {children}
        <SheetPrimitive.Close className="ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none">
          <XIcon className="size-4" />
          <span className="sr-only">Close</span>
        </SheetPrimitive.Close>
      </SheetPrimitive.Content>
    </SheetPortal>
  );
}

function SheetHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sheet-header"
      className={cn("flex flex-col gap-1.5 p-4", className)}
      {...props}
    />
  );
}

function SheetFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sheet-footer"
      className={cn("mt-auto flex flex-col gap-2 p-4", className)}
      {...props}
    />
  );
}

function SheetTitle({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Title>) {
  return (
    <SheetPrimitive.Title
      data-slot="sheet-title"
      className={cn("text-foreground font-semibold", className)}
      {...props}
    />
  );
}

function SheetDescription({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Description>) {
  return (
    <SheetPrimitive.Description
      data-slot="sheet-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  );
}

export {
  Sheet,
  SheetTrigger,
  SheetClose,
  SheetContent,
  SheetHeader,
  SheetFooter,
  SheetTitle,
  SheetDescription,
};
</file>

<file path="src/components/ui/sidebar.tsx">
"use client";

import * as React from "react";
import { Slot } from "@radix-ui/react-slot@1.1.2";
import { VariantProps, cva } from "class-variance-authority@0.7.1";
import { PanelLeftIcon } from "lucide-react@0.487.0";

import { useIsMobile } from "./use-mobile";
import { cn } from "./utils";
import { Button } from "./button";
import { Input } from "./input";
import { Separator } from "./separator";
import {
  Sheet,
  SheetContent,
  SheetDescription,
  SheetHeader,
  SheetTitle,
} from "./sheet";
import { Skeleton } from "./skeleton";
import {
  Tooltip,
  TooltipContent,
  TooltipProvider,
  TooltipTrigger,
} from "./tooltip";

const SIDEBAR_COOKIE_NAME = "sidebar_state";
const SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7;
const SIDEBAR_WIDTH = "16rem";
const SIDEBAR_WIDTH_MOBILE = "18rem";
const SIDEBAR_WIDTH_ICON = "3rem";
const SIDEBAR_KEYBOARD_SHORTCUT = "b";

type SidebarContextProps = {
  state: "expanded" | "collapsed";
  open: boolean;
  setOpen: (open: boolean) => void;
  openMobile: boolean;
  setOpenMobile: (open: boolean) => void;
  isMobile: boolean;
  toggleSidebar: () => void;
};

const SidebarContext = React.createContext<SidebarContextProps | null>(null);

function useSidebar() {
  const context = React.useContext(SidebarContext);
  if (!context) {
    throw new Error("useSidebar must be used within a SidebarProvider.");
  }

  return context;
}

function SidebarProvider({
  defaultOpen = true,
  open: openProp,
  onOpenChange: setOpenProp,
  className,
  style,
  children,
  ...props
}: React.ComponentProps<"div"> & {
  defaultOpen?: boolean;
  open?: boolean;
  onOpenChange?: (open: boolean) => void;
}) {
  const isMobile = useIsMobile();
  const [openMobile, setOpenMobile] = React.useState(false);

  // This is the internal state of the sidebar.
  // We use openProp and setOpenProp for control from outside the component.
  const [_open, _setOpen] = React.useState(defaultOpen);
  const open = openProp ?? _open;
  const setOpen = React.useCallback(
    (value: boolean | ((value: boolean) => boolean)) => {
      const openState = typeof value === "function" ? value(open) : value;
      if (setOpenProp) {
        setOpenProp(openState);
      } else {
        _setOpen(openState);
      }

      // This sets the cookie to keep the sidebar state.
      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`;
    },
    [setOpenProp, open],
  );

  // Helper to toggle the sidebar.
  const toggleSidebar = React.useCallback(() => {
    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open);
  }, [isMobile, setOpen, setOpenMobile]);

  // Adds a keyboard shortcut to toggle the sidebar.
  React.useEffect(() => {
    const handleKeyDown = (event: KeyboardEvent) => {
      if (
        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&
        (event.metaKey || event.ctrlKey)
      ) {
        event.preventDefault();
        toggleSidebar();
      }
    };

    window.addEventListener("keydown", handleKeyDown);
    return () => window.removeEventListener("keydown", handleKeyDown);
  }, [toggleSidebar]);

  // We add a state so that we can do data-state="expanded" or "collapsed".
  // This makes it easier to style the sidebar with Tailwind classes.
  const state = open ? "expanded" : "collapsed";

  const contextValue = React.useMemo<SidebarContextProps>(
    () => ({
      state,
      open,
      setOpen,
      isMobile,
      openMobile,
      setOpenMobile,
      toggleSidebar,
    }),
    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar],
  );

  return (
    <SidebarContext.Provider value={contextValue}>
      <TooltipProvider delayDuration={0}>
        <div
          data-slot="sidebar-wrapper"
          style={
            {
              "--sidebar-width": SIDEBAR_WIDTH,
              "--sidebar-width-icon": SIDEBAR_WIDTH_ICON,
              ...style,
            } as React.CSSProperties
          }
          className={cn(
            "group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",
            className,
          )}
          {...props}
        >
          {children}
        </div>
      </TooltipProvider>
    </SidebarContext.Provider>
  );
}

function Sidebar({
  side = "left",
  variant = "sidebar",
  collapsible = "offcanvas",
  className,
  children,
  ...props
}: React.ComponentProps<"div"> & {
  side?: "left" | "right";
  variant?: "sidebar" | "floating" | "inset";
  collapsible?: "offcanvas" | "icon" | "none";
}) {
  const { isMobile, state, openMobile, setOpenMobile } = useSidebar();

  if (collapsible === "none") {
    return (
      <div
        data-slot="sidebar"
        className={cn(
          "bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",
          className,
        )}
        {...props}
      >
        {children}
      </div>
    );
  }

  if (isMobile) {
    return (
      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>
        <SheetContent
          data-sidebar="sidebar"
          data-slot="sidebar"
          data-mobile="true"
          className="bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden"
          style={
            {
              "--sidebar-width": SIDEBAR_WIDTH_MOBILE,
            } as React.CSSProperties
          }
          side={side}
        >
          <SheetHeader className="sr-only">
            <SheetTitle>Sidebar</SheetTitle>
            <SheetDescription>Displays the mobile sidebar.</SheetDescription>
          </SheetHeader>
          <div className="flex h-full w-full flex-col">{children}</div>
        </SheetContent>
      </Sheet>
    );
  }

  return (
    <div
      className="group peer text-sidebar-foreground hidden md:block"
      data-state={state}
      data-collapsible={state === "collapsed" ? collapsible : ""}
      data-variant={variant}
      data-side={side}
      data-slot="sidebar"
    >
      {/* This is what handles the sidebar gap on desktop */}
      <div
        data-slot="sidebar-gap"
        className={cn(
          "relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear",
          "group-data-[collapsible=offcanvas]:w-0",
          "group-data-[side=right]:rotate-180",
          variant === "floating" || variant === "inset"
            ? "group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]"
            : "group-data-[collapsible=icon]:w-(--sidebar-width-icon)",
        )}
      />
      <div
        data-slot="sidebar-container"
        className={cn(
          "fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",
          side === "left"
            ? "left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]"
            : "right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",
          // Adjust the padding for floating and inset variants.
          variant === "floating" || variant === "inset"
            ? "p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]"
            : "group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",
          className,
        )}
        {...props}
      >
        <div
          data-sidebar="sidebar"
          data-slot="sidebar-inner"
          className="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"
        >
          {children}
        </div>
      </div>
    </div>
  );
}

function SidebarTrigger({
  className,
  onClick,
  ...props
}: React.ComponentProps<typeof Button>) {
  const { toggleSidebar } = useSidebar();

  return (
    <Button
      data-sidebar="trigger"
      data-slot="sidebar-trigger"
      variant="ghost"
      size="icon"
      className={cn("size-7", className)}
      onClick={(event) => {
        onClick?.(event);
        toggleSidebar();
      }}
      {...props}
    >
      <PanelLeftIcon />
      <span className="sr-only">Toggle Sidebar</span>
    </Button>
  );
}

function SidebarRail({ className, ...props }: React.ComponentProps<"button">) {
  const { toggleSidebar } = useSidebar();

  return (
    <button
      data-sidebar="rail"
      data-slot="sidebar-rail"
      aria-label="Toggle Sidebar"
      tabIndex={-1}
      onClick={toggleSidebar}
      title="Toggle Sidebar"
      className={cn(
        "hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex",
        "in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize",
        "[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize",
        "hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full",
        "[[data-side=left][data-collapsible=offcanvas]_&]:-right-2",
        "[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",
        className,
      )}
      {...props}
    />
  );
}

function SidebarInset({ className, ...props }: React.ComponentProps<"main">) {
  return (
    <main
      data-slot="sidebar-inset"
      className={cn(
        "bg-background relative flex w-full flex-1 flex-col",
        "md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",
        className,
      )}
      {...props}
    />
  );
}

function SidebarInput({
  className,
  ...props
}: React.ComponentProps<typeof Input>) {
  return (
    <Input
      data-slot="sidebar-input"
      data-sidebar="input"
      className={cn("bg-background h-8 w-full shadow-none", className)}
      {...props}
    />
  );
}

function SidebarHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-header"
      data-sidebar="header"
      className={cn("flex flex-col gap-2 p-2", className)}
      {...props}
    />
  );
}

function SidebarFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-footer"
      data-sidebar="footer"
      className={cn("flex flex-col gap-2 p-2", className)}
      {...props}
    />
  );
}

function SidebarSeparator({
  className,
  ...props
}: React.ComponentProps<typeof Separator>) {
  return (
    <Separator
      data-slot="sidebar-separator"
      data-sidebar="separator"
      className={cn("bg-sidebar-border mx-2 w-auto", className)}
      {...props}
    />
  );
}

function SidebarContent({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-content"
      data-sidebar="content"
      className={cn(
        "flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",
        className,
      )}
      {...props}
    />
  );
}

function SidebarGroup({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-group"
      data-sidebar="group"
      className={cn("relative flex w-full min-w-0 flex-col p-2", className)}
      {...props}
    />
  );
}

function SidebarGroupLabel({
  className,
  asChild = false,
  ...props
}: React.ComponentProps<"div"> & { asChild?: boolean }) {
  const Comp = asChild ? Slot : "div";

  return (
    <Comp
      data-slot="sidebar-group-label"
      data-sidebar="group-label"
      className={cn(
        "text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        "group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",
        className,
      )}
      {...props}
    />
  );
}

function SidebarGroupAction({
  className,
  asChild = false,
  ...props
}: React.ComponentProps<"button"> & { asChild?: boolean }) {
  const Comp = asChild ? Slot : "button";

  return (
    <Comp
      data-slot="sidebar-group-action"
      data-sidebar="group-action"
      className={cn(
        "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        // Increases the hit area of the button on mobile.
        "after:absolute after:-inset-2 md:after:hidden",
        "group-data-[collapsible=icon]:hidden",
        className,
      )}
      {...props}
    />
  );
}

function SidebarGroupContent({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-group-content"
      data-sidebar="group-content"
      className={cn("w-full text-sm", className)}
      {...props}
    />
  );
}

function SidebarMenu({ className, ...props }: React.ComponentProps<"ul">) {
  return (
    <ul
      data-slot="sidebar-menu"
      data-sidebar="menu"
      className={cn("flex w-full min-w-0 flex-col gap-1", className)}
      {...props}
    />
  );
}

function SidebarMenuItem({ className, ...props }: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="sidebar-menu-item"
      data-sidebar="menu-item"
      className={cn("group/menu-item relative", className)}
      {...props}
    />
  );
}

const sidebarMenuButtonVariants = cva(
  "peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",
  {
    variants: {
      variant: {
        default: "hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",
        outline:
          "bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]",
      },
      size: {
        default: "h-8 text-sm",
        sm: "h-7 text-xs",
        lg: "h-12 text-sm group-data-[collapsible=icon]:p-0!",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  },
);

function SidebarMenuButton({
  asChild = false,
  isActive = false,
  variant = "default",
  size = "default",
  tooltip,
  className,
  ...props
}: React.ComponentProps<"button"> & {
  asChild?: boolean;
  isActive?: boolean;
  tooltip?: string | React.ComponentProps<typeof TooltipContent>;
} & VariantProps<typeof sidebarMenuButtonVariants>) {
  const Comp = asChild ? Slot : "button";
  const { isMobile, state } = useSidebar();

  const button = (
    <Comp
      data-slot="sidebar-menu-button"
      data-sidebar="menu-button"
      data-size={size}
      data-active={isActive}
      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}
      {...props}
    />
  );

  if (!tooltip) {
    return button;
  }

  if (typeof tooltip === "string") {
    tooltip = {
      children: tooltip,
    };
  }

  return (
    <Tooltip>
      <TooltipTrigger asChild>{button}</TooltipTrigger>
      <TooltipContent
        side="right"
        align="center"
        hidden={state !== "collapsed" || isMobile}
        {...tooltip}
      />
    </Tooltip>
  );
}

function SidebarMenuAction({
  className,
  asChild = false,
  showOnHover = false,
  ...props
}: React.ComponentProps<"button"> & {
  asChild?: boolean;
  showOnHover?: boolean;
}) {
  const Comp = asChild ? Slot : "button";

  return (
    <Comp
      data-slot="sidebar-menu-action"
      data-sidebar="menu-action"
      className={cn(
        "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        // Increases the hit area of the button on mobile.
        "after:absolute after:-inset-2 md:after:hidden",
        "peer-data-[size=sm]/menu-button:top-1",
        "peer-data-[size=default]/menu-button:top-1.5",
        "peer-data-[size=lg]/menu-button:top-2.5",
        "group-data-[collapsible=icon]:hidden",
        showOnHover &&
          "peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0",
        className,
      )}
      {...props}
    />
  );
}

function SidebarMenuBadge({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-menu-badge"
      data-sidebar="menu-badge"
      className={cn(
        "text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none",
        "peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground",
        "peer-data-[size=sm]/menu-button:top-1",
        "peer-data-[size=default]/menu-button:top-1.5",
        "peer-data-[size=lg]/menu-button:top-2.5",
        "group-data-[collapsible=icon]:hidden",
        className,
      )}
      {...props}
    />
  );
}

function SidebarMenuSkeleton({
  className,
  showIcon = false,
  ...props
}: React.ComponentProps<"div"> & {
  showIcon?: boolean;
}) {
  // Random width between 50 to 90%.
  const width = React.useMemo(() => {
    return `${Math.floor(Math.random() * 40) + 50}%`;
  }, []);

  return (
    <div
      data-slot="sidebar-menu-skeleton"
      data-sidebar="menu-skeleton"
      className={cn("flex h-8 items-center gap-2 rounded-md px-2", className)}
      {...props}
    >
      {showIcon && (
        <Skeleton
          className="size-4 rounded-md"
          data-sidebar="menu-skeleton-icon"
        />
      )}
      <Skeleton
        className="h-4 max-w-(--skeleton-width) flex-1"
        data-sidebar="menu-skeleton-text"
        style={
          {
            "--skeleton-width": width,
          } as React.CSSProperties
        }
      />
    </div>
  );
}

function SidebarMenuSub({ className, ...props }: React.ComponentProps<"ul">) {
  return (
    <ul
      data-slot="sidebar-menu-sub"
      data-sidebar="menu-sub"
      className={cn(
        "border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5",
        "group-data-[collapsible=icon]:hidden",
        className,
      )}
      {...props}
    />
  );
}

function SidebarMenuSubItem({
  className,
  ...props
}: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="sidebar-menu-sub-item"
      data-sidebar="menu-sub-item"
      className={cn("group/menu-sub-item relative", className)}
      {...props}
    />
  );
}

function SidebarMenuSubButton({
  asChild = false,
  size = "md",
  isActive = false,
  className,
  ...props
}: React.ComponentProps<"a"> & {
  asChild?: boolean;
  size?: "sm" | "md";
  isActive?: boolean;
}) {
  const Comp = asChild ? Slot : "a";

  return (
    <Comp
      data-slot="sidebar-menu-sub-button"
      data-sidebar="menu-sub-button"
      data-size={size}
      data-active={isActive}
      className={cn(
        "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",
        "data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",
        size === "sm" && "text-xs",
        size === "md" && "text-sm",
        "group-data-[collapsible=icon]:hidden",
        className,
      )}
      {...props}
    />
  );
}

export {
  Sidebar,
  SidebarContent,
  SidebarFooter,
  SidebarGroup,
  SidebarGroupAction,
  SidebarGroupContent,
  SidebarGroupLabel,
  SidebarHeader,
  SidebarInput,
  SidebarInset,
  SidebarMenu,
  SidebarMenuAction,
  SidebarMenuBadge,
  SidebarMenuButton,
  SidebarMenuItem,
  SidebarMenuSkeleton,
  SidebarMenuSub,
  SidebarMenuSubButton,
  SidebarMenuSubItem,
  SidebarProvider,
  SidebarRail,
  SidebarSeparator,
  SidebarTrigger,
  useSidebar,
};
</file>

<file path="src/components/ui/skeleton.tsx">
import { cn } from "./utils";

function Skeleton({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="skeleton"
      className={cn("bg-accent animate-pulse rounded-md", className)}
      {...props}
    />
  );
}

export { Skeleton };
</file>

<file path="src/components/ui/slider.tsx">
"use client";

import * as React from "react";
import * as SliderPrimitive from "@radix-ui/react-slider@1.2.3";

import { cn } from "./utils";

function Slider({
  className,
  defaultValue,
  value,
  min = 0,
  max = 100,
  ...props
}: React.ComponentProps<typeof SliderPrimitive.Root>) {
  const _values = React.useMemo(
    () =>
      Array.isArray(value)
        ? value
        : Array.isArray(defaultValue)
          ? defaultValue
          : [min, max],
    [value, defaultValue, min, max],
  );

  return (
    <SliderPrimitive.Root
      data-slot="slider"
      defaultValue={defaultValue}
      value={value}
      min={min}
      max={max}
      className={cn(
        "relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",
        className,
      )}
      {...props}
    >
      <SliderPrimitive.Track
        data-slot="slider-track"
        className={cn(
          "bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5",
        )}
      >
        <SliderPrimitive.Range
          data-slot="slider-range"
          className={cn(
            "bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full",
          )}
        />
      </SliderPrimitive.Track>
      {Array.from({ length: _values.length }, (_, index) => (
        <SliderPrimitive.Thumb
          data-slot="slider-thumb"
          key={index}
          className="border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"
        />
      ))}
    </SliderPrimitive.Root>
  );
}

export { Slider };
</file>

<file path="src/components/ui/sonner.tsx">
"use client";

import { useTheme } from "next-themes@0.4.6";
import { Toaster as Sonner, ToasterProps } from "sonner@2.0.3";

const Toaster = ({ ...props }: ToasterProps) => {
  const { theme = "system" } = useTheme();

  return (
    <Sonner
      theme={theme as ToasterProps["theme"]}
      className="toaster group"
      style={
        {
          "--normal-bg": "var(--popover)",
          "--normal-text": "var(--popover-foreground)",
          "--normal-border": "var(--border)",
        } as React.CSSProperties
      }
      {...props}
    />
  );
};

export { Toaster };
</file>

<file path="src/components/ui/switch.tsx">
"use client";

import * as React from "react";
import * as SwitchPrimitive from "@radix-ui/react-switch@1.1.3";

import { cn } from "./utils";

function Switch({
  className,
  ...props
}: React.ComponentProps<typeof SwitchPrimitive.Root>) {
  return (
    <SwitchPrimitive.Root
      data-slot="switch"
      className={cn(
        "peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
        className,
      )}
      {...props}
    >
      <SwitchPrimitive.Thumb
        data-slot="switch-thumb"
        className={cn(
          "bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0",
        )}
      />
    </SwitchPrimitive.Root>
  );
}

export { Switch };
</file>

<file path="src/components/ui/table.tsx">
"use client";

import * as React from "react";

import { cn } from "./utils";

function Table({ className, ...props }: React.ComponentProps<"table">) {
  return (
    <div
      data-slot="table-container"
      className="relative w-full overflow-x-auto"
    >
      <table
        data-slot="table"
        className={cn("w-full caption-bottom text-sm", className)}
        {...props}
      />
    </div>
  );
}

function TableHeader({ className, ...props }: React.ComponentProps<"thead">) {
  return (
    <thead
      data-slot="table-header"
      className={cn("[&_tr]:border-b", className)}
      {...props}
    />
  );
}

function TableBody({ className, ...props }: React.ComponentProps<"tbody">) {
  return (
    <tbody
      data-slot="table-body"
      className={cn("[&_tr:last-child]:border-0", className)}
      {...props}
    />
  );
}

function TableFooter({ className, ...props }: React.ComponentProps<"tfoot">) {
  return (
    <tfoot
      data-slot="table-footer"
      className={cn(
        "bg-muted/50 border-t font-medium [&>tr]:last:border-b-0",
        className,
      )}
      {...props}
    />
  );
}

function TableRow({ className, ...props }: React.ComponentProps<"tr">) {
  return (
    <tr
      data-slot="table-row"
      className={cn(
        "hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",
        className,
      )}
      {...props}
    />
  );
}

function TableHead({ className, ...props }: React.ComponentProps<"th">) {
  return (
    <th
      data-slot="table-head"
      className={cn(
        "text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
        className,
      )}
      {...props}
    />
  );
}

function TableCell({ className, ...props }: React.ComponentProps<"td">) {
  return (
    <td
      data-slot="table-cell"
      className={cn(
        "p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
        className,
      )}
      {...props}
    />
  );
}

function TableCaption({
  className,
  ...props
}: React.ComponentProps<"caption">) {
  return (
    <caption
      data-slot="table-caption"
      className={cn("text-muted-foreground mt-4 text-sm", className)}
      {...props}
    />
  );
}

export {
  Table,
  TableHeader,
  TableBody,
  TableFooter,
  TableHead,
  TableRow,
  TableCell,
  TableCaption,
};
</file>

<file path="src/components/ui/tabs.tsx">
"use client";

import * as React from "react";
import * as TabsPrimitive from "@radix-ui/react-tabs@1.1.3";

import { cn } from "./utils";

function Tabs({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Root>) {
  return (
    <TabsPrimitive.Root
      data-slot="tabs"
      className={cn("flex flex-col gap-2", className)}
      {...props}
    />
  );
}

function TabsList({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.List>) {
  return (
    <TabsPrimitive.List
      data-slot="tabs-list"
      className={cn(
        "bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",
        className,
      )}
      {...props}
    />
  );
}

function TabsTrigger({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {
  return (
    <TabsPrimitive.Trigger
      data-slot="tabs-trigger"
      className={cn(
        "data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  );
}

function TabsContent({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Content>) {
  return (
    <TabsPrimitive.Content
      data-slot="tabs-content"
      className={cn("flex-1 outline-none", className)}
      {...props}
    />
  );
}

export { Tabs, TabsList, TabsTrigger, TabsContent };
</file>

<file path="src/components/ui/textarea.tsx">
import * as React from "react";

import { cn } from "./utils";

function Textarea({ className, ...props }: React.ComponentProps<"textarea">) {
  return (
    <textarea
      data-slot="textarea"
      className={cn(
        "resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        className,
      )}
      {...props}
    />
  );
}

export { Textarea };
</file>

<file path="src/components/ui/toggle-group.tsx">
"use client";

import * as React from "react";
import * as ToggleGroupPrimitive from "@radix-ui/react-toggle-group@1.1.2";
import { type VariantProps } from "class-variance-authority@0.7.1";

import { cn } from "./utils";
import { toggleVariants } from "./toggle";

const ToggleGroupContext = React.createContext<
  VariantProps<typeof toggleVariants>
>({
  size: "default",
  variant: "default",
});

function ToggleGroup({
  className,
  variant,
  size,
  children,
  ...props
}: React.ComponentProps<typeof ToggleGroupPrimitive.Root> &
  VariantProps<typeof toggleVariants>) {
  return (
    <ToggleGroupPrimitive.Root
      data-slot="toggle-group"
      data-variant={variant}
      data-size={size}
      className={cn(
        "group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs",
        className,
      )}
      {...props}
    >
      <ToggleGroupContext.Provider value={{ variant, size }}>
        {children}
      </ToggleGroupContext.Provider>
    </ToggleGroupPrimitive.Root>
  );
}

function ToggleGroupItem({
  className,
  children,
  variant,
  size,
  ...props
}: React.ComponentProps<typeof ToggleGroupPrimitive.Item> &
  VariantProps<typeof toggleVariants>) {
  const context = React.useContext(ToggleGroupContext);

  return (
    <ToggleGroupPrimitive.Item
      data-slot="toggle-group-item"
      data-variant={context.variant || variant}
      data-size={context.size || size}
      className={cn(
        toggleVariants({
          variant: context.variant || variant,
          size: context.size || size,
        }),
        "min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",
        className,
      )}
      {...props}
    >
      {children}
    </ToggleGroupPrimitive.Item>
  );
}

export { ToggleGroup, ToggleGroupItem };
</file>

<file path="src/components/ui/toggle.tsx">
"use client";

import * as React from "react";
import * as TogglePrimitive from "@radix-ui/react-toggle@1.1.2";
import { cva, type VariantProps } from "class-variance-authority@0.7.1";

import { cn } from "./utils";

const toggleVariants = cva(
  "inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",
  {
    variants: {
      variant: {
        default: "bg-transparent",
        outline:
          "border border-input bg-transparent hover:bg-accent hover:text-accent-foreground",
      },
      size: {
        default: "h-9 px-2 min-w-9",
        sm: "h-8 px-1.5 min-w-8",
        lg: "h-10 px-2.5 min-w-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  },
);

function Toggle({
  className,
  variant,
  size,
  ...props
}: React.ComponentProps<typeof TogglePrimitive.Root> &
  VariantProps<typeof toggleVariants>) {
  return (
    <TogglePrimitive.Root
      data-slot="toggle"
      className={cn(toggleVariants({ variant, size, className }))}
      {...props}
    />
  );
}

export { Toggle, toggleVariants };
</file>

<file path="src/components/ui/tooltip.tsx">
"use client";

import * as React from "react";
import * as TooltipPrimitive from "@radix-ui/react-tooltip@1.1.8";

import { cn } from "./utils";

function TooltipProvider({
  delayDuration = 0,
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Provider>) {
  return (
    <TooltipPrimitive.Provider
      data-slot="tooltip-provider"
      delayDuration={delayDuration}
      {...props}
    />
  );
}

function Tooltip({
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Root>) {
  return (
    <TooltipProvider>
      <TooltipPrimitive.Root data-slot="tooltip" {...props} />
    </TooltipProvider>
  );
}

function TooltipTrigger({
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {
  return <TooltipPrimitive.Trigger data-slot="tooltip-trigger" {...props} />;
}

function TooltipContent({
  className,
  sideOffset = 0,
  children,
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Content>) {
  return (
    <TooltipPrimitive.Portal>
      <TooltipPrimitive.Content
        data-slot="tooltip-content"
        sideOffset={sideOffset}
        className={cn(
          "bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",
          className,
        )}
        {...props}
      >
        {children}
        <TooltipPrimitive.Arrow className="bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]" />
      </TooltipPrimitive.Content>
    </TooltipPrimitive.Portal>
  );
}

export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider };
</file>

<file path="src/components/ui/use-mobile.ts">
import * as React from "react";

const MOBILE_BREAKPOINT = 768;

export function useIsMobile() {
  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(
    undefined,
  );

  React.useEffect(() => {
    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`);
    const onChange = () => {
      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);
    };
    mql.addEventListener("change", onChange);
    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);
    return () => mql.removeEventListener("change", onChange);
  }, []);

  return !!isMobile;
}
</file>

<file path="src/components/ui/utils.ts">
import { clsx, type ClassValue } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
</file>

<file path="src/components/VaultInput.tsx">
import React, { useState } from 'react';
import { Eye, EyeOff, Copy, Lock } from 'lucide-react';

interface VaultInputProps {
  label: string;
  value: string;
  onChange: (value: string) => void;
  placeholder?: string;
}

export function VaultInput({ label, value, onChange, placeholder }: VaultInputProps) {
  const [isVisible, setIsVisible] = useState(false);
  const [copied, setCopied] = useState(false);

  const handleCopy = () => {
    navigator.clipboard.writeText(value);
    setCopied(true);
    setTimeout(() => setCopied(false), 2000);
  };

  return (
    <div className="mb-4">
      <label className="block text-sm mb-2 text-[#0D1B2A]">{label}</label>
      <div className="relative">
        <div className="absolute left-3 top-1/2 -translate-y-1/2 text-[#2EC4B6]">
          <Lock size={18} />
        </div>
        <input
          type={isVisible ? 'text' : 'password'}
          value={value}
          onChange={(e) => onChange(e.target.value)}
          placeholder={placeholder}
          className="w-full pl-10 pr-20 py-3 border-2 border-[#2EC4B6]/30 rounded-lg focus:outline-none focus:border-[#2EC4B6] bg-white"
        />
        <div className="absolute right-3 top-1/2 -translate-y-1/2 flex gap-2">
          <button
            type="button"
            onClick={() => setIsVisible(!isVisible)}
            className="text-gray-500 hover:text-[#0D1B2A] transition-colors"
          >
            {isVisible ? <EyeOff size={18} /> : <Eye size={18} />}
          </button>
          <button
            type="button"
            onClick={handleCopy}
            className="text-gray-500 hover:text-[#2EC4B6] transition-colors"
          >
            <Copy size={18} />
          </button>
        </div>
      </div>
      {copied && (
        <p className="text-xs text-[#2ECC71] mt-1">Copied to clipboard!</p>
      )}
    </div>
  );
}
</file>

<file path="src/guidelines/Guidelines.md">
**Add your own guidelines here**
<!--

System Guidelines

Use this file to provide the AI with rules and guidelines you want it to follow.
This template outlines a few examples of things you can add. You can add your own sections and format it to suit your needs

TIP: More context isn't always better. It can confuse the LLM. Try and add the most important rules you need

# General guidelines

Any general rules you want the AI to follow.
For example:

* Only use absolute positioning when necessary. Opt for responsive and well structured layouts that use flexbox and grid by default
* Refactor code as you go to keep code clean
* Keep file sizes small and put helper functions and components in their own files.

--------------

# Design system guidelines
Rules for how the AI should make generations look like your company's design system

Additionally, if you select a design system to use in the prompt box, you can reference
your design system's components, tokens, variables and components.
For example:

* Use a base font-size of 14px
* Date formats should always be in the format âJun 10â
* The bottom toolbar should only ever have a maximum of 4 items
* Never use the floating action button with the bottom toolbar
* Chips should always come in sets of 3 or more
* Don't use a dropdown if there are 2 or fewer options

You can also create sub sections and add more specific details
For example:


## Button
The Button component is a fundamental interactive element in our design system, designed to trigger actions or navigate
users through the application. It provides visual feedback and clear affordances to enhance user experience.

### Usage
Buttons should be used for important actions that users need to take, such as form submissions, confirming choices,
or initiating processes. They communicate interactivity and should have clear, action-oriented labels.

### Variants
* Primary Button
  * Purpose : Used for the main action in a section or page
  * Visual Style : Bold, filled with the primary brand color
  * Usage : One primary button per section to guide users toward the most important action
* Secondary Button
  * Purpose : Used for alternative or supporting actions
  * Visual Style : Outlined with the primary color, transparent background
  * Usage : Can appear alongside a primary button for less important actions
* Tertiary Button
  * Purpose : Used for the least important actions
  * Visual Style : Text-only with no border, using primary color
  * Usage : For actions that should be available but not emphasized
-->
</file>

<file path="src/hooks/useAppNavigation.ts">
import { useNavigate } from 'react-router-dom';

/**
 * Custom hook for app navigation
 * Provides a unified navigation interface for all components
 */
export const useAppNavigation = () => {
  const navigate = useNavigate();

  return {
    // Navigate to a path
    navigate: (path: string) => navigate(path),
    
    // Navigate with ID parameter
    navigateToProject: (id: string) => navigate(`/project/${id}`),
    navigateToAgentProject: (id: string) => navigate(`/agent/project-management/${id}`),
    
    // Go back
    goBack: () => navigate(-1),
    
    // Replace current route
    replace: (path: string) => navigate(path, { replace: true }),
  };
};
</file>

<file path="src/layout/Layouts.tsx">
import { Outlet, useLocation, useNavigate } from 'react-router-dom';
import { Header } from '../components/Header';
import { Sidebar } from '../components/Sidebar';
import { useAuth } from '../contexts/AuthContext';

/**
 * Layout for Clients (Dashboard, Profile, Projects)
 * Includes the Top Navigation Header
 */
export const ClientLayout = () => {
  return (
    <div className="min-h-screen bg-[#F5F7FA]">
      <Header />
      {/* Outlet renders the child route (the specific page) */}
      <Outlet />
    </div>
  );
};

/**
 * Layout for Agents and Admins
 * Includes the Sidebar and the main content area wrapper
 */
interface SidebarLayoutProps {
  role: 'agent' | 'admin';
}

export const SidebarLayout = ({ role }: SidebarLayoutProps) => {
  const navigate = useNavigate();
  const location = useLocation();
  const { user } = useAuth();

  return (
    <div className="flex min-h-screen bg-[#F5F7FA] overflow-x-hidden">
      <Sidebar 
        role={role} 
        activePage={location.pathname} 
        onNavigate={(path) => navigate(path)}
        userName={user?.name || 'User'}
      />

      {/* Main Content Area - Handles the margin for the fixed sidebar */}
      <div className="lg:ml-64 flex-1 pt-16 lg:pt-0 w-full min-w-0">
        <div className="p-4 sm:p-6 lg:p-8 max-w-full overflow-x-hidden">
          <Outlet />
        </div>
      </div>
    </div>
  );
};
</file>

<file path="src/lib/api.ts">
import axios from 'axios';

// local dev: http://localhost:3000/api/v1 (set in .env)
// production: https://your-api.com/api/v1 (set in .env.production)
const baseURL = import.meta.env.VITE_API_URL || 'http://localhost:3000/api/v1';

const api = axios.create({
  baseURL,
  headers: {
    'Content-Type': 'application/json',
  },
});

// Request Interceptor: Attach Token
api.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('token');
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  (error) => Promise.reject(error)
);

// Response Interceptor: Handle 401 (Unauthorized)
api.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response && error.response.status === 401) {
      if (window.location.pathname !== '/login') {
        localStorage.removeItem('token');
        localStorage.removeItem('user');
        window.location.href = '/login';
      }
    }
    return Promise.reject(error);
  }
);

export default api;
</file>

<file path="src/main.tsx">
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';
import './styles/globals.css';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
</file>

<file path="src/pages/AdminServices.tsx">
import React, { useEffect, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { Plus, Layers, Loader2, Edit2, Trash2 } from 'lucide-react';
import { toast } from 'sonner';
import api from '../lib/api';

interface Category {
  id: number;
  name: string;
  description: string;
  createdAt: string;
}

export function AdminServices() {
  const navigate = useNavigate();
  const [categories, setCategories] = useState<Category[]>([]);
  const [loading, setLoading] = useState(true);
  const [showModal, setShowModal] = useState(false);
  
  // Form State
  const [formData, setFormData] = useState({
    name: '',
    description: ''
  });
  const [editingId, setEditingId] = useState<number | null>(null);

  const fetchCategories = async () => {
    try {
      const response = await api.get('/admin/categories');
      setCategories(response.data);
    } catch (error) {
      toast.error("Failed to load services");
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchCategories();
  }, []);

  const handleOpenAdd = () => {
    setEditingId(null);
    setFormData({ name: '', description: '' });
    setShowModal(true);
  };

  const handleEditClick = (category: Category) => {
    setEditingId(category.id);
    setFormData({ name: category.name, description: category.description });
    setShowModal(true);
  };

  const handleDeleteClick = async (id: number) => {
    if (!window.confirm("Are you sure you want to delete this service?")) return;

    try {
      await api.delete(`/admin/categories/${id}`);
      toast.success("Service deleted successfully");
      fetchCategories();
    } catch (error: any) {
      toast.error(error.response?.data?.message || "Failed to delete service");
    }
  };

  const handleSubmit = async () => {
    if (!formData.name) {
      toast.error("Service name is required");
      return;
    }

    try {
      if (editingId) {
        // Update existing
        await api.put(`/admin/categories/${editingId}`, formData);
        toast.success("Service updated successfully!");
      } else {
        // Create new
        await api.post('/admin/categories', formData);
        toast.success("Service category created successfully!");
      }
      
      setShowModal(false);
      setFormData({ name: '', description: '' });
      fetchCategories();
    } catch (error: any) {
      toast.error(error.response?.data?.message || "Operation failed");
    }
  };

  return (
    <>
      <div className="flex justify-between items-start mb-8">
        <div>
          <h1 className="mb-2 text-[#0D1B2A]">Services Management</h1>
          <p className="text-[#4A5568]">Define the service categories available for clients</p>
        </div>
        <button
          onClick={handleOpenAdd}
          className="flex items-center gap-2 bg-[#2EC4B6] text-white px-6 py-2.5 rounded-lg hover:bg-[#26a599] transition-all font-medium"
        >
          <Plus size={20} /> Add Service
        </button>
      </div>

      {loading ? (
        <div className="flex justify-center p-12">
          <Loader2 className="w-8 h-8 text-[#2EC4B6] animate-spin" />
        </div>
      ) : (
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {categories.length === 0 ? (
            <div className="col-span-full p-12 text-center bg-white rounded-xl border border-gray-200">
              <Layers className="mx-auto mb-4 text-gray-400" size={48} />
              <p className="text-[#4A5568]">No services defined yet.</p>
            </div>
          ) : (
            categories.map((cat) => (
              <div key={cat.id} className="bg-white p-6 rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow group">
                <div className="flex items-start justify-between mb-2">
                  <h3 className="font-semibold text-[#0D1B2A] text-lg">{cat.name}</h3>
                  <div className="flex items-center gap-2">
                     {/* Edit Button */}
                    <button 
                      onClick={() => handleEditClick(cat)}
                      className="text-gray-400 hover:text-[#3498DB] p-1 rounded transition-colors"
                      title="Edit Service"
                    >
                      <Edit2 size={16} />
                    </button>
                    {/* Delete Button */}
                    <button 
                      onClick={() => handleDeleteClick(cat.id)}
                      className="text-gray-400 hover:text-[#E74C3C] p-1 rounded transition-colors"
                      title="Delete Service"
                    >
                      <Trash2 size={16} />
                    </button>
                  </div>
                </div>
                <p className="text-sm text-[#4A5568] mb-4">{cat.description || "No description provided."}</p>
                <div className="pt-4 border-t border-gray-100 flex justify-between items-center text-xs text-gray-400">
                  <span>Created: {new Date(cat.createdAt).toLocaleDateString()}</span>
                  <span className="font-mono">ID: {cat.id}</span>
                </div>
              </div>
            ))
          )}
        </div>
      )}

      {/* Add/Edit Modal */}
      {showModal && (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
          <div className="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6">
            <div className="flex justify-between items-center mb-6">
              <h2 className="text-xl font-bold text-[#0D1B2A]">
                {editingId ? 'Edit Service' : 'Add New Service'}
              </h2>
              <button onClick={() => setShowModal(false)} className="text-gray-400 hover:text-gray-600">â</button>
            </div>
            
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium mb-1">Service Name *</label>
                <input
                  type="text"
                  value={formData.name}
                  onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                  placeholder="e.g. Web Development"
                  className="w-full border rounded-lg px-3 py-2 focus:outline-none focus:border-[#2EC4B6]"
                />
              </div>
              <div> 
                <label className="block text-sm font-medium mb-1">Description</label>
                <textarea
                  value={formData.description}
                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}
                  placeholder="Brief description of this service..."
                  rows={3}
                  className="w-full border rounded-lg px-3 py-2 focus:outline-none focus:border-[#2EC4B6]"
                />
              </div>
              
              <button onClick={handleSubmit} className="w-full bg-[#2EC4B6] text-white py-3 rounded-lg hover:bg-[#26a599] font-medium">
                {editingId ? 'Update Service' : 'Create Service'}
              </button>
            </div>
          </div>
        </div>
      )}
    </>
  );
}
</file>

<file path="src/pages/ForgotPassword.tsx">
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { ArrowLeft, CheckCircle, Mail } from 'lucide-react';
import logoImage from 'figma:asset/8c308caf909810f493480578c4eab6aa4f6235bf.png';

export function ForgotPassword() {
  const navigate = useNavigate();
  const [email, setEmail] = useState('');
  const [isLoading, setIsLoading] = useState(false);
  const [isSubmitted, setIsSubmitted] = useState(false);
  const [error, setError] = useState('');

  const validateEmail = (email: string) => {
    if (!email.trim()) {
      setError('Email is required');
      return false;
    }
    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
      setError('Please enter a valid email address');
      return false;
    }
    setError('');
    return true;
  };

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    
    if (!validateEmail(email)) {
      return;
    }

    setIsLoading(true);
    
    // Simulate sending reset email
    setTimeout(() => {
      setIsLoading(false);
      setIsSubmitted(true);
    }, 1500);
  };

  if (isSubmitted) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-[#F5F7FA] to-[#E2E8F0] flex flex-col items-center justify-center px-4 py-8 sm:px-6 lg:px-8">
        <div className="w-full max-w-md">
          {/* Logo */}
          <div className="mb-8 text-center">
            <div className="flex items-center justify-center gap-2 mb-6">
              <img src={logoImage} alt="BizTech" className="h-8 sm:h-10" />
            </div>
          </div>

          {/* Success Card */}
          <div className="bg-white rounded-xl shadow-lg border border-gray-200 p-6 sm:p-8 text-center">
            <div className="w-16 h-16 bg-gradient-to-br from-[#2ECC71]/10 to-[#27ae60]/10 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner">
              <CheckCircle className="text-[#2ECC71]" size={32} />
            </div>
            
            <h2 className="mb-2 text-[#1A202C]">Check Your Email</h2>
            <p className="text-[#4A5568] mb-6">
              We've sent password reset instructions to
            </p>
            <div className="bg-gray-50 rounded-lg p-3 mb-6 inline-flex items-center gap-2">
              <Mail size={16} className="text-[#2EC4B6]" />
              <span className="text-sm text-[#1A202C]">{email}</span>
            </div>

            <div className="bg-gradient-to-r from-[#FFF5F5] to-[#FEE] border border-[#FED7D7] rounded-lg p-4 mb-6">
              <p className="text-sm text-[#742A2A]">
                <span className="font-medium">Didn't receive the email?</span>
                <br />
                Check your spam folder or request a new link below.
              </p>
            </div>

            <button
              onClick={() => navigate('/login')}
              className="w-full bg-gradient-to-r from-[#0D1B2A] to-[#1a2d42] hover:from-[#1a2d42] hover:to-[#0D1B2A] text-white py-3 rounded-lg transition-all shadow-md hover:shadow-lg mb-3 transform hover:scale-[1.02] active:scale-[0.98]"
            >
              Back to Sign In
            </button>

            <button
              onClick={() => setIsSubmitted(false)}
              className="w-full text-[#2EC4B6] hover:text-[#26a599] text-sm transition-colors py-2"
            >
              Resend Email
            </button>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-[#F5F7FA] to-[#E2E8F0] flex flex-col items-center justify-center px-4 py-8 sm:px-6 lg:px-8">
      <div className="w-full max-w-md">
        {/* Logo and Header */}
        <div className="mb-8 text-center">
          <div className="flex items-center justify-center gap-2 mb-6">
            <img src={logoImage} alt="BizTech" className="h-8 sm:h-10" />
          </div>
          
          <h1 className="mb-2 text-[#1A202C]">Reset Password</h1>
          <p className="text-[#4A5568] text-sm sm:text-base">Enter your email to receive reset instructions</p>
        </div>

        {/* Reset Password Card */}
        <div className="bg-white rounded-xl shadow-lg border border-gray-200 p-6 sm:p-8">
          <button
            onClick={() => navigate('/login')}
            className="flex items-center gap-2 text-[#2EC4B6] hover:text-[#26a599] text-sm mb-6 transition-colors group"
          >
            <ArrowLeft size={16} className="group-hover:-translate-x-1 transition-transform" />
            Back to Sign In
          </button>

          <div className="mb-6">
            <h2 className="mb-1 text-[#1A202C]">Forgot Password?</h2>
            <p className="text-sm text-[#4A5568]">
              No worries, we'll send you reset instructions
            </p>
          </div>

          <form onSubmit={handleSubmit} className="space-y-5">
            {/* Email Field */}
            <div>
              <label htmlFor="email" className="block text-sm text-[#1A202C] mb-2">
                Email Address
              </label>
              <input
                id="email"
                type="email"
                value={email}
                onChange={(e) => {
                  setEmail(e.target.value);
                  if (error) setError('');
                }}
                placeholder="you@company.com"
                className={`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-all text-[#1A202C] placeholder:text-gray-400 ${
                  error
                    ? 'border-[#E74C3C] focus:ring-[#E74C3C]/20'
                    : 'border-gray-300 focus:border-[#2EC4B6] focus:ring-[#2EC4B6]/20'
                }`}
              />
              {error && (
                <p className="mt-1.5 text-xs text-[#E74C3C]">{error}</p>
              )}
              <p className="mt-2 text-xs text-[#718096]">
                We'll send you a secure link to reset your password
              </p>
            </div>

            {/* Submit Button */}
            <button
              type="submit"
              disabled={isLoading}
              className="w-full bg-gradient-to-r from-[#0D1B2A] to-[#1a2d42] hover:from-[#1a2d42] hover:to-[#0D1B2A] text-white py-3 rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02] active:scale-[0.98]"
            >
              {isLoading ? (
                <span className="flex items-center justify-center gap-2">
                  <svg className="animate-spin h-5 w-5" viewBox="0 0 24 24">
                    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" fill="none" />
                    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
                  </svg>
                  Sending...
                </span>
              ) : (
                'Send Reset Link'
              )}
            </button>
          </form>

          {/* Divider */}
          <div className="my-6 flex items-center gap-4">
            <div className="flex-1 h-px bg-gray-200"></div>
            <span className="text-xs text-gray-500">or</span>
            <div className="flex-1 h-px bg-gray-200"></div>
          </div>

          {/* Create Account Link */}
          <button
            onClick={() => navigate('/register')}
            className="w-full border-2 border-[#2EC4B6] text-[#2EC4B6] hover:bg-[#2EC4B6] hover:text-white py-3 rounded-lg transition-all transform hover:scale-[1.02] active:scale-[0.98]"
          >
            Create New Account
          </button>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/pages/Home.tsx">
import React from 'react';
import { useNavigate } from 'react-router-dom';
import { ArrowRight, CheckCircle, Shield, Zap, Users, FileText, BarChart, Lock, Phone, Mail } from 'lucide-react';
import { Footer } from '../components/Footer';
import logoImage from 'figma:asset/8c308caf909810f493480578c4eab6aa4f6235bf.png';

export function Home() {
  const navigate = useNavigate();

  return (
    <div className="min-h-screen bg-gradient-to-br from-[#F5F7FA] to-[#E2E8F0]">
      {/* Navigation */}
      <nav className="bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center h-16 sm:h-20">
            <button onClick={() => navigate('/')} className="flex items-center hover:opacity-80 transition-opacity">
              <img src={logoImage} alt="BizTech" className="h-8 sm:h-10" />
            </button>
            <div className="flex items-center gap-2 sm:gap-4">
              <button
                onClick={() => navigate('/login')}
                className="text-[#1A202C] hover:text-[#2EC4B6] transition-colors text-sm sm:text-base px-3 sm:px-4 py-2"
              >
                Sign In
              </button>
              <button
                onClick={() => navigate('/register')}
                className="bg-gradient-to-r from-[#2EC4B6] to-[#26a599] text-white px-4 sm:px-6 py-2 sm:py-2.5 rounded-lg hover:shadow-lg transition-all text-sm sm:text-base"
              >
                Get Started
              </button>
            </div>
          </div>
        </div>
      </nav>

      {/* Hero Section */}
      <section className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-12 sm:pt-20 pb-16 sm:pb-24">
        <div className="text-center max-w-4xl mx-auto">
          <div className="inline-flex items-center gap-2 bg-gradient-to-r from-[#2EC4B6]/10 to-[#2EC4B6]/5 border border-[#2EC4B6]/20 rounded-full px-4 sm:px-6 py-2 mb-6 sm:mb-8">
            <Zap size={16} className="text-[#2EC4B6]" />
            <span className="text-xs sm:text-sm text-[#1A202C]">Streamline Your Digital Services</span>
          </div>
          
          <h1 className="mb-4 sm:mb-6 text-[#0D1B2A] text-3xl sm:text-5xl lg:text-6xl font-bold">
            Agency Management Portal for <span className="text-[#2EC4B6]">Digital Services</span>
          </h1>
          
          <p className="text-base sm:text-lg lg:text-xl text-[#4A5568] mb-8 sm:mb-10 max-w-3xl mx-auto px-4">
            Replace traditional e-commerce with a consultative sales process. From needs assessment to project delivery, manage everything in one secure platform.
          </p>
          
          <div className="flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-4">
            <button
              onClick={() => navigate('/register')}
              className="w-full sm:w-auto min-w-[160px] bg-gradient-to-r from-[#2EC4B6] to-[#26a599] text-white px-8 py-3 rounded-lg hover:shadow-xl transition-all flex items-center justify-center gap-2 group h-[48px]"
            >
              Get Started
              <ArrowRight size={20} className="group-hover:translate-x-1 transition-transform" />
            </button>
            <button
              onClick={() => navigate('/login')}
              className="w-full sm:w-auto min-w-[160px] border-2 border-[#0D1B2A] text-[#0D1B2A] px-8 py-3 rounded-lg hover:bg-[#0D1B2A] hover:text-white transition-all h-[48px]"
            >
              Sign In
            </button>
          </div>
        </div>

        {/* Hero Image/Dashboard Preview */}
        <div className="mt-12 sm:mt-20 relative">
          <div className="bg-white rounded-2xl shadow-2xl border border-gray-200 p-4 sm:p-6 mx-auto max-w-5xl">
            <div className="bg-gradient-to-b from-gray-100 via-gray-200 to-gray-300 rounded-xl p-4 sm:p-6">
              <div className="flex items-center gap-2 mb-4">
                <div className="w-3 h-3 bg-[#FF5F56] rounded-full"></div>
                <div className="w-3 h-3 bg-[#FFBD2E] rounded-full"></div>
                <div className="w-3 h-3 bg-[#27C93F] rounded-full"></div>
              </div>
              
              <div className="bg-gradient-to-br from-[#1e293b] via-[#334155] to-[#475569] rounded-lg p-6 sm:p-8">
                <div className="grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6">
                  {/* Active Requests Card */}
                  <div className="bg-[#2d3b4e]/80 backdrop-blur-sm border border-white/10 rounded-xl p-5 sm:p-6">
                    <p className="text-sm text-[#2EC4B6] mb-3">Active Requests</p>
                    <p className="text-4xl sm:text-5xl text-white mb-2">24</p>
                    <p className="text-xs text-gray-400">â 12% from last week</p>
                  </div>
                  
                  {/* In Progress Card */}
                  <div className="bg-[#2d3b4e]/80 backdrop-blur-sm border border-white/10 rounded-xl p-5 sm:p-6">
                    <p className="text-sm text-[#2EC4B6] mb-3">In Progress</p>
                    <p className="text-4xl sm:text-5xl text-white mb-2">12</p>
                    <p className="text-xs text-gray-400">8 due this week</p>
                  </div>
                  
                  {/* Completed Card */}
                  <div className="bg-[#2d3b4e]/80 backdrop-blur-sm border border-white/10 rounded-xl p-5 sm:p-6">
                    <p className="text-sm text-[#2EC4B6] mb-3">Completed</p>
                    <p className="text-4xl sm:text-5xl text-white mb-2">156</p>
                    <p className="text-xs text-gray-400">98% satisfaction</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Features Section */}
      <section className="bg-white py-16 sm:py-24">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="text-center mb-12 sm:mb-16">
            <h2 className="mb-3 sm:mb-4 text-[#0D1B2A] text-2xl sm:text-3xl lg:text-4xl font-bold">Everything You Need</h2>
            <p className="text-base sm:text-lg text-[#4A5568] max-w-2xl mx-auto">
              Built specifically for digital service agencies managing web development, SEO, and marketing projects
            </p>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8">
            {/* Feature 1 */}
            <div className="bg-gradient-to-br from-[#F5F7FA] to-white p-6 sm:p-8 rounded-xl border border-gray-200 hover:shadow-lg transition-all group">
              <div className="w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-[#2EC4B6]/10 to-[#2EC4B6]/5 rounded-lg flex items-center justify-center mb-4 sm:mb-6 group-hover:scale-110 transition-transform">
                <FileText className="text-[#2EC4B6]" size={24} />
              </div>
              <h3 className="mb-2 sm:mb-3 text-[#1A202C] text-lg sm:text-xl font-semibold">Needs Assessment</h3>
              <p className="text-sm sm:text-base text-[#4A5568]">
                Smart questionnaire engine replaces traditional carts with consultative discovery
              </p>
            </div>

            {/* Feature 2 */}
            <div className="bg-gradient-to-br from-[#F5F7FA] to-white p-6 sm:p-8 rounded-xl border border-gray-200 hover:shadow-lg transition-all group">
              <div className="w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-[#2EC4B6]/10 to-[#2EC4B6]/5 rounded-lg flex items-center justify-center mb-4 sm:mb-6 group-hover:scale-110 transition-transform">
                <Users className="text-[#2EC4B6]" size={24} />
              </div>
              <h3 className="mb-2 sm:mb-3 text-[#1A202C] text-lg sm:text-xl font-semibold">Role-Based Access</h3>
              <p className="text-sm sm:text-base text-[#4A5568]">
                Separate portals for Clients, Agents, and Admins with gated approval workflow
              </p>
            </div>

            {/* Feature 3 */}
            <div className="bg-gradient-to-br from-[#F5F7FA] to-white p-6 sm:p-8 rounded-xl border border-gray-200 hover:shadow-lg transition-all group">
              <div className="w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-[#2EC4B6]/10 to-[#2EC4B6]/5 rounded-lg flex items-center justify-center mb-4 sm:mb-6 group-hover:scale-110 transition-transform">
                <Lock className="text-[#2EC4B6]" size={24} />
              </div>
              <h3 className="mb-2 sm:mb-3 text-[#1A202C] text-lg sm:text-xl font-semibold">Technical Vault</h3>
              <p className="text-sm sm:text-base text-[#4A5568]">
                Secure credential sharing with masked inputs and encrypted storage
              </p>
            </div>

            {/* Feature 4 */}
            <div className="bg-gradient-to-br from-[#F5F7FA] to-white p-6 sm:p-8 rounded-xl border border-gray-200 hover:shadow-lg transition-all group">
              <div className="w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-[#2EC4B6]/10 to-[#2EC4B6]/5 rounded-lg flex items-center justify-center mb-4 sm:mb-6 group-hover:scale-110 transition-transform">
                <BarChart className="text-[#2EC4B6]" size={24} />
              </div>
              <h3 className="mb-2 sm:mb-3 text-[#1A202C] text-lg sm:text-xl font-semibold">Project Tracking</h3>
              <p className="text-sm sm:text-base text-[#4A5568]">
                Milestone-driven progress with real-time updates and file management
              </p>
            </div>

            {/* Feature 5 */}
            <div className="bg-gradient-to-br from-[#F5F7FA] to-white p-6 sm:p-8 rounded-xl border border-gray-200 hover:shadow-lg transition-all group">
              <div className="w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-[#2EC4B6]/10 to-[#2EC4B6]/5 rounded-lg flex items-center justify-center mb-4 sm:mb-6 group-hover:scale-110 transition-transform">
                <Shield className="text-[#2EC4B6]" size={24} />
              </div>
              <h3 className="mb-2 sm:mb-3 text-[#1A202C] text-lg sm:text-xl font-semibold">Admin Controls</h3>
              <p className="text-sm sm:text-base text-[#4A5568]">
                Full user management, request triage, and quality assurance controls
              </p>
            </div>

            {/* Feature 6 */}
            <div className="bg-gradient-to-br from-[#F5F7FA] to-white p-6 sm:p-8 rounded-xl border border-gray-200 hover:shadow-lg transition-all group">
              <div className="w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-[#2EC4B6]/10 to-[#2EC4B6]/5 rounded-lg flex items-center justify-center mb-4 sm:mb-6 group-hover:scale-110 transition-transform">
                <Zap className="text-[#2EC4B6]" size={24} />
              </div>
              <h3 className="mb-2 sm:mb-3 text-[#1A202C] text-lg sm:text-xl font-semibold">Proposal Builder</h3>
              <p className="text-sm sm:text-base text-[#4A5568]">
                Create detailed proposals with scope, pricing, and timeline management
              </p>
            </div>
          </div>
        </div>
      </section>

      {/* Workflow Section */}
      <section className="py-16 sm:py-24" data-workflow>
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="text-center mb-12 sm:mb-16">
            <h2 className="mb-3 sm:mb-4 text-[#0D1B2A] text-2xl sm:text-3xl lg:text-4xl font-bold">Linear Workflow</h2>
            <p className="text-base sm:text-lg text-[#4A5568] max-w-2xl mx-auto">
              From initial contact to final delivery, every step is tracked and managed
            </p>
          </div>

          <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-0 lg:space-x-0">
            {/* Step 1 */}
            <div className="relative flex items-center">
              <div className="bg-white rounded-2xl p-6 border-2 border-[#2EC4B6] shadow-lg flex-1 flex flex-col">
                <div className="w-12 h-12 bg-[#2EC4B6] text-white rounded-full flex items-center justify-center mb-4 font-semibold text-lg">
                  1
                </div>
                <h3 className="mb-2 text-[#1A202C] text-lg font-semibold">Request</h3>
                <p className="text-sm text-[#4A5568] flex-1">Client submits needs via assessment</p>
              </div>
              {/* Connector */}
              <div className="hidden lg:flex absolute left-full top-1/2 -translate-y-1/2 items-center z-10">
                <div className="w-2 h-2 bg-white border-2 border-[#2EC4B6] rounded-full"></div>
                <div className="w-6 h-0.5 bg-[#2EC4B6]"></div>
                <div className="w-2 h-2 bg-white border-2 border-[#2EC4B6] rounded-full"></div>
              </div>
            </div>

            {/* Step 2 */}
            <div className="relative flex items-center lg:pl-8">
              <div className="bg-white rounded-2xl p-6 border-2 border-[#2EC4B6] shadow-lg flex-1 flex flex-col">
                <div className="w-12 h-12 bg-[#2EC4B6] text-white rounded-full flex items-center justify-center mb-4 font-semibold text-lg">
                  2
                </div>
                <h3 className="mb-2 text-[#1A202C] text-lg font-semibold">Proposal</h3>
                <p className="text-sm text-[#4A5568] flex-1">Agent creates detailed proposal</p>
              </div>
              {/* Connector */}
              <div className="hidden lg:flex absolute left-full top-1/2 -translate-y-1/2 items-center z-10">
                <div className="w-2 h-2 bg-white border-2 border-[#2EC4B6] rounded-full"></div>
                <div className="w-6 h-0.5 bg-[#2EC4B6]"></div>
                <div className="w-2 h-2 bg-white border-2 border-[#2EC4B6] rounded-full"></div>
              </div>
            </div>

            {/* Step 3 */}
            <div className="relative flex items-center lg:pl-8">
              <div className="bg-white rounded-2xl p-6 border-2 border-[#2EC4B6] shadow-lg flex-1 flex flex-col">
                <div className="w-12 h-12 bg-[#2EC4B6] text-white rounded-full flex items-center justify-center mb-4 font-semibold text-lg">
                  3
                </div>
                <h3 className="mb-2 text-[#1A202C] text-lg font-semibold">Project</h3>
                <p className="text-sm text-[#4A5568] flex-1">Work begins with milestones</p>
              </div>
              {/* Connector */}
              <div className="hidden lg:flex absolute left-full top-1/2 -translate-y-1/2 items-center z-10">
                <div className="w-2 h-2 bg-white border-2 border-[#2EC4B6] rounded-full"></div>
                <div className="w-6 h-0.5 bg-[#2EC4B6]"></div>
                <div className="w-2 h-2 bg-white border-2 border-[#2EC4B6] rounded-full"></div>
              </div>
            </div>

            {/* Step 4 */}
            <div className="flex items-center lg:pl-8">
              <div className="bg-white rounded-2xl p-6 border-2 border-[#2EC4B6] shadow-lg flex-1 flex flex-col">
                <div className="w-12 h-12 bg-[#2EC4B6] text-white rounded-full flex items-center justify-center mb-4 font-semibold text-lg">
                  4
                </div>
                <h3 className="mb-2 text-[#1A202C] text-lg font-semibold">Delivery</h3>
                <p className="text-sm text-[#4A5568] flex-1">Final delivery and handoff</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* CTA Section */}
      <section className="bg-gradient-to-br from-[#0D1B2A] to-[#1a2d42] py-16 sm:py-24">
        <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center mb-12 sm:mb-16">
          <h2 className="mb-3 sm:mb-4 text-white text-2xl sm:text-3xl lg:text-4xl font-bold">
            Ready to Get Started?
          </h2>
          <p className="text-base sm:text-lg text-gray-300 mb-8 sm:mb-10">
            Transform your digital service delivery with our comprehensive agency management platform
          </p>
          <div className="flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-4">
            <button
              onClick={() => navigate('/register')}
              className="w-full sm:w-auto min-w-[160px] bg-gradient-to-r from-[#2EC4B6] to-[#26a599] text-white px-8 py-3 rounded-lg hover:shadow-2xl transition-all font-medium h-[48px]"
            >
              Create Account
            </button>
            <button
              onClick={() => navigate('/login')}
              className="w-full sm:w-auto min-w-[160px] bg-white text-[#0D1B2A] px-8 py-3 rounded-lg hover:bg-gray-100 transition-all font-medium h-[48px]"
            >
              Sign In
            </button>
          </div>
        </div>

        {/* Footer Links Section */}
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 border-t border-white/10 pt-12">
          <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 sm:gap-12 mb-12">
            {/* Logo Section */}
            <div className="col-span-1 sm:col-span-2 lg:col-span-1">
              <img src={logoImage} alt="BizTech Biz Digital" className="h-8 sm:h-10 mb-4 brightness-0 invert" />
              <p className="text-sm text-gray-400">
                Streamline your digital agency operations with our comprehensive management platform for web development, SEO, and marketing services
              </p>
            </div>

            {/* Quick Links */}
            <div>
              <h3 className="text-white font-semibold mb-4">Quick Links</h3>
              <ul className="space-y-3">
                <li>
                  <button 
                    onClick={() => navigate('/login')}
                    className="text-sm text-gray-400 hover:text-[#2EC4B6] transition-colors"
                  >
                    Request Services
                  </button>
                </li>
                <li>
                  <button 
                    onClick={() => navigate('/register')}
                    className="text-sm text-gray-400 hover:text-[#2EC4B6] transition-colors"
                  >
                    Become an Agent
                  </button>
                </li>
                <li>
                  <button 
                    onClick={() => {
                      const workflowSection = document.querySelector('[data-workflow]');
                      workflowSection?.scrollIntoView({ behavior: 'smooth' });
                    }}
                    className="text-sm text-gray-400 hover:text-[#2EC4B6] transition-colors"
                  >
                    How It Works
                  </button>
                </li>
              </ul>
            </div>

            {/* Legal */}
            <div>
              <h3 className="text-white font-semibold mb-4">Legal</h3>
              <ul className="space-y-3">
                <li>
                  <button 
                    onClick={() => alert('Terms of Service - Coming Soon')}
                    className="text-sm text-gray-400 hover:text-[#2EC4B6] transition-colors"
                  >
                    Terms of Service
                  </button>
                </li>
                <li>
                  <button 
                    onClick={() => alert('Privacy Policy - Coming Soon')}
                    className="text-sm text-gray-400 hover:text-[#2EC4B6] transition-colors"
                  >
                    Privacy Policy
                  </button>
                </li>
              </ul>
            </div>

            {/* Contact Us */}
            <div>
              <h3 className="text-white font-semibold mb-4">Contact Us</h3>
              <ul className="space-y-3">
                <li className="flex items-center gap-2 text-sm text-gray-400">
                  <Phone size={16} className="text-[#2EC4B6]" />
                  <a 
                    href="tel:+97150328786"
                    className="hover:text-[#2EC4B6] transition-colors"
                  >
                    +971 50 328 8786
                  </a>
                </li>
                <li className="flex items-center gap-2 text-sm text-gray-400">
                  <Mail size={16} className="text-[#2EC4B6]" />
                  <a 
                    href="mailto:services@biztech.ae"
                    className="hover:text-[#2EC4B6] transition-colors"
                  >
                    services@biztech.ae
                  </a>
                </li>
              </ul>
            </div>
          </div>

          {/* Copyright */}
          <div className="border-t border-white/10 pt-8 text-center">
            <p className="text-sm text-gray-400">
              BizTech Biz Digital Copyright Â© 2025. All Rights Reserved.
            </p>
          </div>
        </div>
      </section>
    </div>
  );
}
</file>

<file path="src/pages/MyDocuments.tsx">
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { ArrowLeft, Upload, Folder, Lock, Eye, Download, Trash2, Plus } from 'lucide-react';
import { Document } from '../types';
import logoImage from 'figma:asset/8c308caf909810f493480578c4eab6aa4f6235bf.png';

export function MyDocuments() {
  const navigate = useNavigate();
  const [activeTab, setActiveTab] = useState<'credentials' | 'documents'>('credentials');

  const [documents, setDocuments] = useState<Document[]>([
    { id: '1', name: 'Passport Copy', required: true, status: 'not-uploaded' },
    { id: '2', name: 'Visa Page', required: true, status: 'not-uploaded' },
    { id: '3', name: 'Emirates ID', required: true, status: 'not-uploaded' },
    { id: '4', name: 'Educational Certificate', required: true, status: 'not-uploaded' },
    { id: '5', name: 'Bank Statement', required: false, status: 'not-uploaded' }
  ]);

  const [showDateWarning, setShowDateWarning] = useState(true);

  return (
    <div className="min-h-screen bg-[#F5F7FA]">
      {/* Header */}
      <header className="bg-white border-b border-gray-200">
        <div className="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
          <div className="flex items-center gap-8">
            <div className="flex items-center gap-2">
              <div className="w-8 h-8 bg-[#2EC4B6] rounded flex items-center justify-center">
                <span className="text-white text-sm">BT</span>
              </div>
              <span className="text-[#1A202C]">BizTech</span>
            </div>
            <nav className="flex gap-6">
              <button onClick={() => navigate('/dashboard')} className="text-gray-600 hover:text-[#1A202C] pb-1">Dashboard</button>
              <button className="text-[#2EC4B6] border-b-2 border-[#2EC4B6] pb-1">My Documents</button>
              <button className="text-gray-600 hover:text-[#1A202C] pb-1">My Profile</button>
            </nav>
          </div>
          <div className="flex items-center gap-3">
            <button
              onClick={() => navigate('/dashboard')}
              className="text-[#2EC4B6] hover:text-[#26a599] text-sm transition-colors"
            >
              Back to Dashboard
            </button>
            <div className="w-8 h-8 bg-gray-900 rounded-full"></div>
          </div>
        </div>
      </header>

      <div className="max-w-5xl mx-auto px-6 py-8">
        {/* Page Header */}
        <div className="mb-6">
          <h1 className="mb-2 text-[#1A202C]">My Documents</h1>
          <p className="text-[#4A5568]">Upload and manage your required documents</p>
        </div>

        {/* Warning Banner */}
        {showDateWarning && (
          <div className="bg-[#E74C3C] text-white px-4 py-3 rounded-lg mb-6 flex justify-between items-center">
            <span className="text-sm">Please Enter Expiration Date to upload the document</span>
            <button
              onClick={() => setShowDateWarning(false)}
              className="text-white hover:text-gray-200"
            >
              â
            </button>
          </div>
        )}

        {/* Documents List */}
        <div className="space-y-4">
          {documents.map((doc) => (
            <div
              key={doc.id}
              className="bg-white rounded-lg border border-gray-200 p-6"
            >
              <div className="flex items-center gap-6">
                {/* Upload Icon */}
                <div className="text-gray-400">
                  <Upload size={24} />
                </div>

                {/* Document Info */}
                <div className="flex-1">
                  <h4 className="text-[#1A202C] mb-1">{doc.name}</h4>
                  <p className="text-sm text-[#2EC4B6]">
                    {doc.required ? 'Required Document' : 'Optional Document'}
                  </p>
                </div>

                {/* Date Picker */}
                <div className="relative">
                  <Calendar className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400" size={16} />
                  <input
                    type="text"
                    placeholder={doc.required ? "dd/mm/yyyy" : "Optional (DD/MM/YYYY)"}
                    className="w-40 pl-10 pr-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:border-[#2EC4B6]"
                  />
                </div>

                {/* Status Badge */}
                <span className="px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm min-w-[100px] text-center">
                  Not Uploaded
                </span>

                {/* Upload Button */}
                <button className="bg-[#2EC4B6] hover:bg-[#26a599] text-white px-4 py-2 rounded flex items-center gap-2 transition-colors">
                  <Upload size={16} />
                  Upload File
                </button>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/pages/PendingApproval.tsx">
import React from 'react';
import { useNavigate } from 'react-router-dom';
import { Clock, Shield, ArrowLeft, CheckCircle } from 'lucide-react';
import logoImage from 'figma:asset/8c308caf909810f493480578c4eab6aa4f6235bf.png';

export function PendingApproval() {
  const navigate = useNavigate();
  
  return (
    <div className="min-h-screen bg-gradient-to-br from-[#F5F7FA] to-[#E2E8F0] flex items-center justify-center p-4 sm:p-6">
      <div className="w-full max-w-lg">
        {/* Logo */}
        <div className="mb-8 text-center">
          <button 
            onClick={() => navigate('/')}
            className="flex items-center justify-center gap-2 mb-6 mx-auto hover:opacity-80 transition-opacity"
          >
            <img src={logoImage} alt="BizTech" className="h-8 sm:h-10" />
          </button>
        </div>

        <div className="bg-white rounded-xl shadow-lg border border-gray-200 p-6 sm:p-12 text-center">
          {/* Icon */}
          <div className="mb-6 flex justify-center">
            <div className="relative">
              <div className="w-20 h-20 sm:w-24 sm:h-24 bg-gradient-to-br from-[#2EC4B6]/10 to-[#2EC4B6]/5 rounded-full flex items-center justify-center shadow-inner">
                <Shield className="w-10 h-10 sm:w-12 sm:h-12 text-[#2EC4B6]" />
              </div>
              <div className="absolute -bottom-2 -right-2 w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-[#F39C12] to-[#e67e22] rounded-full flex items-center justify-center shadow-lg">
                <Clock className="w-5 h-5 sm:w-6 sm:h-6 text-white" />
              </div>
            </div>
          </div>
          
          <h2 className="mb-3 text-[#1A202C]">Account Under Review</h2>
          
          <p className="text-[#4A5568] mb-8 max-w-md mx-auto">
            Thank you for registering! Our admin team is currently reviewing your account to ensure quality and security.
          </p>
          
          {/* Status Timeline */}
          <div className="mb-8 space-y-4 max-w-sm mx-auto">
            <div className="flex items-start gap-3 text-left">
              <div className="flex-shrink-0 w-6 h-6 bg-[#2ECC71] rounded-full flex items-center justify-center mt-0.5">
                <CheckCircle size={14} className="text-white" />
              </div>
              <div>
                <p className="text-sm text-[#1A202C]">Registration Completed</p>
                <p className="text-xs text-[#718096]">Your details have been submitted</p>
              </div>
            </div>
            
            <div className="flex items-start gap-3 text-left">
              <div className="flex-shrink-0 w-6 h-6 bg-[#F39C12] rounded-full flex items-center justify-center mt-0.5 relative">
                <div className="w-2 h-2 bg-white rounded-full animate-pulse"></div>
              </div>
              <div>
                <p className="text-sm text-[#1A202C]">Admin Review</p>
                <p className="text-xs text-[#718096]">Currently in progress</p>
              </div>
            </div>
            
            <div className="flex items-start gap-3 text-left">
              <div className="flex-shrink-0 w-6 h-6 border-2 border-gray-300 rounded-full mt-0.5"></div>
              <div>
                <p className="text-sm text-[#4A5568]">Email Confirmation</p>
                <p className="text-xs text-[#718096]">You'll receive notification</p>
              </div>
            </div>
          </div>

          {/* Info Box */}
          <div className="bg-gradient-to-r from-[#EBF8FF] to-[#E0F2FE] border border-[#BEE3F8] rounded-lg p-4 mb-6">
            <p className="text-sm text-[#2C5282]">
              <span className="font-medium">â±ï¸ Expected Timeline</span>
              <br />
              Most accounts are reviewed within 24-48 hours during business days.
            </p>
          </div>
          
          <div className="flex items-center justify-center gap-2 text-sm text-[#4A5568] mb-6">
            <div className="w-2 h-2 bg-[#F39C12] rounded-full animate-pulse"></div>
            <span>Pending admin approval</span>
          </div>

          <button
            onClick={() => navigate('/login')}
            className="inline-flex items-center gap-2 text-[#2EC4B6] hover:text-[#26a599] text-sm transition-colors group"
          >
            <ArrowLeft size={16} className="group-hover:-translate-x-1 transition-transform" />
            Back to Sign In
          </button>
        </div>

        {/* Help Text */}
        <p className="mt-6 text-xs text-[#718096] text-center">
          Questions about your account?{' '}
          <button 
            onClick={() => alert('Contact Support - Email: services@biztech.ae | Phone: +971 50 328 8786')}
            className="text-[#2EC4B6] hover:underline"
          >
            Contact Support
          </button>
        </p>
      </div>
    </div>
  );
}
</file>

<file path="src/pages/ProposalBuilder.tsx">
import React, { useState } from 'react';
import { useNavigate, useParams } from 'react-router-dom';
import { ArrowLeft } from 'lucide-react';
import { ProposalGenerator } from '../components/ProposalGenerator';
import { toast } from 'sonner';

export function ProposalBuilder() {
  const navigate = useNavigate();
  const { requestId } = useParams<{ requestId: string }>();

  const [items, setItems] = useState<ProposalItem[]>([
    { id: '1', description: 'Website Design & Development', price: 15000 },
    { id: '2', description: 'CMS Integration', price: 3000 },
    { id: '3', description: 'Multi-language Setup (EN/AR)', price: 2000 }
  ]);

  const [notes, setNotes] = useState('Project timeline: 6-8 weeks\nIncludes 2 rounds of revisions\n3 months free support');

  const addItem = () => {
    const newItem: ProposalItem = {
      id: Date.now().toString(),
      description: '',
      price: 0
    };
    setItems([...items, newItem]);
  };

  const updateItem = (id: string, field: keyof ProposalItem, value: string | number) => {
    setItems(items.map(item => 
      item.id === id ? { ...item, [field]: value } : item
    ));
  };

  const removeItem = (id: string) => {
    setItems(items.filter(item => item.id !== id));
  };

  const total = items.reduce((sum, item) => sum + (item.price || 0), 0);

  return (
    <div className="min-h-screen bg-[#F8F9FA]">
      {/* Header */}
      <header className="bg-[#0D1B2A] text-white py-6 px-8 shadow-lg">
        <div className="max-w-5xl mx-auto">
          <button
            onClick={() => navigate('/queue')}
            className="text-[#2EC4B6] hover:text-white mb-4 flex items-center gap-2 transition-colors"
          >
            <ArrowLeft size={20} />
            Back to Queue
          </button>
          <h2 className="mb-2">Proposal Builder</h2>
          <p className="text-gray-400 text-sm">Request #REQ-{requestId} â¢ ABC Trading LLC</p>
        </div>
      </header>

      <div className="max-w-5xl mx-auto p-8">
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
          {/* Left Column - Proposal Items */}
          <div className="lg:col-span-2">
            <div className="bg-white rounded-xl shadow-lg border border-gray-200 p-6">
              <div className="flex justify-between items-center mb-6">
                <h3 className="text-[#0D1B2A]">Proposal Items</h3>
                <button
                  onClick={addItem}
                  className="text-[#2EC4B6] hover:text-[#26a599] flex items-center gap-2 transition-colors text-sm"
                >
                  <Plus size={16} />
                  Add Item
                </button>
              </div>

              <div className="space-y-4">
                {items.map((item) => (
                  <div key={item.id} className="flex gap-3 items-start">
                    <div className="flex-1">
                      <input
                        type="text"
                        value={item.description}
                        onChange={(e) => updateItem(item.id, 'description', e.target.value)}
                        placeholder="Item description"
                        className="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-[#2EC4B6] mb-2"
                      />
                    </div>
                    <div className="w-32">
                      <div className="relative">
                        <span className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-500">AED</span>
                        <input
                          type="number"
                          value={item.price}
                          onChange={(e) => updateItem(item.id, 'price', parseFloat(e.target.value) || 0)}
                          placeholder="0"
                          className="w-full pl-12 pr-3 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-[#2EC4B6]"
                        />
                      </div>
                    </div>
                    <button
                      onClick={() => removeItem(item.id)}
                      className="p-3 text-gray-400 hover:text-[#E74C3C] transition-colors"
                    >
                      <Trash2 size={20} />
                    </button>
                  </div>
                ))}
              </div>

              {/* Additional Notes */}
              <div className="mt-6 pt-6 border-t border-gray-200">
                <label className="block mb-2 text-sm text-gray-700">Additional Notes & Terms</label>
                <textarea
                  value={notes}
                  onChange={(e) => setNotes(e.target.value)}
                  rows={4}
                  placeholder="Timeline, deliverables, payment terms, etc."
                  className="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-[#2EC4B6] resize-none"
                />
              </div>
            </div>
          </div>

          {/* Right Column - Summary & Actions */}
          <div className="space-y-6">
            {/* Total Summary */}
            <div className="bg-gradient-to-br from-[#0D1B2A] to-[#1B2838] rounded-xl shadow-lg p-6 text-white">
              <h4 className="mb-4">Proposal Summary</h4>
              
              <div className="space-y-3 mb-6">
                {items.map((item) => (
                  <div key={item.id} className="flex justify-between text-sm">
                    <span className="text-gray-300 truncate mr-2">{item.description || 'Untitled Item'}</span>
                    <span className="text-white whitespace-nowrap">AED {item.price.toLocaleString()}</span>
                  </div>
                ))}
              </div>

              <div className="pt-4 border-t border-white/20">
                <div className="flex justify-between items-center">
                  <span className="text-[#2EC4B6]">Total</span>
                  <span className="metric text-3xl">AED {total.toLocaleString()}</span>
                </div>
              </div>
            </div>

            {/* Actions */}
            <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
              <h4 className="mb-4 text-[#0D1B2A]">Actions</h4>
              
              <button className="w-full mb-3 bg-white border-2 border-gray-200 hover:border-[#2EC4B6] text-[#0D1B2A] px-4 py-3 rounded-lg flex items-center justify-center gap-2 transition-colors">
                <FileText size={18} />
                Preview PDF
              </button>

              <button
                onClick={() => {
                  const proposal = {
                    requestId,
                    items,
                    notes,
                    total
                  };
                  ProposalGenerator(proposal);
                  toast.success('Proposal generated and sent successfully!');
                }}
                className="w-full bg-[#2EC4B6] hover:bg-[#26a599] text-white px-4 py-3 rounded-lg flex items-center justify-center gap-2 transition-colors"
              >
                <Send size={18} />
                Generate & Send
              </button>

              <p className="text-xs text-gray-500 mt-4 text-center">
                This will generate a branded PDF and email it to the client
              </p>
            </div>

            {/* Client Info */}
            <div className="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
              <h4 className="mb-3 text-[#0D1B2A] text-sm">Client Information</h4>
              <div className="space-y-2 text-sm">
                <div>
                  <p className="text-gray-600">Company</p>
                  <p className="text-[#0D1B2A]">ABC Trading LLC</p>
                </div>
                <div>
                  <p className="text-gray-600">Contact</p>
                  <p className="text-[#0D1B2A]">contact@abctrading.ae</p>
                </div>
                <div>
                  <p className="text-gray-600">Service Requested</p>
                  <p className="text-[#0D1B2A]">Web Development</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/services/api.ts">
const API_BASE_URL = 'http://localhost:3000/api/v1';

export const api = {
  async request(endpoint: string, options: RequestInit = {}) {
    // Get token from localStorage
    const token = localStorage.getItem('token');
    
    const headers = {
      'Content-Type': 'application/json',
      ...(token ? { Authorization: `Bearer ${token}` } : {}),
      ...options.headers,
    };

    const response = await fetch(`${API_BASE_URL}${endpoint}`, {
      ...options,
      headers,
    });

    const data = await response.json();

    if (!response.ok) {
      // Pass the backend error message
      throw new Error(data.message || 'API request failed');
    }

    return data;
  },

  get(endpoint: string) {
    return this.request(endpoint, { method: 'GET' });
  },

  post(endpoint: string, body: any) {
    return this.request(endpoint, {
      method: 'POST',
      body: JSON.stringify(body),
    });
  },

  patch(endpoint: string, body: any) {
    return this.request(endpoint, {
      method: 'PATCH',
      body: JSON.stringify(body),
    });
  },

  delete(endpoint: string) {
    return this.request(endpoint, { method: 'DELETE' });
  },
};

export default api;
</file>

<file path="src/styles/globals.css">
@import "tailwindcss";

@layer base {
  :root {
    --color-primary: #0D1B2A;
    --color-accent: #2EC4B6;
    --color-success: #2ECC71;
    --color-warning: #F39C12;
    --color-info: #3498DB;
    --color-danger: #E74C3C;
    --color-background: #F5F7FA;
    --color-card: #FFFFFF;
    --color-border: #E2E8F0;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    background-color: var(--color-background);
    color: #1A202C;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-weight: 600;
    color: #1A202C;
  }

  h1 {
    font-size: 2rem;
    line-height: 1.25;
  }

  h2 {
    font-size: 1.5rem;
    line-height: 1.3;
  }

  h3 {
    font-size: 1.25rem;
    line-height: 1.4;
  }

  h4 {
    font-size: 1.125rem;
    line-height: 1.5;
  }

  p {
    font-size: 0.9375rem;
    line-height: 1.6;
    color: #4A5568;
  }

  .metric {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-weight: 700;
  }
}
</file>

<file path="src/vite-env.d.ts">
/// <reference types="vite/client" />

interface ImportMetaEnv {
  readonly VITE_API_URL: string;
  // Add other env variables here if needed
}

interface ImportMeta {
  readonly env: ImportMetaEnv;
}
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,

    /* Paths - Matches alias in vite.config.ts */
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}
</file>

<file path="tsconfig.node.json">
{
  "compilerOptions": {
    "composite": true,
    "skipLibCheck": true,
    "module": "ESNext",
    "moduleResolution": "bundler",
    "allowSyntheticDefaultImports": true,
    "strict": true
  },
  "include": ["vite.config.ts"]
}
</file>

<file path="src/App.tsx">
import React from 'react';
import { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';
import { Toaster } from 'sonner';
import { AuthProvider } from './contexts/AuthContext';
import { ProtectedRoute } from './components/ProtectedRoute';
import { ClientLayout, SidebarLayout } from './layout/Layouts';

// Public Pages
import { Home } from './pages/Home';
import { Login } from './pages/Login';
import { Register } from './pages/Register';
import { ForgotPassword } from './pages/ForgotPassword';
import { PendingApproval } from './pages/PendingApproval';

// Client Pages
import { ClientDashboard } from './pages/ClientDashboard';
import { MyDocuments } from './pages/MyDocuments';
import { MyProfile } from './pages/MyProfile';
import { MyProjects } from './pages/MyProjects';
import { NeedsAssessment } from './pages/NeedsAssessment';
import { ProjectCommandCenter } from './pages/ProjectCommandCenter';

// Agent Pages
import { AgentDashboard } from './pages/AgentDashboard';
import { AgentClients } from './pages/AgentClients';
import { AgentProjects } from './pages/AgentProjects';
import { AgentProfile } from './pages/AgentProfile';
import { ProposalBuilder } from './pages/ProposalBuilder';
import { AgentProjectManagement } from './pages/AgentProjectManagement';

// Admin Pages
import { AdminDashboard } from './pages/AdminDashboard';
import { AdminApprovals } from './pages/AdminApprovals';
import { AdminAgents } from './pages/AdminAgents';
import { AdminRequests } from './pages/AdminRequests';
import { AdminSettings } from './pages/AdminSettings';
import { AdminServices } from './pages/AdminServices';

export default function App() {
  return (
    <BrowserRouter>
      <AuthProvider>
        <div className="min-h-screen">
          <Toaster position="top-right" richColors />
          
          <Routes>
            {/* --- Public Routes (No Layout or specific internal layout) --- */}
            <Route path="/" element={<Home />} />
            <Route path="/login" element={<Login />} />
            <Route path="/register" element={<Register />} />
            <Route path="/forgot-password" element={<ForgotPassword />} />
            <Route path="/pending-approval" element={<PendingApproval />} />

            {/* --- Client Routes (Uses ClientLayout with Header) --- */}
            <Route element={
              <ProtectedRoute allowedRoles={['client']}>
                <ClientLayout />
              </ProtectedRoute>
            }>
              <Route path="/client-dashboard" element={<ClientDashboard />} />
              <Route path="/my-documents" element={<MyDocuments />} />
              <Route path="/my-profile" element={<MyProfile />} />
              <Route path="/my-projects" element={<MyProjects />} />
              <Route path="/needs-assessment" element={<NeedsAssessment />} />
              <Route path="/project/:id" element={<ProjectCommandCenter />} />
            </Route>

            {/* --- Agent Routes (Uses SidebarLayout) --- */}
            <Route element={
              <ProtectedRoute allowedRoles={['agent']}>
                <SidebarLayout role="agent" />
              </ProtectedRoute>
            }>
              <Route path="/agent/dashboard" element={<AgentDashboard />} />
              <Route path="/agent/clients" element={<AgentClients />} />
              <Route path="/agent/projects" element={<AgentProjects />} />
              <Route path="/agent/profile" element={<AgentProfile />} />
              <Route path="/agent/proposal-builder" element={<ProposalBuilder />} />
              <Route path="/agent/project-management/:id" element={<AgentProjectManagement />} />
            </Route>

            {/* --- Admin Routes (Uses SidebarLayout) --- */}
            <Route element={
              <ProtectedRoute allowedRoles={['admin']}>
                <SidebarLayout role="admin" />
              </ProtectedRoute>
            }>
              <Route path="/admin/dashboard" element={<AdminDashboard />} />
              <Route path="/admin/approvals" element={<AdminApprovals />} />
              <Route path="/admin/agents" element={<AdminAgents />} />
              <Route path="/admin/services" element={<AdminServices />} />
              <Route path="/admin/requests" element={<AdminRequests />} />
              <Route path="/admin/settings" element={<AdminSettings />} />
            </Route>

            {/* Catch all */}
            <Route path="*" element={<Navigate to="/" replace />} />
          </Routes>
        </div>
      </AuthProvider>
    </BrowserRouter>
  );
}
</file>

<file path="src/components/ProposalGenerator.tsx">
import React, { useState } from 'react';
import { Save, Loader2, Plus, Trash2, Mail } from 'lucide-react';
import { toast } from 'sonner';
import api from '../lib/api';

interface ProposalItem {
  id: string;
  description: string;
  quantity: number;
  unitPrice: number;
}

interface ProposalGeneratorProps {
  requestId: string;
  clientEmail: string;
  clientName: string;
  serviceCategory: string;
  onClose: () => void;
  onSuccess: () => void;
}

export function ProposalGenerator({ 
  requestId, 
  clientEmail, 
  clientName, 
  serviceCategory,
  onClose,
  onSuccess
}: ProposalGeneratorProps) {
  const [proposalData, setProposalData] = useState({
    title: `${serviceCategory} Proposal`,
    clientName: clientName,
    validUntil: '',
    projectDuration: '',
    deliveryDate: '',
    description: '',
    items: [
      { id: '1', description: 'Initial Setup & Planning', quantity: 1, unitPrice: 500 }
    ] as ProposalItem[],
    terms: 'Payment terms: 50% upfront, 50% upon completion.\nAll deliverables will be provided in agreed formats.\nRevisions included: 2 rounds of revisions.',
    notes: ''
  });

  const [isGenerating, setIsGenerating] = useState(false);

  const addItem = () => {
    const newItem: ProposalItem = {
      id: Date.now().toString(),
      description: '',
      quantity: 1,
      unitPrice: 0
    };
    setProposalData({
      ...proposalData,
      items: [...proposalData.items, newItem]
    });
  };

  const removeItem = (id: string) => {
    setProposalData({
      ...proposalData,
      items: proposalData.items.filter(item => item.id !== id)
    });
  };

  const updateItem = (id: string, field: keyof ProposalItem, value: string | number) => {
    setProposalData({
      ...proposalData,
      items: proposalData.items.map(item =>
        item.id === id ? { ...item, [field]: value } : item
      )
    });
  };

  const calculateSubtotal = () => {
    return proposalData.items.reduce((sum, item) => sum + (item.quantity * item.unitPrice), 0);
  };

  const calculateTax = () => {
    return calculateSubtotal() * 0.1; // 10% tax
  };

  const calculateTotal = () => {
    return calculateSubtotal() + calculateTax();
  };

  const handleGenerate = async () => {
    try {
      setIsGenerating(true);
      
      const backendItems = proposalData.items.map(item => ({
        description: item.description,
        price: item.quantity * item.unitPrice 
      }));

      // Only create, do NOT send email yet
      await api.post('/proposals', {
        requestId,
        items: backendItems
      });

      toast.success('Proposal Generated! You can now view or send it from the dashboard.');
      onSuccess(); // Refresh dashboard
      onClose();
    } catch (error: any) {
      console.error(error);
      toast.error(error.response?.data?.message || 'Failed to generate proposal');
    } finally {
      setIsGenerating(false);
    }
  };

  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto">
      <div className="bg-white rounded-2xl shadow-2xl max-w-5xl w-full my-8">
        {/* Header */}
        <div className="bg-gradient-to-r from-[#2EC4B6] to-[#26a599] p-6 rounded-t-2xl text-white">
          <div className="flex justify-between items-start">
            <div>
              <h2 className="text-2xl font-semibold text-white mb-2">Create Proposal Draft</h2>
              <p className="text-white/90">Prepare proposal for {clientName}</p>
            </div>
            <button
              onClick={onClose}
              className="text-white hover:bg-white/20 rounded-lg p-2 transition-colors"
            >
              â
            </button>
          </div>
        </div>

        {/* Content */}
        <div className="p-6 max-h-[calc(100vh-200px)] overflow-y-auto">
          {/* Basic Information */}
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div>
              <label className="block text-sm font-medium text-[#1A202C] mb-2">Proposal Title</label>
              <input
                type="text"
                value={proposalData.title}
                onChange={(e) => setProposalData({ ...proposalData, title: e.target.value })}
                className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6] focus:ring-2 focus:ring-[#2EC4B6]/20"
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-[#1A202C] mb-2">Client Name</label>
              <input
                type="text"
                value={proposalData.clientName}
                readOnly
                className="w-full px-4 py-2.5 border border-gray-300 rounded-lg bg-gray-50 text-gray-500"
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-[#1A202C] mb-2">Valid Until</label>
              <input
                type="date"
                value={proposalData.validUntil}
                onChange={(e) => setProposalData({ ...proposalData, validUntil: e.target.value })}
                className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6] focus:ring-2 focus:ring-[#2EC4B6]/20"
              />
            </div>

            <div>
              <label className="block text-sm font-medium text-[#1A202C] mb-2">Estimated Delivery Date</label>
              <input
                type="date"
                value={proposalData.deliveryDate}
                onChange={(e) => setProposalData({ ...proposalData, deliveryDate: e.target.value })}
                className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6] focus:ring-2 focus:ring-[#2EC4B6]/20"
              />
            </div>
          </div>

          {/* Project Description */}
          <div className="mb-6">
            <label className="block text-sm font-medium text-[#1A202C] mb-2">Project Description</label>
            <textarea
              value={proposalData.description}
              onChange={(e) => setProposalData({ ...proposalData, description: e.target.value })}
              rows={4}
              placeholder="Describe the project scope, objectives, and deliverables..."
              className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6] focus:ring-2 focus:ring-[#2EC4B6]/20"
            />
          </div>

          {/* Line Items */}
          <div className="mb-6">
            <div className="flex justify-between items-center mb-4">
              <h3 className="text-[#0D1B2A]">Line Items</h3>
              <button
                onClick={addItem}
                className="flex items-center gap-2 text-[#2EC4B6] hover:text-[#26a599] font-medium"
              >
                <Plus size={18} />
                Add Item
              </button>
            </div>

            <div className="space-y-3">
              {proposalData.items.map((item, index) => (
                <div key={item.id} className="flex gap-3 items-start bg-gray-50 p-4 rounded-lg">
                  <div className="flex-1 grid grid-cols-1 md:grid-cols-12 gap-3">
                    <div className="md:col-span-6">
                      <input
                        type="text"
                        placeholder="Description"
                        value={item.description}
                        onChange={(e) => updateItem(item.id, 'description', e.target.value)}
                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6]"
                      />
                    </div>
                    <div className="md:col-span-2">
                      <input
                        type="number"
                        placeholder="Qty"
                        value={item.quantity}
                        onChange={(e) => updateItem(item.id, 'quantity', parseInt(e.target.value) || 0)}
                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6]"
                      />
                    </div>
                    <div className="md:col-span-2">
                      <input
                        type="number"
                        placeholder="Price"
                        value={item.unitPrice}
                        onChange={(e) => updateItem(item.id, 'unitPrice', parseFloat(e.target.value) || 0)}
                        className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6]"
                      />
                    </div>
                    <div className="md:col-span-2">
                      <div className="px-3 py-2 bg-white border border-gray-300 rounded-lg font-medium text-[#1A202C]">
                        ${(item.quantity * item.unitPrice).toFixed(2)}
                      </div>
                    </div>
                  </div>
                  {proposalData.items.length > 1 && (
                    <button
                      onClick={() => removeItem(item.id)}
                      className="p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors"
                    >
                      <Trash2 size={18} />
                    </button>
                  )}
                </div>
              ))}
            </div>

            {/* Totals */}
            <div className="mt-4 bg-gradient-to-br from-gray-50 to-gray-100 p-6 rounded-lg">
              <div className="max-w-md ml-auto space-y-2">
                <div className="flex justify-between text-[#4A5568]">
                  <span>Subtotal:</span>
                  <span className="font-medium">${calculateSubtotal().toFixed(2)}</span>
                </div>
                <div className="flex justify-between text-[#4A5568]">
                  <span>Tax (10%):</span>
                  <span className="font-medium">${calculateTax().toFixed(2)}</span>
                </div>
                <div className="flex justify-between text-xl font-semibold text-[#0D1B2A] pt-2 border-t-2 border-gray-300">
                  <span>Total:</span>
                  <span className="text-[#2EC4B6]">${calculateTotal().toFixed(2)}</span>
                </div>
              </div>
            </div>
          </div>

          {/* Terms & Conditions */}
          <div className="mb-6">
            <label className="block text-sm font-medium text-[#1A202C] mb-2">Terms & Conditions</label>
            <textarea
              value={proposalData.terms}
              onChange={(e) => setProposalData({ ...proposalData, terms: e.target.value })}
              rows={4}
              className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6] focus:ring-2 focus:ring-[#2EC4B6]/20"
            />
          </div>

          {/* Email Preview Info */}
          <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
            <div className="flex items-start gap-3">
              <Mail className="text-blue-600 flex-shrink-0 mt-1" size={20} />
              <div className="flex-1">
                <p className="text-sm font-medium text-blue-900 mb-1">Send to:</p>
                <p className="text-sm text-blue-700">{clientEmail}</p>
                <p className="text-xs text-blue-600 mt-2">
                  This action will generate the PDF draft. You can review and send it from the dashboard.
                </p>
              </div>
            </div>
          </div>
        </div>

        {/* Footer Actions */}
        <div className="border-t border-gray-200 p-6 bg-gray-50 rounded-b-2xl">
          <button
            onClick={handleGenerate}
            disabled={isGenerating}
            className="w-full bg-gradient-to-r from-[#2EC4B6] to-[#26a599] text-white px-6 py-3 rounded-lg hover:shadow-lg transition-all font-medium flex items-center justify-center gap-2 h-[48px] disabled:opacity-50 disabled:cursor-not-allowed"
          >
            {isGenerating ? <Loader2 className="animate-spin" size={20} /> : <Save size={20} />}
            {isGenerating ? 'Generating...' : 'Generate & Save Draft'}
          </button>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/pages/AdminSettings.tsx">
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { Settings } from 'lucide-react';
import { toast } from 'sonner';

export function AdminSettings() {
  const navigate = useNavigate();
  const [settings, setSettings] = useState({
    autoApproval: false,
    emailNotifications: true,
    agentAssignment: 'manual',
    maintenanceMode: false,
    maxProjectsPerAgent: 10,
    sessionTimeout: 30,
  });

  const handleSave = () => {
    toast.success('Settings saved successfully!');
  };

  return (
    <>
      {/* Page Header */}
      <div className="mb-8">
        <h1 className="mb-2 text-[#0D1B2A]">Platform Settings</h1>
        <p className="text-[#4A5568]">Configure system preferences and platform behavior</p>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* Main Settings */}
        <div className="lg:col-span-2 space-y-6">
          {/* User Management */}
          <div className="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
            <div className="flex items-center gap-3 mb-6">
              <Settings className="text-[#3498DB]" size={24} />
              <h3 className="text-[#0D1B2A]">User Management</h3>
            </div>

            <div className="space-y-4">
              <div className="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                <div>
                  <p className="font-medium text-[#1A202C]">Auto-Approve Users</p>
                  <p className="text-sm text-[#4A5568]">Automatically approve new user registrations</p>
                </div>
                <label className="relative inline-flex items-center cursor-pointer">
                  <input
                    type="checkbox"
                    checked={settings.autoApproval}
                    onChange={(e) => setSettings({ ...settings, autoApproval: e.target.checked })}
                    className="sr-only peer"
                  />
                  <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#2EC4B6]/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#2EC4B6]"></div>
                </label>
              </div>

              <div className="p-4 bg-gray-50 rounded-lg">
                <label className="block font-medium text-[#1A202C] mb-2">Session Timeout (minutes)</label>
                <input
                  type="number"
                  value={settings.sessionTimeout}
                  onChange={(e) => setSettings({ ...settings, sessionTimeout: parseInt(e.target.value) })}
                  className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6] focus:ring-2 focus:ring-[#2EC4B6]/20"
                />
              </div>
            </div>
          </div>

          {/* Agent Management */}
          <div className="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
            <div className="flex items-center gap-3 mb-6">
              <Settings className="text-[#3498DB]" size={24} />
              <h3 className="text-[#0D1B2A]">Agent Management</h3>
            </div>

            <div className="space-y-4">
              <div className="p-4 bg-gray-50 rounded-lg">
                <label className="block font-medium text-[#1A202C] mb-2">Agent Assignment</label>
                <select
                  value={settings.agentAssignment}
                  onChange={(e) => setSettings({ ...settings, agentAssignment: e.target.value })}
                  className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6] focus:ring-2 focus:ring-[#2EC4B6]/20"
                >
                  <option value="manual">Manual Assignment</option>
                  <option value="auto">Automatic Assignment</option>
                  <option value="round-robin">Round Robin</option>
                </select>
                <p className="text-sm text-[#4A5568] mt-2">How service requests are assigned to agents</p>
              </div>

              <div className="p-4 bg-gray-50 rounded-lg">
                <label className="block font-medium text-[#1A202C] mb-2">Max Projects Per Agent</label>
                <input
                  type="number"
                  value={settings.maxProjectsPerAgent}
                  onChange={(e) => setSettings({ ...settings, maxProjectsPerAgent: parseInt(e.target.value) })}
                  className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6] focus:ring-2 focus:ring-[#2EC4B6]/20"
                />
              </div>
            </div>
          </div>

          {/* Notifications */}
          <div className="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
            <div className="flex items-center gap-3 mb-6">
              <Settings className="text-[#3498DB]" size={24} />
              <h3 className="text-[#0D1B2A]">Notification Settings</h3>
            </div>

            <div className="space-y-4">
              <div className="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                <div>
                  <p className="font-medium text-[#1A202C]">Email Notifications</p>
                  <p className="text-sm text-[#4A5568]">Send email notifications for system events</p>
                </div>
                <label className="relative inline-flex items-center cursor-pointer">
                  <input
                    type="checkbox"
                    checked={settings.emailNotifications}
                    onChange={(e) => setSettings({ ...settings, emailNotifications: e.target.checked })}
                    className="sr-only peer"
                  />
                  <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#2EC4B6]/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#2EC4B6]"></div>
                </label>
              </div>
            </div>
          </div>

          {/* System */}
          <div className="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
            <div className="flex items-center gap-3 mb-6">
              <Settings className="text-[#3498DB]" size={24} />
              <h3 className="text-[#0D1B2A]">System Settings</h3>
            </div>

            <div className="space-y-4">
              <div className="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                <div>
                  <p className="font-medium text-[#1A202C]">Maintenance Mode</p>
                  <p className="text-sm text-[#4A5568]">Disable platform access for maintenance</p>
                </div>
                <label className="relative inline-flex items-center cursor-pointer">
                  <input
                    type="checkbox"
                    checked={settings.maintenanceMode}
                    onChange={(e) => setSettings({ ...settings, maintenanceMode: e.target.checked })}
                    className="sr-only peer"
                  />
                  <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#E74C3C]/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#E74C3C]"></div>
                </label>
              </div>

              {settings.maintenanceMode && (
                <div className="bg-red-50 border border-red-200 rounded-lg p-4">
                  <p className="text-sm text-red-800 font-medium">â ï¸ Maintenance mode is enabled</p>
                  <p className="text-xs text-red-600 mt-1">Only administrators can access the platform</p>
                </div>
              )}
            </div>
          </div>
        </div>

        {/* Sidebar Info */}
        <div className="space-y-6">
          {/* Platform Status */}
          <div className="bg-gradient-to-br from-[#2EC4B6] to-[#26a599] rounded-xl p-6 text-white shadow-lg">
            <h4 className="text-white mb-4">Platform Status</h4>
            <div className="space-y-3">
              <div className="flex justify-between items-center">
                <span className="text-sm text-white/90">Server Status</span>
                <span className="font-semibold">Online</span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm text-white/90">Database</span>
                <span className="font-semibold">Connected</span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm text-white/90">Last Backup</span>
                <span className="font-semibold">2h ago</span>
              </div>
              <div className="flex justify-between items-center pt-3 border-t border-white/20">
                <span className="text-sm text-white/90">Uptime</span>
                <span className="font-semibold">99.9%</span>
              </div>
            </div>
          </div>

          {/* Quick Stats */}
          <div className="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
            <h4 className="text-[#0D1B2A] mb-4">Quick Stats</h4>
            <div className="space-y-3">
              <div className="flex justify-between">
                <span className="text-sm text-[#4A5568]">Total Users</span>
                <span className="font-semibold text-[#1A202C]">156</span>
              </div>
              <div className="flex justify-between">
                <span className="text-sm text-[#4A5568]">Active Agents</span>
                <span className="font-semibold text-[#1A202C]">12</span>
              </div>
              <div className="flex justify-between">
                <span className="text-sm text-[#4A5568]">Active Clients</span>
                <span className="font-semibold text-[#1A202C]">144</span>
              </div>
              <div className="flex justify-between pt-3 border-t border-gray-200">
                <span className="text-sm text-[#4A5568]">Storage Used</span>
                <span className="font-semibold text-[#1A202C]">2.4 GB</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Save Button */}
      <div className="mt-6">
        <button
          onClick={handleSave}
          className="w-full md:w-auto bg-[#2EC4B6] hover:bg-[#26a599] text-white px-8 py-3 rounded-lg transition-all font-medium h-[48px]"
        >
          Save Settings
        </button>
      </div>
    </>
  );
}
</file>

<file path="src/pages/AgentProjectManagement.tsx">
import React, { useState, useEffect } from 'react';
import { useNavigate, useParams } from 'react-router-dom';
import { ArrowLeft, Upload, Calendar, Settings, Lock, FileText, Download, Loader2, Eye, EyeOff } from 'lucide-react';
import { StatusBadge } from '../components/StatusBadge';
import { ProgressCircle } from '../components/ProgressCircle';
import { ProjectNotes } from '../components/ProjectNotes';
import api from '../lib/api';
import { toast } from 'sonner';

export function AgentProjectManagement() {
  const navigate = useNavigate();
  const { id } = useParams<{ id: string }>();
  const [loading, setLoading] = useState(true);
  
  // Data State
  const [project, setProject] = useState<any>(null);
  const [assets, setAssets] = useState<any[]>([]);
  const [vaultData, setVaultData] = useState<string | null>(null);
  const [showVault, setShowVault] = useState(false);

  // Form State
  const [progress, setProgress] = useState(0);
  const [ecd, setEcd] = useState('');
  const [isSaving, setIsSaving] = useState(false);
  const [isUploading, setIsUploading] = useState(false);

  useEffect(() => {
    fetchProjectData();
  }, [id]);

  const fetchProjectData = async () => {
    try {
      const res = await api.get(`/projects/${id}`);
      const projectData = res.data;
      
      setProject(projectData);
      setProgress(projectData.progressPercent || 0);
      setEcd(projectData.ecd || '');
      setAssets(projectData.Assets || []); 
    } catch (error) {
      toast.error("Failed to load project details");
      navigate('/agent/dashboard');
    } finally {
      setLoading(false);
    }
  };

  const handleSaveStatus = async () => {
    try {
      setIsSaving(true);
      await api.patch(`/projects/${id}`, {
        progressPercent: progress,
        ecd: ecd
      });
      toast.success("Project status updated successfully");
      // Update local state to reflect changes in UI instantly
      setProject((prev: any) => ({ ...prev, progressPercent: progress, ecd: ecd }));
    } catch (error) {
      toast.error("Failed to update status");
    } finally {
      setIsSaving(false);
    }
  };

  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {
    if (!e.target.files || e.target.files.length === 0) return;
    
    const file = e.target.files[0];
    const formData = new FormData();
    formData.append('file', file);

    try {
      setIsUploading(true);
      // Query param type=Deliverable marks this as an agent upload
      // Content-Type is undefined to let browser set boundary
      const res = await api.post(`/projects/${id}/assets?type=Deliverable`, formData, {
        headers: { 'Content-Type': undefined } as any
      });
      
      toast.success("File uploaded successfully");
      setAssets([...assets, res.data]); // Add new asset to list
    } catch (error) {
      toast.error("Failed to upload file");
    } finally {
      setIsUploading(false);
      e.target.value = ''; // Reset input
    }
  };

  const handleToggleVault = async () => {
    if (showVault) {
      setShowVault(false);
      return;
    }

    try {
      const res = await api.get(`/projects/${id}/vault`);
      setVaultData(res.data.vault);
      setShowVault(true);
    } catch (error) {
      toast.error("Failed to access client vault");
    }
  };

  const getFileUrl = (path: string) => {
    const baseUrl = import.meta.env.VITE_API_URL 
      ? import.meta.env.VITE_API_URL.replace('/api/v1', '') 
      : 'http://localhost:3000';
    return `${baseUrl}/${path.replace(/\\/g, '/')}`;
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center h-screen bg-[#F8F9FA]">
        <Loader2 className="w-8 h-8 text-[#2EC4B6] animate-spin" />
      </div>
    );
  }

  // Filter assets
  const clientAssets = assets.filter(a => a.type === 'ClientAsset');
  const deliverables = assets.filter(a => a.type === 'Deliverable');

  return (
    <div className="min-h-screen bg-[#F8F9FA]">
      {/* Header */}
      <header className="bg-[#0D1B2A] text-white py-6 px-8 shadow-lg">
        <div className="max-w-7xl mx-auto">
          <button
            onClick={() => navigate('/agent/dashboard')}
            className="text-[#2EC4B6] hover:text-white mb-4 flex items-center gap-2 transition-colors"
          >
            <ArrowLeft size={20} />
            Back to Dashboard
          </button>
          <div className="flex justify-between items-start">
            <div>
              <h2 className="mb-2 text-2xl font-bold text-white">{project?.Request?.Category?.name || 'Project'} Request</h2>
              <p className="text-gray-400 text-sm">Client: {project?.Client?.companyName || 'Unknown'}</p>
            </div>
            <StatusBadge status={project?.globalStatus?.toLowerCase() || 'pending'} />
          </div>
        </div>
      </header>

      <div className="max-w-7xl mx-auto p-8">
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
          {/* Left Column - Controls */}
          <div className="lg:col-span-2 space-y-6">
            
            {/* Update Status Card */}
            <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
              <div className="flex items-center gap-3 mb-6">
                <Settings className="text-[#2EC4B6]" size={24} />
                <h3 className="text-[#0D1B2A] font-semibold">Update Project Status</h3>
              </div>

              <div className="mb-6">
                <label className="block mb-3 text-sm text-gray-700">Progress Percentage</label>
                <div className="flex items-center gap-4">
                  <input
                    type="range"
                    min="0"
                    max="100"
                    value={progress}
                    onChange={(e) => setProgress(parseInt(e.target.value))}
                    className="flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-[#2EC4B6]"
                  />
                  <div className="w-16 text-center font-mono font-bold text-[#2EC4B6]">
                    {progress}%
                  </div>
                </div>
              </div>

              <div className="mb-6">
                <label className="block mb-3 text-sm text-gray-700">Estimated Completion Date</label>
                <div className="relative">
                  <Calendar className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400" size={20} />
                  <input
                    type="date"
                    value={ecd}
                    onChange={(e) => setEcd(e.target.value)}
                    className="w-full pl-11 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-[#2EC4B6]"
                  />
                </div>
              </div>

              <button 
                onClick={handleSaveStatus}
                disabled={isSaving}
                className="w-full bg-[#2EC4B6] hover:bg-[#26a599] text-white px-4 py-3 rounded-lg transition-colors disabled:opacity-70 flex justify-center items-center gap-2"
              >
                {isSaving ? <Loader2 className="animate-spin" size={20} /> : 'Save Changes'}
              </button>
            </div>

            {/* Upload Deliverables */}
            <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
              <div className="flex items-center gap-3 mb-6">
                <Upload className="text-[#2EC4B6]" size={24} />
                <h3 className="text-[#0D1B2A] font-semibold">Upload Deliverables</h3>
              </div>

              <div className="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-[#2EC4B6] transition-colors relative">
                {isUploading ? (
                  <div className="flex flex-col items-center">
                    <Loader2 className="animate-spin text-[#2EC4B6] mb-2" size={32} />
                    <p className="text-gray-500">Uploading...</p>
                  </div>
                ) : (
                  <>
                    <input 
                      type="file" 
                      onChange={handleFileUpload}
                      className="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                    />
                    <Upload className="mx-auto mb-4 text-gray-400" size={48} />
                    <p className="text-gray-700 mb-2 font-medium">Click or Drag to Upload</p>
                    <p className="text-xs text-gray-500">Supported: PDF, ZIP, PNG, JPG</p>
                  </>
                )}
              </div>

              {/* List Uploaded Deliverables */}
              {deliverables.length > 0 && (
                <div className="mt-6 space-y-2">
                  <h4 className="text-sm font-semibold text-gray-700 mb-2">Uploaded Files</h4>
                  {deliverables.map((file, idx) => (
                    <div key={idx} className="flex justify-between items-center p-3 bg-gray-50 rounded border border-gray-100">
                      <div className="flex items-center gap-3 overflow-hidden">
                        <FileText size={16} className="text-[#2EC4B6] flex-shrink-0" />
                        <span className="text-sm text-gray-700 truncate">{file.fileName}</span>
                      </div>
                      <a 
                        href={getFileUrl(file.filePath)} 
                        target="_blank" 
                        rel="noopener noreferrer"
                        className="text-gray-400 hover:text-[#2EC4B6]"
                      >
                        <Download size={16} />
                      </a>
                    </div>
                  ))}
                </div>
              )}
            </div>

            {/* Client Assets - Added Back */}
            <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
              <h3 className="mb-4 text-[#0D1B2A] font-semibold">Client Assets</h3>
              {clientAssets.length === 0 ? (
                <p className="text-sm text-gray-500 italic">No assets uploaded by client yet.</p>
              ) : (
                <div className="space-y-2">
                  {clientAssets.map((asset, idx) => (
                    <div key={idx} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-100">
                      <div className="flex items-center gap-3 overflow-hidden">
                        <div className="w-8 h-8 bg-blue-50 rounded flex items-center justify-center text-blue-500 flex-shrink-0">
                          <FileText size={16} />
                        </div>
                        <div className="min-w-0">
                          <p className="text-[#0D1B2A] text-sm font-medium truncate">{asset.fileName}</p>
                          <p className="text-xs text-gray-500">
                            {new Date(asset.createdAt).toLocaleDateString()}
                          </p>
                        </div>
                      </div>
                      <a
                        href={getFileUrl(asset.filePath)}
                        target="_blank"
                        rel="noopener noreferrer" 
                        className="text-[#2EC4B6] hover:text-[#26a599] transition-colors p-2 rounded hover:bg-gray-100"
                        title="Download Asset"
                      >
                        <Download size={16} />
                      </a>
                    </div>
                  ))}
                </div>
              )}
            </div>

            {/* Project Notes */}
            <ProjectNotes projectId={id!} />

          </div>

          {/* Right Column - Preview & Info */}
          <div className="space-y-6">
            
            {/* Progress Preview */}
            <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
              <h4 className="mb-6 text-[#0D1B2A] text-center font-semibold">Current Progress</h4>
              <div className="flex justify-center mb-4">
                <ProgressCircle percentage={progress} size={140} />
              </div>
              <div className="bg-gray-50 rounded-lg p-3 text-center">
                <p className="text-xs text-gray-500">Client View Preview</p>
              </div>
            </div>

            {/* ECD Preview */}
            <div className="bg-gradient-to-br from-[#2EC4B6] to-[#26a599] rounded-xl p-6 shadow-lg text-white">
              <div className="flex items-center gap-3 mb-3">
                <Calendar size={24} />
                <h4 className="font-semibold">Target Completion</h4>
              </div>
              <p className="text-2xl font-bold text-white">
                {ecd ? new Date(ecd).toLocaleDateString('en-US', { 
                  month: 'short', 
                  day: 'numeric', 
                  year: 'numeric' 
                }) : 'Not Set'}
              </p>
              {ecd && (
                <p className="text-sm text-white mt-2">
                  {Math.ceil((new Date(ecd).getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24))} days remaining
                </p>
              )}
            </div>

            {/* Project Stats */}
            <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
              <h4 className="mb-4 text-[#0D1B2A] font-semibold">Project Stats</h4>
              <div className="space-y-3 text-sm">
                <div className="flex justify-between items-center">
                  <span className="text-gray-600">Files Uploaded</span>
                  <span className="font-bold text-[#0D1B2A]">{deliverables.length}</span>
                </div>
                <div className="flex justify-between items-center">
                  <span className="text-gray-600">Client Assets</span>
                  <span className="font-bold text-[#0D1B2A]">{clientAssets.length}</span>
                </div>
                <div className="flex justify-between items-center">
                  <span className="text-gray-600">Days Active</span>
                  <span className="font-bold text-[#0D1B2A]">
                    {Math.floor((new Date().getTime() - new Date(project?.createdAt).getTime()) / (1000 * 3600 * 24))}
                  </span>
                </div>
              </div>
            </div>

            {/* Credentials Access */}
            <div className="bg-gradient-to-br from-[#0D1B2A] to-[#1B2838] rounded-xl p-6 shadow-lg text-white border border-gray-700">
              <div className="flex items-center gap-2 mb-3">
                <Lock size={20} className="text-[#2EC4B6]" />
                <h4 className="font-semibold">Client Credentials</h4>
              </div>
              
              {showVault ? (
                <div className="bg-black/30 p-3 rounded mb-4 break-all">
                  <p className="text-sm font-mono text-[#2EC4B6] whitespace-pre-wrap">{vaultData || "No credentials found."}</p>
                </div>
              ) : (
                <p className="text-sm text-gray-300 mb-4">
                  Access securely stored client credentials for this project.
                </p>
              )}

              <button 
                onClick={handleToggleVault}
                className="w-full bg-white/10 hover:bg-white/20 text-white font-medium px-4 py-2 rounded-lg transition-colors flex items-center justify-center gap-2 text-sm"
              >
                {showVault ? <EyeOff size={16} /> : <Eye size={16} />}
                {showVault ? 'Hide Credentials' : 'View Vault'}
              </button>
            </div>

          </div>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/pages/Login.tsx">
import React, { useState } from 'react';
import { useNavigate, useLocation } from 'react-router-dom';
import { Eye, EyeOff } from 'lucide-react';
import { useAuth } from '../contexts/AuthContext';
import { toast } from 'sonner';
import logoImage from 'figma:asset/8c308caf909810f493480578c4eab6aa4f6235bf.png';

export function Login() {
  const navigate = useNavigate();
  const location = useLocation();
  const { login } = useAuth();
  
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [showPassword, setShowPassword] = useState(false);
  const [isLoading, setIsLoading] = useState(false);
  const [errors, setErrors] = useState<{ email?: string; password?: string }>({});

  const validateForm = () => {
    const newErrors: { email?: string; password?: string } = {};

    if (!email.trim()) {
      newErrors.email = 'Email is required';
    } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
      newErrors.email = 'Please enter a valid email';
    }

    if (!password) {
      newErrors.password = 'Password is required';
    }

    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    
    if (!validateForm()) {
      return;
    }

    setIsLoading(true);
    
    try {
      // 1. Attempt login via API
      await login(email, password);
      
      toast.success('Login successful!');
      
      // 2. Retrieve user data to determine redirect path
      // We grab it from localStorage because state updates are async
      const storedUser = localStorage.getItem('user');
      const userData = storedUser ? JSON.parse(storedUser) : null;
      const role = userData?.role || 'client';

      // 3. Determine destination
      let destination = '/client-dashboard';
      if (role === 'admin') destination = '/admin/dashboard';
      else if (role === 'agent') destination = '/agent/dashboard';
      
      // 4. Handle "Redirect Back" logic or go to dashboard
      const from = location.state?.from?.pathname || destination;
      navigate(from);

    } catch (error: any) {
      // Handle specific backend errors
      const errorMessage = error.message || 'Invalid email or password';
      
      if (errorMessage.includes('Pending Approval')) {
        toast.warning('Account Under Review', {
          description: 'Your account is currently pending administrator approval.'
        });
      } else {
        toast.error(errorMessage);
      }
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-[#F5F7FA] to-[#E2E8F0] flex flex-col items-center justify-center px-4 py-8 sm:px-6 lg:px-8">
      <div className="w-full max-w-md">
        {/* Logo and Header */}
        <div className="mb-8 text-center">
          <button 
            onClick={() => navigate('/')}
            className="flex items-center justify-center gap-2 mb-6 mx-auto hover:opacity-80 transition-opacity"
          >
            <img src={logoImage} alt="BizTech" className="h-8 sm:h-10" />
          </button>
          
          <h1 className="mb-2 text-[#1A202C]">Welcome Back</h1>
          <p className="text-[#4A5568] text-sm sm:text-base">Sign in to access your business hub</p>
        </div>

        {/* Login Card */}
        <div className="bg-white rounded-xl shadow-lg border border-gray-200 p-6 sm:p-8">
          <div className="mb-6">
            <h2 className="mb-1 text-[#1A202C]">Sign In</h2>
            <p className="text-sm text-[#4A5568]">Enter your credentials to continue</p>
          </div>

          <form onSubmit={handleSubmit} className="space-y-5">
            {/* Email Field */}
            <div>
              <label htmlFor="email" className="block text-sm text-[#1A202C] mb-2">
                Email Address
              </label>
              <input
                id="email"
                type="email"
                value={email}
                onChange={(e) => {
                  setEmail(e.target.value);
                  if (errors.email) setErrors({ ...errors, email: undefined });
                }}
                placeholder="you@company.com"
                className={`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-all text-[#1A202C] placeholder:text-gray-400 ${
                  errors.email
                    ? 'border-[#E74C3C] focus:ring-[#E74C3C]/20'
                    : 'border-gray-300 focus:border-[#2EC4B6] focus:ring-[#2EC4B6]/20'
                }`}
              />
              {errors.email && (
                <p className="mt-1.5 text-xs text-[#E74C3C]">{errors.email}</p>
              )}
            </div>

            {/* Password Field */}
            <div>
              <div className="flex items-center justify-between mb-2">
                <label htmlFor="password" className="block text-sm text-[#1A202C]">
                  Password
                </label>
                <button
                  type="button"
                  onClick={() => navigate('/forgot-password')}
                  className="text-xs text-[#2EC4B6] hover:text-[#26a599] transition-colors"
                >
                  Forgot?
                </button>
              </div>
              <div className="relative">
                <input
                  id="password"
                  type={showPassword ? 'text' : 'password'}
                  value={password}
                  onChange={(e) => {
                    setPassword(e.target.value);
                    if (errors.password) setErrors({ ...errors, password: undefined });
                  }}
                  placeholder="Enter your password"
                  className={`w-full px-4 py-3 pr-12 border rounded-lg focus:outline-none focus:ring-2 transition-all text-[#1A202C] placeholder:text-gray-400 ${
                    errors.password
                      ? 'border-[#E74C3C] focus:ring-[#E74C3C]/20'
                      : 'border-gray-300 focus:border-[#2EC4B6] focus:ring-[#2EC4B6]/20'
                  }`}
                />
                <button
                  type="button"
                  onClick={() => setShowPassword(!showPassword)}
                  className="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors p-1"
                  aria-label={showPassword ? 'Hide password' : 'Show password'}
                >
                  {showPassword ? <EyeOff size={20} /> : <Eye size={20} />}
                </button>
              </div>
              {errors.password && (
                <p className="mt-1.5 text-xs text-[#E74C3C]">{errors.password}</p>
              )}
            </div>

            {/* Sign In Button */}
            <button
              type="submit"
              disabled={isLoading}
              className="w-full bg-gradient-to-r from-[#0D1B2A] to-[#1a2d42] hover:from-[#1a2d42] hover:to-[#0D1B2A] text-white py-3 rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02] active:scale-[0.98]"
            >
              {isLoading ? (
                <span className="flex items-center justify-center gap-2">
                  <svg className="animate-spin h-5 w-5" viewBox="0 0 24 24">
                    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" fill="none" />
                    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
                  </svg>
                  Signing in...
                </span>
              ) : (
                'Sign In'
              )}
            </button>
          </form>

          {/* Divider */}
          <div className="my-6 flex items-center gap-4">
            <div className="flex-1 h-px bg-gray-200"></div>
            <span className="text-xs text-gray-500">New to BizSetup?</span>
            <div className="flex-1 h-px bg-gray-200"></div>
          </div>

          {/* Sign Up Link */}
          <button
            onClick={() => navigate('/register')}
            className="w-full border-2 border-[#2EC4B6] text-[#2EC4B6] hover:bg-[#2EC4B6] hover:text-white py-3 rounded-lg transition-all transform hover:scale-[1.02] active:scale-[0.98]"
          >
            Create an Account
          </button>
        </div>

        {/* Footer Note */}
        <p className="mt-6 text-xs text-[#718096] text-center">
          By signing in, you agree to our{' '}
          <button 
            onClick={() => alert('Terms of Service - Coming Soon')}
            className="text-[#2EC4B6] hover:underline"
          >
            Terms of Service
          </button>
          {' '}and{' '}
          <button 
            onClick={() => alert('Privacy Policy - Coming Soon')}
            className="text-[#2EC4B6] hover:underline"
          >
            Privacy Policy
          </button>
        </p>
      </div>
    </div>
  );
}
</file>

<file path="src/pages/MyProfile.tsx">
import { useState, useEffect } from 'react';
import { Edit2, Save, X as Mail, Building, User as UserIcon, Shield, Loader2, Phone, LogOut } from 'lucide-react';
import { useAuth } from '../contexts/AuthContext';
import { ProfileFormData } from '../types';
import api from '../lib/api';
import { toast } from 'sonner';


export function MyProfile() {
 
  const { user, updateUser } = useAuth(); // Get logout
  const [isEditing, setIsEditing] = useState(false);
  const [loading, setLoading] = useState(true);

  const [formData, setFormData] = useState<ProfileFormData>({
    fullName: '',
    email: '',
    phone: '',
    companyName: '',
    industry: '',
    companySize: '',
    address: '',
    currentPassword: '',
    newPassword: '',
    confirmPassword: ''
  });

  useEffect(() => {
    const fetchProfile = async () => {
      try {
        const initialData = {
          fullName: user?.name || '',
          email: user?.email || '',
          phone: user?.phone || '',
          companyName: user?.company || '',
          industry: '',
          companySize: '',
          address: '',
          websiteUrl: ''
        };

        const response = await api.get('/clients/me');
        const clientData = response.data;

        setFormData({
          ...initialData,
          companyName: clientData.companyName || initialData.companyName,
          industry: clientData.industry || '',
          address: clientData.websiteUrl || '', 
        });

      } catch (error) {
        console.error("Failed to fetch profile:", error);
        if (user) {
          setFormData(prev => ({
            ...prev,
            fullName: user.name,
            email: user.email,
            companyName: user.company || ''
          }));
        }
      } finally {
        setLoading(false);
      }
    };

    fetchProfile();
  }, [user]);

  const handleSave = async () => {
    try {
      await api.put('/clients/me', {
        industry: formData.industry,
        websiteUrl: formData.address 
      });

      updateUser({
        name: formData.fullName,
        phone: formData.phone,
        company: formData.companyName
      });

      toast.success("Profile updated successfully!");
      setIsEditing(false);
    } catch (error) {
      console.error("Update failed", error);
      toast.error("Failed to update profile. Some fields may not be editable.");
    }
  };

  if (loading) {
    return (
      <div className="min-h-screen bg-[#F5F7FA] flex items-center justify-center">
        <Loader2 className="w-8 h-8 text-[#2EC4B6] animate-spin" />
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-[#F5F7FA]">
   

      {/* Profile Content */}
      <div className="max-w-5xl mx-auto px-4 sm:px-6 py-6 sm:py-8">
        {/* Page Header */}
        <div className="flex justify-between items-start mb-8">
          <div>
            <h1 className="mb-2 text-[#0D1B2A]">My Profile</h1>
            <p className="text-[#4A5568]">Manage your account information and preferences</p>
          </div>
          <button
            onClick={() => setIsEditing(!isEditing)}
            className="flex items-center gap-2 px-6 py-2.5 rounded-lg font-medium transition-all h-[44px] border-2 border-gray-200 text-[#1A202C] hover:border-[#2EC4B6] hover:bg-[#F0FDFA]"
          >
            <Edit2 size={18} />
            {isEditing ? 'Cancel Edit' : 'Edit Profile'}
          </button>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
          {/* Left Column - Profile Card */}
          <div className="lg:col-span-1">
            <div className="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
              <div className="text-center mb-6">
                <div className="w-24 h-24 bg-gradient-to-br from-[#2EC4B6] to-[#26a599] rounded-full mx-auto mb-4 flex items-center justify-center text-white text-3xl font-semibold uppercase">
                  {formData.fullName.charAt(0) || 'U'}
                </div>
                <h3 className="text-[#0D1B2A] mb-1">{formData.fullName}</h3>
                <p className="text-sm text-[#4A5568]">{formData.companyName}</p>
              </div>

              <div className="space-y-4 pt-4 border-t border-gray-200">
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 bg-[#2EC4B6]/10 rounded-lg flex items-center justify-center">
                    <Mail className="text-[#2EC4B6]" size={18} />
                  </div>
                  <div className="flex-1 min-w-0">
                    <p className="text-xs text-[#4A5568]">Email</p>
                    <p className="text-sm font-medium text-[#1A202C] truncate" title={formData.email}>{formData.email}</p>
                  </div>
                </div>

                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 bg-[#3498DB]/10 rounded-lg flex items-center justify-center">
                    <Building className="text-[#3498DB]" size={18} />
                  </div>
                  <div className="flex-1">
                    <p className="text-xs text-[#4A5568]">Industry</p>
                    <p className="text-sm font-medium text-[#1A202C]">{formData.industry || 'Not set'}</p>
                  </div>
                </div>

                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 bg-[#F39C12]/10 rounded-lg flex items-center justify-center">
                    <UserIcon className="text-[#F39C12]" size={18} />
                  </div>
                  <div className="flex-1">
                    <p className="text-xs text-[#4A5568]">Role</p>
                    <p className="text-sm font-medium text-[#1A202C]">Admin / Owner</p>
                  </div>
                </div>
              </div>
            </div>

            {/* Account Stats */}
            <div className="bg-gradient-to-br from-[#0D1B2A] to-[#1a2d42] rounded-xl p-6 text-white shadow-lg mt-6">
              <h4 className="text-white mb-4">Account Stats</h4>
              <div className="space-y-3">
                <div className="flex justify-between items-center">
                  <span className="text-sm text-gray-300">Member Since</span>
                  <span className="font-semibold">
                    {new Date().getFullYear()}
                  </span>
                </div>
              </div>
            </div>
          </div>

          {/* Right Column - Details */}
          <div className="lg:col-span-2 space-y-6">
            {/* Personal Information */}
            <div className="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
              <h3 className="text-[#0D1B2A] mb-6">Personal Information</h3>
              
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label className="block text-sm font-medium text-[#1A202C] mb-2">Full Name</label>
                  {isEditing ? (
                    <input
                      type="text"
                      value={formData.fullName}
                      onChange={(e) => setFormData({ ...formData, fullName: e.target.value })}
                      className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6]"
                    />
                  ) : (
                    <p className="text-[#4A5568] bg-gray-50 px-4 py-2.5 rounded-lg">{formData.fullName}</p>
                  )}
                </div>

                <div>
                  <label className="block text-sm font-medium text-[#1A202C] mb-2">Email Address</label>
                  {isEditing ? (
                    <input
                      type="email"
                      value={formData.email}
                      disabled
                      className="w-full px-4 py-2.5 border border-gray-300 rounded-lg bg-gray-100 text-gray-500 cursor-not-allowed"
                      title="Email cannot be changed directly"
                    />
                  ) : (
                    <p className="text-[#4A5568] bg-gray-50 px-4 py-2.5 rounded-lg">{formData.email}</p>
                  )}
                </div>

                <div>
                  <label className="block text-sm font-medium text-[#1A202C] mb-2">Phone Number</label>
                  {isEditing ? (
                    <input
                      type="tel"
                      value={formData.phone}
                      onChange={(e) => setFormData({ ...formData, phone: e.target.value })}
                      className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6]"
                    />
                  ) : (
                    <p className="text-[#4A5568] bg-gray-50 px-4 py-2.5 rounded-lg">{formData.phone || 'N/A'}</p>
                  )}
                </div>

                <div>
                  <label className="block text-sm font-medium text-[#1A202C] mb-2">Industry</label>
                  {isEditing ? (
                    <input
                      type="text"
                      value={formData.industry}
                      onChange={(e) => setFormData({ ...formData, industry: e.target.value })}
                      className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6]"
                    />
                  ) : (
                    <p className="text-[#4A5568] bg-gray-50 px-4 py-2.5 rounded-lg">{formData.industry || 'N/A'}</p>
                  )}
                </div>
              </div>
            </div>

            {/* Business Information */}
            <div className="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
              <h3 className="text-[#0D1B2A] mb-6">Business Information</h3>
              
              <div className="space-y-6">
                <div>
                  <label className="block text-sm font-medium text-[#1A202C] mb-2">Company Name</label>
                  <p className="text-[#4A5568] bg-gray-50 px-4 py-2.5 rounded-lg">{formData.companyName}</p>
                </div>

                <div>
                  <label className="block text-sm font-medium text-[#1A202C] mb-2">Website / Address</label>
                  {isEditing ? (
                    <textarea
                      value={formData.address}
                      onChange={(e) => setFormData({ ...formData, address: e.target.value })}
                      rows={2}
                      className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6]"
                    />
                  ) : (
                    <p className="text-[#4A5568] bg-gray-50 px-4 py-2.5 rounded-lg">{formData.address || 'N/A'}</p>
                  )}
                </div>
              </div>
            </div>

            {/* Security Settings */}
            <div className="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
              <div className="flex items-center gap-3 mb-6">
                <Shield className="text-[#2EC4B6]" size={24} />
                <h3 className="text-[#0D1B2A]">Security Settings</h3>
              </div>
              
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium text-[#1A202C] mb-2">Change Password</label>
                  <input
                    type="password"
                    placeholder="Current password"
                    className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6] mb-3"
                    disabled={!isEditing}
                  />
                  <input
                    type="password"
                    placeholder="New password"
                    className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6]"
                    disabled={!isEditing}
                  />
                </div>

                <button 
                  className="w-full bg-gray-100 text-gray-500 py-3 rounded-lg font-medium mt-4 cursor-not-allowed"
                  disabled
                >
                  Update Password (Contact Admin)
                </button>
              </div>
            </div>

            {/* Save Changes */}
            {isEditing && (
              <div className="flex gap-4">
                <button
                  onClick={handleSave}
                  className="flex-1 bg-[#2EC4B6] hover:bg-[#26a599] text-white py-3 rounded-lg transition-all font-medium h-[48px] flex items-center justify-center gap-2"
                >
                  <Save size={18} />
                  Save Changes
                </button>
                <button
                  onClick={() => setIsEditing(false)}
                  className="flex-1 bg-white border-2 border-gray-300 text-[#1A202C] py-3 rounded-lg hover:bg-gray-50 transition-all font-medium h-[48px]"
                >
                  Cancel
                </button>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/pages/MyProjects.tsx">
import React, { useEffect, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { Calendar, TrendingUp, ExternalLink, Menu, X, Loader2, Briefcase, LogOut, User as UserIcon } from 'lucide-react';
import { StatusBadge } from '../components/StatusBadge';
import { ProgressCircle } from '../components/ProgressCircle';
import { Project } from '../types';
import api from '../lib/api';
import { toast } from 'sonner';


export function MyProjects() {
  const navigate = useNavigate();
  const [projects, setProjects] = useState<Project[]>([]);
  const [loading, setLoading] = useState(true);

  // Helper to map backend status to frontend badge style
  const mapStatus = (status: string) => {
    const lower = status?.toLowerCase() || 'pending';
    if (lower === 'pending') return 'pending';
    if (lower === 'in progress') return 'in-progress';
    if (lower === 'delivered') return 'delivered';
    if (lower === 'completed') return 'approved';
    return 'pending';
  };

  useEffect(() => {
    const fetchProjects = async () => {
      try {
        const response = await api.get('/projects');
        
        // Map backend response to frontend Project interface
        const mappedProjects: Project[] = response.data.map((p: any) => ({
          id: p.id.toString(),
          name: `Project #${p.id} - ${p.Request?.Category?.name || 'Service'}`,
          client: p.Client?.companyName || 'My Company',
          category: p.Request?.Category?.name || 'General Service',
          status: mapStatus(p.globalStatus),
          progress: p.progressPercent || 0,
          startDate: new Date(p.createdAt).toLocaleDateString(),
          estimatedCompletion: p.ecd ? new Date(p.ecd).toLocaleDateString() : 'TBD',
          agent: p.Agent?.fullName || 'Unassigned',
          budget: p.Request?.budget ? `$${p.Request.budget}` : 'N/A',
          milestones: [], 
        }));

        setProjects(mappedProjects);
      } catch (error) {
        console.error('Failed to fetch projects:', error);
        toast.error('Failed to load projects');
      } finally {
        setLoading(false);
      }
    };

    fetchProjects();
  }, []);

  if (loading) {
    return (
      <div className="min-h-screen bg-[#F5F7FA] flex items-center justify-center">
        <Loader2 className="w-8 h-8 text-[#2EC4B6] animate-spin" />
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-[#F5F7FA]">


      {/* Rest of the component ... */}
      <div className="max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8">
        <div className="mb-8">
          <h1 className="mb-2 text-[#0D1B2A]">My Projects</h1>
          <p className="text-[#4A5568]">Track progress and manage your active projects</p>
        </div>

        {/* Project Stats */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
          <div className="bg-white rounded-lg border border-gray-200 p-5 shadow-sm">
            <p className="text-sm text-[#4A5568] mb-2">Active Projects</p>
            <p className="text-3xl font-semibold text-[#2EC4B6]">
              {projects.filter(p => p.status === 'in-progress' || p.status === 'pending').length}
            </p>
          </div>
          <div className="bg-white rounded-lg border border-gray-200 p-5 shadow-sm">
            <p className="text-sm text-[#4A5568] mb-2">Completed</p>
            <p className="text-3xl font-semibold text-[#2ECC71]">
              {projects.filter(p => p.status === 'delivered' || p.status === 'approved').length}
            </p>
          </div>
          <div className="bg-white rounded-lg border border-gray-200 p-5 shadow-sm">
            <p className="text-sm text-[#4A5568] mb-2">Total Projects</p>
            <p className="text-3xl font-semibold text-[#0D1B2A]">{projects.length}</p>
          </div>
          <div className="bg-white rounded-lg border border-gray-200 p-5 shadow-sm">
            <p className="text-sm text-[#4A5568] mb-2">Avg. Progress</p>
            <p className="text-3xl font-semibold text-[#3498DB]">
              {projects.length > 0 
                ? Math.round(projects.reduce((acc, curr) => acc + curr.progress, 0) / projects.length) 
                : 0}%
            </p>
          </div>
        </div>

        {/* Projects List */}
        <div className="space-y-6">
          {projects.map((project) => (
            <div key={project.id} className="bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow">
              <div className="flex items-start justify-between mb-6">
                <div className="flex-1">
                  <div className="flex items-center gap-3 mb-2">
                    <h3 className="text-[#0D1B2A] text-lg font-semibold">{project.name}</h3>
                    <StatusBadge status={project.status} />
                  </div>
                  <p className="text-sm text-[#4A5568]">{project.category}</p>
                </div>
                <div className="flex items-center gap-4">
                  <ProgressCircle progress={project.progress} size={64} />
                </div>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 bg-[#2EC4B6]/10 rounded-lg flex items-center justify-center">
                    <Calendar className="text-[#2EC4B6]" size={20} />
                  </div>
                  <div>
                    <p className="text-xs text-[#4A5568]">Start Date</p>
                    <p className="text-sm font-medium text-[#1A202C]">{project.startDate}</p>
                  </div>
                </div>
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 bg-[#3498DB]/10 rounded-lg flex items-center justify-center">
                    <TrendingUp className="text-[#3498DB]" size={20} />
                  </div>
                  <div>
                    <p className="text-xs text-[#4A5568]">Est. Completion</p>
                    <p className="text-sm font-medium text-[#1A202C]">{project.estimatedCompletion}</p>
                  </div>
                </div>
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center text-gray-600 font-bold">
                    {(project.agent || 'U').charAt(0)}
                  </div>
                  <div>
                    <p className="text-xs text-[#4A5568]">Assigned Agent</p>
                    <p className="text-sm font-medium text-[#1A202C]">{project.agent || 'Unassigned'}</p>
                  </div>
                </div>
              </div>

              <div className="pt-4 border-t border-gray-200">
                <button
                  onClick={() => navigate(`/project/${project.id}`)}
                  className="w-full bg-[#2EC4B6] text-white px-6 py-2.5 rounded-lg hover:bg-[#26a599] transition-all font-medium flex items-center justify-center gap-2 h-[44px]"
                >
                  <ExternalLink size={18} />
                  View Details & Files
                </button>
              </div>
            </div>
          ))}
        </div>

        {projects.length === 0 && (
          <div className="bg-white rounded-xl border border-gray-200 p-12 text-center">
            <Briefcase className="mx-auto mb-4 text-gray-400" size={64} />
            <h3 className="mb-2 text-[#0D1B2A]">No Active Projects</h3>
            <p className="text-[#4A5568] mb-6">Start by requesting a service to begin your first project</p>
            <button onClick={() => navigate('/needs-assessment')} className="bg-[#2EC4B6] text-white px-8 py-3 rounded-lg hover:bg-[#26a599] transition-all font-medium h-[48px]">
              Request Service
            </button>
          </div>
        )}
      </div>
    </div>
  );
}
</file>

<file path="src/pages/NeedsAssessment.tsx">
import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { ChevronRight, ChevronLeft, CheckCircle, Loader2, PlusCircle } from 'lucide-react';
import { toast } from 'sonner';
import api from '../lib/api';

interface Category {
  id: number;
  name: string;
  description: string;
}

export function NeedsAssessment() {
  const navigate = useNavigate();
  const [currentStep, setCurrentStep] = useState(1);
  const [loading, setLoading] = useState(false);
  const [categories, setCategories] = useState<Category[]>([]);
  const [isLoadingCategories, setIsLoadingCategories] = useState(true);

  // Form State
  const [formData, setFormData] = useState({
    categoryId: 0,
    customServiceName: '', // New field for custom input
    isCustom: false,       // Flag to track if user picked 'Other'
    details: '',
    priority: 'Medium'
  });

  // Fetch Categories from Backend
  useEffect(() => {
    const fetchCategories = async () => {
      try {
        const response = await api.get('/admin/categories');
        setCategories(response.data);
      } catch (error) {
        console.error("Failed to fetch categories", error);
        toast.error("Failed to load service categories.");
      } finally {
        setIsLoadingCategories(false);
      }
    };
    fetchCategories();
  }, []);

  const handleCategorySelect = (id: number) => {
    setFormData({ ...formData, categoryId: id, isCustom: false, customServiceName: '' });
  };

  const handleCustomSelect = () => {
    setFormData({ ...formData, categoryId: 0, isCustom: true });
  };

  const handleSubmit = async () => {
    // Validation
    if (!formData.categoryId && !formData.isCustom) {
      toast.error("Please select a service category");
      return;
    }
    if (formData.isCustom && !formData.customServiceName.trim()) {
      toast.error("Please enter the name of the custom service");
      return;
    }
    if (!formData.details.trim()) {
      toast.error("Please provide details for your request");
      return;
    }

    setLoading(true);
    try {
      let finalCategoryId = formData.categoryId;
      let finalDetails = formData.details;

      // Logic for Custom Service
      if (formData.isCustom) {
        // Append custom name to details so Agents see it immediately
        finalDetails = `[CUSTOM REQUEST: ${formData.customServiceName}]\n\n${formData.details}`;
        
        // Find a category named "Other" or "General" to map to, otherwise fallback to first available
        // This is a workaround because DB requires a valid categoryId
        const otherCategory = categories.find(c => c.name.toLowerCase() === 'other' || c.name.toLowerCase() === 'general');
        if (otherCategory) {
          finalCategoryId = otherCategory.id;
        } else if (categories.length > 0) {
          finalCategoryId = categories[0].id; // Fallback
        } else {
          throw new Error("No service categories available in system. Please contact admin.");
        }
      }

      await api.post('/requests', {
        categoryId: finalCategoryId,
        details: finalDetails,
        priority: formData.priority
      });

      toast.success('Request submitted successfully!');
      navigate('/client-dashboard');
    } catch (error: any) {
      console.error("Submission failed", error);
      toast.error(error.message || "Failed to submit request. Please try again.");
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="min-h-screen bg-[#F8F9FA]">
      <header className="bg-[#0D1B2A] text-white py-6 px-8 shadow-lg">
        <div className="max-w-3xl mx-auto">
          <h2 className="mb-2 text-2xl font-semibold">Service Request</h2>
          <p className="text-[#2EC4B6] text-sm">Tell us about your needs - we'll create a custom proposal for you</p>
        </div>
      </header>

      <div className="max-w-3xl mx-auto p-8">
        {/* Steps Indicator */}
        <div className="mb-8">
          <div className="flex items-center justify-between">
            {[1, 2, 3].map((s) => (
              <React.Fragment key={s}>
                <div className="flex flex-col items-center">
                  <div
                    className={`w-10 h-10 rounded-full flex items-center justify-center transition-all ${
                      currentStep >= s ? 'bg-[#2EC4B6] text-white' : 'bg-gray-300 text-gray-600'
                    }`}
                  >
                    {currentStep > s ? <CheckCircle size={20} /> : s}
                  </div>
                  <p className="text-xs mt-2 text-gray-600">
                    {s === 1 ? 'Category' : s === 2 ? 'Details' : 'Priority'}
                  </p>
                </div>
                {s < 3 && (
                  <div className={`flex-1 h-1 mx-4 transition-all ${currentStep > s ? 'bg-[#2EC4B6]' : 'bg-gray-300'}`}></div>
                )}
              </React.Fragment>
            ))}
          </div>
        </div>

        {/* Form Content */}
        <div className="bg-white rounded-xl shadow-lg p-8 border border-gray-200">
          
          {/* Step 1: Category Selection */}
          {currentStep === 1 && (
            <div>
              <h3 className="mb-2 text-[#0D1B2A] text-xl font-semibold">Select Service Category</h3>
              <p className="text-gray-600 mb-6">What type of service do you need?</p>
              
              {isLoadingCategories ? (
                <div className="flex justify-center py-8">
                  <Loader2 className="animate-spin text-[#2EC4B6]" size={32} />
                </div>
              ) : (
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  {categories.map((cat) => (
                    <button
                      key={cat.id}
                      onClick={() => handleCategorySelect(cat.id)}
                      className={`p-4 rounded-lg border-2 text-left transition-all ${
                        formData.categoryId === cat.id
                          ? 'border-[#2EC4B6] bg-[#2EC4B6]/5'
                          : 'border-gray-200 hover:border-[#2EC4B6]/50'
                      }`}
                    >
                      <p className="text-[#0D1B2A] font-medium">{cat.name}</p>
                      {cat.description && <p className="text-sm text-gray-500 mt-1 line-clamp-2">{cat.description}</p>}
                    </button>
                  ))}
                  
                  {/* Custom Option */}
                  <button
                    onClick={handleCustomSelect}
                    className={`p-4 rounded-lg border-2 text-left transition-all flex flex-col justify-center ${
                      formData.isCustom
                        ? 'border-[#2EC4B6] bg-[#2EC4B6]/5'
                        : 'border-gray-200 hover:border-[#2EC4B6]/50'
                    }`}
                  >
                    <div className="flex items-center gap-2 mb-1">
                      <PlusCircle size={18} className={formData.isCustom ? 'text-[#2EC4B6]' : 'text-gray-400'} />
                      <p className="text-[#0D1B2A] font-medium">Other / Custom</p>
                    </div>
                    <p className="text-sm text-gray-500">I need something else</p>
                  </button>
                </div>
              )}

              {/* Custom Service Input */}
              {formData.isCustom && (
                <div className="mt-6 animate-in fade-in slide-in-from-top-2 duration-300">
                  <label className="block text-sm font-medium text-[#1A202C] mb-2">Custom Service Name</label>
                  <input 
                    type="text" 
                    value={formData.customServiceName}
                    onChange={(e) => setFormData({ ...formData, customServiceName: e.target.value })}
                    placeholder="e.g. Mobile App Maintenance"
                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6] focus:ring-1 focus:ring-[#2EC4B6]"
                  />
                </div>
              )}
            </div>
          )}

          {/* Step 2: Details */}
          {currentStep === 2 && (
            <div>
              <h3 className="mb-2 text-[#0D1B2A] text-xl font-semibold">Describe Your Requirements</h3>
              <p className="text-gray-600 mb-6">
                Help us understand your goals, target audience, and any specific requirements.
              </p>
              
              <textarea
                value={formData.details}
                onChange={(e) => setFormData({ ...formData, details: e.target.value })}
                rows={8}
                placeholder="Example:&#10;- Goals: Increase online visibility&#10;- Target Audience: B2B clients&#10;- Specific Requirements: Modern design, mobile-friendly"
                className="w-full p-4 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-[#2EC4B6] resize-none"
              />
            </div>
          )}

          {/* Step 3: Priority */}
          {currentStep === 3 && (
            <div>
              <h3 className="mb-2 text-[#0D1B2A] text-xl font-semibold">Set Priority Level</h3>
              <p className="text-gray-600 mb-6">How urgent is this project?</p>
              
              <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                {[
                  { value: 'Low', label: 'Low', desc: 'Flexible timeline', color: '#3498DB' },
                  { value: 'Medium', label: 'Medium', desc: 'Standard timeline', color: '#F39C12' },
                  { value: 'High', label: 'High', desc: 'Urgent turnaround', color: '#E74C3C' }
                ].map((priority) => (
                  <button
                    key={priority.value}
                    onClick={() => setFormData({ ...formData, priority: priority.value })}
                    className={`p-6 rounded-lg border-2 text-center transition-all ${
                      formData.priority === priority.value
                        ? 'border-[#2EC4B6] bg-[#2EC4B6]/5'
                        : 'border-gray-200 hover:border-[#2EC4B6]/50'
                    }`}
                  >
                    <div className="w-3 h-3 rounded-full mx-auto mb-3" style={{ backgroundColor: priority.color }}></div>
                    <p className="text-[#0D1B2A] mb-2 font-medium">{priority.label}</p>
                    <p className="text-sm text-gray-600">{priority.desc}</p>
                  </button>
                ))}
              </div>

              {/* Summary */}
              <div className="mt-8 bg-gray-50 rounded-lg p-6 border border-gray-200">
                <h4 className="mb-4 text-[#0D1B2A] font-semibold">Request Summary</h4>
                <div className="space-y-3">
                  <div className="grid grid-cols-3 border-b border-gray-200 pb-2">
                    <p className="text-sm text-gray-600">Category</p>
                    <p className="text-[#0D1B2A] col-span-2 font-medium">
                      {formData.isCustom ? `Custom: ${formData.customServiceName}` : categories.find(c => c.id === formData.categoryId)?.name || 'Unknown'}
                    </p>
                  </div>
                  <div className="grid grid-cols-3 border-b border-gray-200 pb-2">
                    <p className="text-sm text-gray-600">Details</p>
                    <p className="text-[#0D1B2A] text-sm line-clamp-3 col-span-2">{formData.details || 'No details'}</p>
                  </div>
                  <div className="grid grid-cols-3">
                    <p className="text-sm text-gray-600">Priority</p>
                    <p className="text-[#0D1B2A] font-medium">{formData.priority}</p>
                  </div>
                </div>
              </div>
            </div>
          )}

          {/* Navigation */}
          <div className="flex justify-between mt-8 pt-6 border-t border-gray-200">
            <button
              onClick={() => currentStep === 1 ? navigate('/client-dashboard') : setCurrentStep(currentStep - 1)}
              className="px-6 py-3 text-gray-600 hover:text-[#0D1B2A] transition-colors flex items-center gap-2 font-medium"
              disabled={loading}
            >
              <ChevronLeft size={20} />
              {currentStep === 1 ? 'Cancel' : 'Back'}
            </button>
            
            {currentStep < 3 ? (
              <button
                onClick={() => setCurrentStep(currentStep + 1)}
                disabled={(currentStep === 1 && !formData.categoryId && !formData.isCustom) || (formData.isCustom && !formData.customServiceName)}
                className="bg-[#2EC4B6] hover:bg-[#26a599] text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium"
              >
                Next
                <ChevronRight size={20} />
              </button>
            ) : (
              <button
                onClick={handleSubmit}
                disabled={loading}
                className="bg-[#2EC4B6] hover:bg-[#26a599] text-white px-6 py-3 rounded-lg flex items-center gap-2 transition-colors disabled:opacity-70 font-medium"
              >
                {loading ? <Loader2 className="animate-spin" size={20} /> : <CheckCircle size={20} />}
                {loading ? 'Submitting...' : 'Submit Request'}
              </button>
            )}
          </div>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/pages/ProjectCommandCenter.tsx">
import React, { useState, useEffect } from 'react';
import { useNavigate, useParams } from 'react-router-dom';
import { ArrowLeft, Calendar, Upload, Lock, Unlock, Download, FileText, Loader2, User, Edit2, Save, X } from 'lucide-react';
import { StatusBadge } from '../components/StatusBadge';
import { ProgressCircle } from '../components/ProgressCircle';
import api from '../lib/api';
import { toast } from 'sonner';
import { ProjectNotes } from '../components/ProjectNotes';

export function ProjectCommandCenter() {
  const navigate = useNavigate();
  const { id } = useParams<{ id: string }>();
  const [loading, setLoading] = useState(true);
  
  // Data State
  const [project, setProject] = useState<any>(null);
  const [assets, setAssets] = useState<any[]>([]);
  const [vaultData, setVaultData] = useState<string>("");
  
  // UI State
  const [showCredentials, setShowCredentials] = useState(false);
  const [isEditingVault, setIsEditingVault] = useState(false);
  const [vaultInput, setVaultInput] = useState("");
  const [isUploading, setIsUploading] = useState(false);
  const [isSavingVault, setIsSavingVault] = useState(false);

  useEffect(() => {
    fetchProjectDetails();
  }, [id]);

  const fetchProjectDetails = async () => {
    try {
      // 1. Fetch Project
      const res = await api.get(`/projects/${id}`);
      setProject(res.data);
      setAssets(res.data.Assets || []);

      // 2. Fetch Vault (Client sees their own vault)
      const clientRes = await api.get('/clients/me');
      const fetchedVault = clientRes.data.technicalVault || "";
      setVaultData(fetchedVault);
      setVaultInput(fetchedVault); // Initialize input

    } catch (error) {
      console.error("Failed to load project", error);
      toast.error("Failed to load project details");
      navigate('/my-projects');
    } finally {
      setLoading(false);
    }
  };

  const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {
    if (!e.target.files || e.target.files.length === 0) return;
    
    const file = e.target.files[0];
    const formData = new FormData();
    formData.append('file', file);

    try {
      setIsUploading(true);
      
      // FIX: Explicitly set Content-Type to undefined to let browser set multipart/form-data with boundary
      const res = await api.post(`/projects/${id}/assets?type=ClientAsset`, formData, {
        headers: {
          'Content-Type': undefined
        } as any
      });
      
      toast.success("File uploaded successfully");
      setAssets(prev => [...prev, res.data]);
    } catch (error: any) {
      console.error(error);
      toast.error(error.response?.data?.message || "Failed to upload file");
    } finally {
      setIsUploading(false);
      // Clear input value to allow uploading same file again if needed
      e.target.value = '';
    }
  };

  const handleSaveVault = async () => {
    try {
      setIsSavingVault(true);
      // Send updated vault data to backend (encrypted on server side)
      await api.put('/clients/me', {
        technicalVault: vaultInput
      });
      
      setVaultData(vaultInput);
      setIsEditingVault(false);
      setShowCredentials(true); // Ensure view is open to see changes
      toast.success("Credentials updated securely");
    } catch (error) {
      toast.error("Failed to save credentials");
    } finally {
      setIsSavingVault(false);
    }
  };

  const getFileUrl = (path: string) => {
    const baseUrl = import.meta.env.VITE_API_URL 
      ? import.meta.env.VITE_API_URL.replace('/api/v1', '') 
      : 'http://localhost:3000';
    return `${baseUrl}/${path.replace(/\\/g, '/')}`;
  };

  if (loading) {
    return (
      <div className="min-h-screen bg-[#F5F7FA] flex items-center justify-center">
        <Loader2 className="w-8 h-8 text-[#2EC4B6] animate-spin" />
      </div>
    );
  }

  if (!project) return null;

  const clientAssets = assets.filter(a => a.type === 'ClientAsset');
  const deliverables = assets.filter(a => a.type === 'Deliverable');

  return (
    <div className="min-h-screen bg-[#F5F7FA]">
      
      {/* Project Banner Header */}
      <div className="bg-[#0D1B2A] text-white py-8 px-4 sm:px-8">
        <div className="max-w-7xl mx-auto">
          <button
            onClick={() => navigate('/my-projects')}
            className="text-[#2EC4B6] hover:text-white mb-6 flex items-center gap-2 transition-colors text-sm font-medium"
          >
            <ArrowLeft size={18} />
            Back to Projects
          </button>
          
          <div className="flex flex-col md:flex-row justify-between items-start gap-4">
            <div>
              <div className="flex items-center gap-3 mb-2">
                <h1 className="text-2xl md:text-3xl font-bold text-white">{project.Request?.Category?.name || 'Project'}</h1>
                <StatusBadge status={project.globalStatus?.toLowerCase() || 'pending'} />
              </div>
              <p className="text-gray-400 text-sm">
                Project ID: #{project.id} â¢ Started {new Date(project.createdAt).toLocaleDateString()}
              </p>
            </div>
            
            {/* Agent Info Card */}
            <div className="bg-white/10 backdrop-blur-sm rounded-lg p-3 flex items-center gap-3 border border-white/20">
              <div className="w-10 h-10 bg-[#2EC4B6] rounded-full flex items-center justify-center text-white font-bold">
                {project.Agent?.fullName?.charAt(0) || <User size={20} />}
              </div>
              <div>
                <p className="text-xs text-gray-400">Assigned Agent</p>
                <p className="text-sm font-medium text-white">{project.Agent?.fullName || 'Unassigned'}</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div className="max-w-7xl mx-auto p-4 sm:p-8">
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
          
          {/* Left Column - Main Content */}
          <div className="lg:col-span-2 space-y-6">
            
            {/* Project Overview */}
            <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
              <h3 className="mb-4 text-[#0D1B2A] font-semibold text-lg">Project Overview</h3>
              <p className="text-gray-700 mb-6 leading-relaxed">
                {project.Request?.details || 'No description available for this project.'}
              </p>
              <div className="grid grid-cols-2 gap-4 pt-4 border-t border-gray-200">
                <div>
                  <p className="text-sm text-gray-500 mb-1">Service Type</p>
                  <p className="text-[#0D1B2A] font-medium">{project.Request?.Category?.name || 'General'}</p>
                </div>
                <div>
                  <p className="text-sm text-gray-500 mb-1">Priority</p>
                  <p className="text-[#0D1B2A] font-medium">{project.Request?.priority || 'Normal'}</p>
                </div>
              </div>
            </div>

            {/* Assets & Deliverables */}
            <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200">
              <div className="flex justify-between items-center mb-6">
                <h3 className="text-[#0D1B2A] font-semibold text-lg">Files & Deliverables</h3>
                <label className={`bg-[#2EC4B6] hover:bg-[#26a599] text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors text-sm cursor-pointer ${isUploading ? 'opacity-70 cursor-not-allowed' : ''}`}>
                  {isUploading ? <Loader2 className="animate-spin" size={16} /> : <Upload size={16} />}
                  {isUploading ? 'Uploading...' : 'Upload File'}
                  <input type="file" className="hidden" onChange={handleFileUpload} disabled={isUploading} />
                </label>
              </div>

              {/* Client Assets */}
              <div className="mb-6">
                <h4 className="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Your Uploads</h4>
                {clientAssets.length === 0 ? (
                  <p className="text-sm text-gray-400 italic">You haven't uploaded any files yet.</p>
                ) : (
                  <div className="space-y-2">
                    {clientAssets.map((file, index) => (
                      <div key={index} className="flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-100">
                        <div className="flex items-center gap-3 overflow-hidden">
                          <FileText className="text-[#3498DB] flex-shrink-0" size={20} />
                          <div className="min-w-0">
                            <p className="text-[#0D1B2A] text-sm font-medium truncate">{file.fileName}</p>
                            <p className="text-xs text-gray-500">{new Date(file.createdAt).toLocaleDateString()}</p>
                          </div>
                        </div>
                        <a 
                          href={getFileUrl(file.filePath)} 
                          target="_blank"
                          rel="noreferrer" 
                          className="text-gray-400 hover:text-[#2EC4B6] transition-colors p-1"
                        >
                          <Download size={18} />
                        </a>
                      </div>
                    ))}
                  </div>
                )}
              </div>

              {/* Deliverables */}
              <div>
                <h4 className="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Deliverables from Agent</h4>
                {deliverables.length === 0 ? (
                  <p className="text-sm text-gray-400 italic">No deliverables uploaded yet.</p>
                ) : (
                  <div className="space-y-2">
                    {deliverables.map((file, index) => (
                      <div key={index} className="flex items-center justify-between p-3 bg-[#2EC4B6]/5 rounded-lg border border-[#2EC4B6]/10">
                        <div className="flex items-center gap-3 overflow-hidden">
                          <FileText className="text-[#2EC4B6] flex-shrink-0" size={20} />
                          <div className="min-w-0">
                            <p className="text-[#0D1B2A] text-sm font-medium truncate">{file.fileName}</p>
                            <p className="text-xs text-gray-500">
                              Uploaded by {project.Agent?.fullName || 'Agent'} â¢ {new Date(file.createdAt).toLocaleDateString()}
                            </p>
                          </div>
                        </div>
                        <a 
                          href={getFileUrl(file.filePath)}
                          target="_blank"
                          rel="noreferrer"
                          className="text-[#2EC4B6] hover:text-[#26a599] transition-colors p-1"
                        >
                          <Download size={18} />
                        </a>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            </div>

            {/* NEW: Project Notes */}
            <ProjectNotes projectId={id!} />

            {/* Technical Vault */}
            <div className="bg-[#0D1B2A] rounded-xl p-6 shadow-lg text-white border border-gray-800">
              <div className="flex items-center justify-between mb-4">
                <div className="flex items-center gap-3">
                  <Lock className="text-[#2EC4B6]" size={24} />
                  <h3 className="text-white font-semibold">Technical Vault</h3>
                </div>
                {!isEditingVault && (
                  <button 
                    onClick={() => {
                      setIsEditingVault(true);
                      setVaultInput(vaultData); // Pre-fill with existing data
                      setShowCredentials(true); // Ensure open when editing
                    }}
                    className="text-xs bg-white/10 hover:bg-white/20 text-white px-3 py-1.5 rounded-lg transition-colors flex items-center gap-1"
                  >
                    <Edit2 size={12} /> Edit
                  </button>
                )}
              </div>
              
              <p className="text-gray-300 mb-6 text-sm">
                Securely store credentials (host, login, API keys) accessible only to your assigned agent.
              </p>
              
              {isEditingVault ? (
                <div className="mb-4 animate-in fade-in">
                  <textarea
                    value={vaultInput}
                    onChange={(e) => setVaultInput(e.target.value)}
                    rows={6}
                    placeholder="e.g.,&#10;Host: ftp.example.com&#10;User: admin&#10;Pass: secret123"
                    className="w-full bg-black/40 border border-[#2EC4B6]/50 rounded-lg p-3 text-sm text-white font-mono focus:outline-none focus:border-[#2EC4B6] resize-y"
                  />
                  <div className="flex gap-2 mt-3">
                    <button 
                      onClick={handleSaveVault}
                      disabled={isSavingVault}
                      className="bg-[#2EC4B6] hover:bg-[#26a599] text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-1 transition-colors disabled:opacity-70"
                    >
                      {isSavingVault ? <Loader2 className="animate-spin" size={14} /> : <Save size={14} />}
                      Save
                    </button>
                    <button 
                      onClick={() => {
                        setIsEditingVault(false);
                        setVaultInput(vaultData); // Revert
                      }}
                      disabled={isSavingVault}
                      className="bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-1 transition-colors"
                    >
                      <X size={14} /> Cancel
                    </button>
                  </div>
                </div>
              ) : (
                <>
                  {showCredentials && (
                    <div className="bg-white/10 rounded-lg p-4 mb-4 border border-white/10 animate-in fade-in slide-in-from-top-2">
                      <p className="font-mono text-sm text-[#2EC4B6] whitespace-pre-wrap break-all">
                        {vaultData || "No credentials saved."}
                      </p>
                    </div>
                  )}

                  <button
                    onClick={() => setShowCredentials(!showCredentials)}
                    className="w-full bg-[#2EC4B6] hover:bg-[#26a599] text-white font-medium px-4 py-3 rounded-lg flex items-center justify-center gap-2 transition-colors"
                  >
                    {showCredentials ? <Lock size={18} /> : <Unlock size={18} />}
                    {showCredentials ? 'Hide Credentials' : 'Reveal Credentials'}
                  </button>
                </>
              )}
            </div>
          </div>

          {/* Right Column - Progress Metrics */}
          <div className="space-y-6">
            
            {/* Progress Card */}
            <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-200 text-center">
              <h4 className="mb-6 text-[#0D1B2A] font-semibold">Project Progress</h4>
              <div className="flex justify-center mb-6">
                <ProgressCircle percentage={project.progressPercent || 0} size={140} />
              </div>
              <div className="bg-gray-50 rounded-lg p-3">
                <p className="text-xs text-gray-500 uppercase tracking-wide mb-1">Current Status</p>
                <p className="text-[#0D1B2A] font-medium">{project.globalStatus || 'Pending'}</p>
              </div>
            </div>

            {/* ECD Card */}
            <div className="bg-gradient-to-br from-[#2EC4B6] to-[#26a599] rounded-xl p-6 shadow-lg text-white">
              <div className="flex items-center gap-3 mb-3">
                <Calendar size={24} />
                <h4 className="font-semibold">Estimated Completion</h4>
              </div>
              <p className="text-3xl font-bold">
                {project.ecd 
                  ? new Date(project.ecd).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })
                  : 'TBD'}
              </p>
              {project.ecd && (
                <p className="text-sm text-white/80 mt-2">
                  {Math.ceil((new Date(project.ecd).getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24))} days remaining
                </p>
              )}
            </div>

          </div>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/pages/Register.tsx">
import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { Eye, EyeOff, AlertCircle, CheckCircle2 } from 'lucide-react';
import { useAuth } from '../contexts/AuthContext';
import { toast } from 'sonner';
import logoImage from 'figma:asset/8c308caf909810f493480578c4eab6aa4f6235bf.png';

export function Register() {
  const navigate = useNavigate();
  const { register } = useAuth();
  
  const [formData, setFormData] = useState({
    fullName: '',
    companyName: '',
    email: '',
    password: '',
    confirmPassword: '',
    phone: '' 
  });
  
  const [showPassword, setShowPassword] = useState(false);
  const [showConfirmPassword, setShowConfirmPassword] = useState(false);
  const [isLoading, setIsLoading] = useState(false);
  const [errors, setErrors] = useState<{ [key: string]: string }>({});
  const [touched, setTouched] = useState<{ [key: string]: boolean }>({});

  // 1. Centralized Rules for Consistency
  const passwordRules = {
    length: (pw: string) => pw.length >= 8,
    number: (pw: string) => /\d/.test(pw),
    uppercase: (pw: string) => /[A-Z]/.test(pw),
  };

  const passwordRequirements = [
    { label: 'At least 8 characters', test: passwordRules.length },
    { label: 'Contains a number', test: passwordRules.number },
    { label: 'Contains uppercase', test: passwordRules.uppercase },
  ];

  const validateForm = () => {
    const newErrors: { [key: string]: string } = {};

    if (!formData.fullName.trim()) {
      newErrors.fullName = 'Full name is required';
    }

    if (!formData.email.trim()) {
      newErrors.email = 'Email is required';
    } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(formData.email)) {
      newErrors.email = 'Please enter a valid email address';
    }

    // 2. Updated Password Validation to enforce all rules
    if (!formData.password) {
      newErrors.password = 'Password is required';
    } else {
      if (!passwordRules.length(formData.password)) {
        newErrors.password = 'Password must be at least 8 characters';
      } else if (!passwordRules.number(formData.password)) {
        newErrors.password = 'Password must contain at least one number';
      } else if (!passwordRules.uppercase(formData.password)) {
        newErrors.password = 'Password must contain at least one uppercase letter';
      }
    }

    if (formData.password !== formData.confirmPassword) {
      newErrors.confirmPassword = 'Passwords do not match';
    }

    setErrors(newErrors);
    return Object.keys(newErrors).length === 0;
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    
    if (!validateForm()) {
      // If validation fails, mark all fields as touched to show errors
      setTouched({
        fullName: true,
        email: true,
        password: true,
        confirmPassword: true,
        companyName: true,
        phone: true
      });
      toast.error("Please fix the errors in the form.");
      return;
    }

    setIsLoading(true);
    
    try {
      await register(formData);
      toast.success("Account created successfully! Please wait for admin approval.");
      navigate('/pending-approval');
    } catch (error: any) {
      toast.error(error.message || "Failed to create account. Please try again.");
    } finally {
      setIsLoading(false);
    }
  };

  const handleChange = (field: string, value: string) => {
    setFormData(prev => ({ ...prev, [field]: value }));
    
    // Clear specific field error when user types
    if (errors[field]) {
      setErrors(prev => {
        const newErrors = { ...prev };
        delete newErrors[field];
        return newErrors;
      });
    }
  };

  const handleBlur = (field: string) => {
    setTouched(prev => ({ ...prev, [field]: true }));
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-[#F5F7FA] to-[#E2E8F0] flex flex-col items-center justify-center px-4 py-8 sm:px-6 lg:px-8">
      <div className="w-full max-w-2xl">
        <div className="mb-8 text-center">
          <button 
            onClick={() => navigate('/')}
            className="flex items-center justify-center gap-2 mb-6 mx-auto hover:opacity-80 transition-opacity"
          >
            <img src={logoImage} alt="BizTech" className="h-8 sm:h-10" />
          </button>
          
          <h1 className="mb-2 text-[#1A202C]">Create Your Account</h1>
          <p className="text-[#4A5568] text-sm sm:text-base">Join BizSetup to streamline your business setup</p>
        </div>

        <div className="bg-white rounded-xl shadow-lg border border-gray-200 p-6 sm:p-8">
          <div className="mb-6">
            <h2 className="mb-1 text-[#1A202C]">Client Registration</h2>
            <p className="text-sm text-[#4A5568]">
              Fill in your details below. Your account will require admin approval.
            </p>
          </div>

          <form onSubmit={handleSubmit} className="space-y-5">
            <div className="grid grid-cols-1 md:grid-cols-2 gap-5">
              <div>
                <label htmlFor="fullName" className="block text-sm text-[#1A202C] mb-2">
                  Full Name <span className="text-[#E74C3C]">*</span>
                </label>
                <input
                  id="fullName"
                  type="text"
                  value={formData.fullName}
                  onChange={(e) => handleChange('fullName', e.target.value)}
                  onBlur={() => handleBlur('fullName')}
                  placeholder="John Doe"
                  className={`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-all text-[#1A202C] placeholder:text-gray-400 ${
                    errors.fullName && touched.fullName
                      ? 'border-[#E74C3C] focus:ring-[#E74C3C]/20'
                      : 'border-gray-300 focus:border-[#2EC4B6] focus:ring-[#2EC4B6]/20'
                  }`}
                />
                {errors.fullName && touched.fullName && (
                  <p className="mt-1.5 text-xs text-[#E74C3C] flex items-center gap-1">
                    <AlertCircle size={12} />
                    {errors.fullName}
                  </p>
                )}
              </div>

              <div>
                <label htmlFor="companyName" className="block text-sm text-[#1A202C] mb-2">
                  Company Name <span className="text-[#718096] text-xs">(Optional)</span>
                </label>
                <input
                  id="companyName"
                  type="text"
                  value={formData.companyName}
                  onChange={(e) => handleChange('companyName', e.target.value)}
                  placeholder="Your Company LLC"
                  className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6] focus:ring-2 focus:ring-[#2EC4B6]/20 transition-all text-[#1A202C] placeholder:text-gray-400"
                />
              </div>
            </div>

            {/* Email Field */}
            <div>
              <label htmlFor="email" className="block text-sm text-[#1A202C] mb-2">
                Email Address <span className="text-[#E74C3C]">*</span>
              </label>
              <input
                id="email"
                type="email"
                value={formData.email}
                onChange={(e) => handleChange('email', e.target.value)}
                onBlur={() => handleBlur('email')}
                placeholder="you@company.com"
                className={`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 transition-all text-[#1A202C] placeholder:text-gray-400 ${
                  errors.email && touched.email
                    ? 'border-[#E74C3C] focus:ring-[#E74C3C]/20'
                    : 'border-gray-300 focus:border-[#2EC4B6] focus:ring-[#2EC4B6]/20'
                }`}
              />
              {errors.email && touched.email && (
                <p className="mt-1.5 text-xs text-[#E74C3C] flex items-center gap-1">
                  <AlertCircle size={12} />
                  {errors.email}
                </p>
              )}
            </div>

            {/* Phone Field */}
            <div>
              <label htmlFor="phone" className="block text-sm text-[#1A202C] mb-2">
                Phone Number <span className="text-[#718096] text-xs">(Optional)</span>
              </label>
              <input
                id="phone"
                type="text"
                value={formData.phone}
                onChange={(e) => handleChange('phone', e.target.value)}
                placeholder="+971 50 000 0000"
                className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6] focus:ring-2 focus:ring-[#2EC4B6]/20 transition-all text-[#1A202C] placeholder:text-gray-400"
              />
            </div>

            {/* Password Fields */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-5">
              <div>
                <label htmlFor="password" className="block text-sm text-[#1A202C] mb-2">
                  Password <span className="text-[#E74C3C]">*</span>
                </label>
                <div className="relative">
                  <input
                    id="password"
                    type={showPassword ? 'text' : 'password'}
                    value={formData.password}
                    onChange={(e) => handleChange('password', e.target.value)}
                    onBlur={() => handleBlur('password')}
                    placeholder="Create password"
                    className={`w-full px-4 py-3 pr-12 border rounded-lg focus:outline-none focus:ring-2 transition-all text-[#1A202C] placeholder:text-gray-400 ${
                      errors.password && touched.password
                        ? 'border-[#E74C3C] focus:ring-[#E74C3C]/20'
                        : 'border-gray-300 focus:border-[#2EC4B6] focus:ring-[#2EC4B6]/20'
                    }`}
                  />
                  <button
                    type="button"
                    onClick={() => setShowPassword(!showPassword)}
                    className="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors p-1"
                    aria-label={showPassword ? 'Hide password' : 'Show password'}
                  >
                    {showPassword ? <EyeOff size={20} /> : <Eye size={20} />}
                  </button>
                </div>
                {errors.password && touched.password && (
                  <p className="mt-1.5 text-xs text-[#E74C3C] flex items-center gap-1">
                    <AlertCircle size={12} />
                    {errors.password}
                  </p>
                )}
              </div>

              <div>
                <label htmlFor="confirmPassword" className="block text-sm text-[#1A202C] mb-2">
                  Confirm Password <span className="text-[#E74C3C]">*</span>
                </label>
                <div className="relative">
                  <input
                    id="confirmPassword"
                    type={showConfirmPassword ? 'text' : 'password'}
                    value={formData.confirmPassword}
                    onChange={(e) => handleChange('confirmPassword', e.target.value)}
                    onBlur={() => handleBlur('confirmPassword')}
                    placeholder="Confirm password"
                    className={`w-full px-4 py-3 pr-12 border rounded-lg focus:outline-none focus:ring-2 transition-all text-[#1A202C] placeholder:text-gray-400 ${
                      errors.confirmPassword && touched.confirmPassword
                        ? 'border-[#E74C3C] focus:ring-[#E74C3C]/20'
                        : 'border-gray-300 focus:border-[#2EC4B6] focus:ring-[#2EC4B6]/20'
                    }`}
                  />
                  <button
                    type="button"
                    onClick={() => setShowConfirmPassword(!showConfirmPassword)}
                    className="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors p-1"
                    aria-label={showConfirmPassword ? 'Hide password' : 'Show password'}
                  >
                    {showConfirmPassword ? <EyeOff size={20} /> : <Eye size={20} />}
                  </button>
                </div>
                {errors.confirmPassword && touched.confirmPassword && (
                  <p className="mt-1.5 text-xs text-[#E74C3C] flex items-center gap-1">
                    <AlertCircle size={12} />
                    {errors.confirmPassword}
                  </p>
                )}
              </div>
            </div>

            {/* 3. Visual Password Strength Indicator */}
            {/* Display requirements if user has started typing or touched the field */}
            {(formData.password || touched.password) && (
              <div className="bg-gray-50 rounded-lg p-4 space-y-2 border border-gray-100">
                <p className="text-xs text-[#4A5568] mb-2 font-medium">Password requirements:</p>
                {passwordRequirements.map((req, index) => {
                  const isPassed = req.test(formData.password);
                  return (
                    <div key={index} className="flex items-center gap-2 transition-all duration-300">
                      {isPassed ? (
                        <CheckCircle2 size={14} className="text-[#2ECC71]" />
                      ) : (
                        <div className="w-3.5 h-3.5 border-2 border-gray-300 rounded-full" />
                      )}
                      <span className={`text-xs ${isPassed ? 'text-[#2ECC71] font-medium' : 'text-[#718096]'}`}>
                        {req.label}
                      </span>
                    </div>
                  );
                })}
              </div>
            )}

            <div className="bg-gradient-to-r from-[#EBF8FF] to-[#E0F2FE] border border-[#BEE3F8] rounded-lg p-4">
              <div className="flex gap-3">
                <div className="flex-shrink-0">
                  <div className="w-8 h-8 bg-[#3498DB]/10 rounded-full flex items-center justify-center">
                    <AlertCircle size={16} className="text-[#3498DB]" />
                  </div>
                </div>
                <div>
                  <p className="text-sm text-[#2C5282]">
                    <span className="font-medium">Admin Approval Required</span>
                    <br />
                    Your account will be reviewed by our team. You'll receive an email once approved (typically within 24-48 hours).
                  </p>
                </div>
              </div>
            </div>

            <button
              type="submit"
              disabled={isLoading}
              className="w-full bg-gradient-to-r from-[#0D1B2A] to-[#1a2d42] hover:from-[#1a2d42] hover:to-[#0D1B2A] text-white py-3 rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02] active:scale-[0.98]"
            >
              {isLoading ? (
                <span className="flex items-center justify-center gap-2">
                  <svg className="animate-spin h-5 w-5" viewBox="0 0 24 24">
                    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" fill="none" />
                    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
                  </svg>
                  Creating Account...
                </span>
              ) : (
                'Create Account'
              )}
            </button>
          </form>

          <div className="my-6 flex items-center gap-4">
            <div className="flex-1 h-px bg-gray-200"></div>
            <span className="text-xs text-gray-500">Already registered?</span>
            <div className="flex-1 h-px bg-gray-200"></div>
          </div>

          <button
            onClick={() => navigate('/login')}
            className="w-full border-2 border-[#2EC4B6] text-[#2EC4B6] hover:bg-[#2EC4B6] hover:text-white py-3 rounded-lg transition-all transform hover:scale-[1.02] active:scale-[0.98]"
          >
            Sign In Instead
          </button>
        </div>

        <p className="mt-6 text-xs text-[#718096] text-center">
          By creating an account, you agree to our{' '}
          <button 
            onClick={() => alert('Terms of Service - Coming Soon')}
            className="text-[#2EC4B6] hover:underline"
          >
            Terms of Service
          </button>
          {' '}and{' '}
          <button 
            onClick={() => alert('Privacy Policy - Coming Soon')}
            className="text-[#2EC4B6] hover:underline"
          >
            Privacy Policy
          </button>
        </p>
      </div>
    </div>
  );
}
</file>

<file path="vite.config.ts">
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react-swc';
import path from 'path';
import tailwindcss from '@tailwindcss/vite'

export default defineConfig({
  plugins: [react(), tailwindcss()],
  resolve: {
    extensions: ['.js', '.jsx', '.ts', '.tsx', '.json'],
    alias: {
      'vaul@1.1.2': 'vaul',
      'sonner@2.0.3': 'sonner',
      'react-resizable-panels@2.1.7': 'react-resizable-panels',
      'react-hook-form@7.55.0': 'react-hook-form',
      'next-themes@0.4.6': 'next-themes',
      'lucide-react@0.487.0': 'lucide-react',
      'input-otp@1.4.2': 'input-otp',
      'figma:asset/8c308caf909810f493480578c4eab6aa4f6235bf.png': path.resolve(__dirname, './src/assets/8c308caf909810f493480578c4eab6aa4f6235bf.png'),
      'class-variance-authority@0.7.1': 'class-variance-authority',
      '@radix-ui/react-tooltip@1.1.8': '@radix-ui/react-tooltip',
      '@radix-ui/react-toggle@1.1.2': '@radix-ui/react-toggle',
      '@radix-ui/react-toggle-group@1.1.2': '@radix-ui/react-toggle-group',
      '@radix-ui/react-tabs@1.1.3': '@radix-ui/react-tabs',
      '@radix-ui/react-switch@1.1.3': '@radix-ui/react-switch',
      '@radix-ui/react-slot@1.1.2': '@radix-ui/react-slot',
      '@radix-ui/react-slider@1.2.3': '@radix-ui/react-slider',
      '@radix-ui/react-separator@1.1.2': '@radix-ui/react-separator',
      '@radix-ui/react-select@2.1.6': '@radix-ui/react-select',
      '@radix-ui/react-scroll-area@1.2.3': '@radix-ui/react-scroll-area',
      '@radix-ui/react-radio-group@1.2.3': '@radix-ui/react-radio-group',
      '@radix-ui/react-progress@1.1.2': '@radix-ui/react-progress',
      '@radix-ui/react-popover@1.1.6': '@radix-ui/react-popover',
      '@radix-ui/react-navigation-menu@1.2.5': '@radix-ui/react-navigation-menu',
      '@radix-ui/react-menubar@1.1.6': '@radix-ui/react-menubar',
      '@radix-ui/react-label@2.1.2': '@radix-ui/react-label',
      '@radix-ui/react-hover-card@1.1.6': '@radix-ui/react-hover-card',
      '@radix-ui/react-dropdown-menu@2.1.6': '@radix-ui/react-dropdown-menu',
      '@radix-ui/react-dialog@1.1.6': '@radix-ui/react-dialog',
      '@': path.resolve(__dirname, './src'),
    },
  },
  build: {
    target: 'esnext',
    outDir: 'build',
  },
  server: {
    port: 5173,
    open: true,
    proxy: {
      '/api': {
        target: 'http://localhost:3000',
        changeOrigin: true,
        secure: false,
      }
    }
  },
});
</file>

<file path="package.json">
{
  "name": "biztech-biz-digital",
  "version": "1.0.0",
  "description": "Agency Management Portal for Digital Services",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "@radix-ui/react-accordion": "1.2.3",
    "@radix-ui/react-alert-dialog": "1.1.6",
    "@radix-ui/react-aspect-ratio": "1.1.2",
    "@radix-ui/react-avatar": "1.1.3",
    "@radix-ui/react-checkbox": "1.1.4",
    "@radix-ui/react-collapsible": "1.1.3",
    "@radix-ui/react-context-menu": "2.2.6",
    "@radix-ui/react-dialog": "1.1.6",
    "@radix-ui/react-dropdown-menu": "2.1.6",
    "@radix-ui/react-hover-card": "1.1.6",
    "@radix-ui/react-label": "2.1.2",
    "@radix-ui/react-menubar": "1.1.6",
    "@radix-ui/react-navigation-menu": "1.2.5",
    "@radix-ui/react-popover": "1.1.6",
    "@radix-ui/react-progress": "1.1.2",
    "@radix-ui/react-radio-group": "1.2.3",
    "@radix-ui/react-scroll-area": "1.2.3",
    "@radix-ui/react-select": "2.1.6",
    "@radix-ui/react-separator": "1.1.2",
    "@radix-ui/react-slider": "1.2.3",
    "@radix-ui/react-slot": "1.1.2",
    "@radix-ui/react-switch": "1.1.3",
    "@radix-ui/react-tabs": "1.1.3",
    "@radix-ui/react-toggle": "1.1.2",
    "@radix-ui/react-toggle-group": "1.1.2",
    "@radix-ui/react-tooltip": "1.1.8",
    "axios": "^1.13.2",
    "class-variance-authority": "0.7.1",
    "cmdk": "1.1.1",
    "embla-carousel-react": "8.6.0",
    "input-otp": "1.4.2",
    "lucide-react": "0.487.0",
    "next-themes": "0.4.6",
    "react": "^18.3.1",
    "react-day-picker": "8.10.1",
    "react-dom": "^18.3.1",
    "react-hook-form": "7.55.0",
    "react-resizable-panels": "2.1.7",
    "react-router-dom": "6.28.0",
    "recharts": "2.15.2",
    "sonner": "2.0.3",
    "tailwind-merge": "^3.4.0",
    "vaul": "1.1.2"
  },
  "devDependencies": {
    "@tailwindcss/vite": "^4.0.0",
    "@types/node": "^20.11.24",
    "@types/react": "^18.2.61",
    "@types/react-dom": "^18.2.19",
    "@vitejs/plugin-react-swc": "^3.5.0",
    "tailwindcss": "^4.0.0",
    "tailwindcss-animate": "^1.0.7",
    "typescript": "^5.3.3",
    "vite": "^6.0.0"
  }
}
</file>

<file path="src/components/Sidebar.tsx">
import React from 'react';
import { LayoutDashboard, Users, User, LogOut, Settings, FileText, Briefcase, Menu, X, Layers } from 'lucide-react';
import { useAuth } from '../contexts/AuthContext';

interface SidebarProps {
  role: 'client' | 'agent' | 'admin';
  activePage: string;
  onNavigate: (page: string) => void;
  userName?: string;
}

export function Sidebar({ role, activePage, onNavigate, userName = 'User' }: SidebarProps) {
  const [mobileMenuOpen, setMobileMenuOpen] = React.useState(false);
  const { logout } = useAuth();
  
  const agentMenuItems = [
    { id: 'dashboard', label: 'Dashboard', icon: LayoutDashboard, path: '/agent/dashboard' },
    { id: 'clients', label: 'Clients', icon: Users, path: '/agent/clients' },
    { id: 'projects', label: 'Projects', icon: Briefcase, path: '/agent/projects' },
    { id: 'profile', label: 'Profile', icon: User, path: '/agent/profile' },
  ];

  const adminMenuItems = [
    { id: 'dashboard', label: 'Dashboard', icon: LayoutDashboard, path: '/admin/dashboard' },
    { id: 'approvals', label: 'User Approvals', icon: Users, path: '/admin/approvals' },
    { id: 'services', label: 'Services', icon: Layers, path: '/admin/services' }, // Added Services
    { id: 'agents', label: 'Agents', icon: Briefcase, path: '/admin/agents' },
    { id: 'requests', label: 'Requests', icon: FileText, path: '/admin/requests' },
    { id: 'settings', label: 'Settings', icon: Settings, path: '/admin/settings' },
  ];

  const menuItems = role === 'admin' ? adminMenuItems : agentMenuItems;

  const handleNavigation = (path: string) => {
    onNavigate(path);
    setMobileMenuOpen(false);
  };

  const handleLogout = () => {
    logout();
    setMobileMenuOpen(false);
  };

  return (
    <>
      {/* Mobile Header */}
      <div className="lg:hidden fixed top-0 left-0 right-0 bg-[#0D1B2A] border-b border-white/10 z-50">
        <div className="flex items-center justify-between p-4">
          <div className="flex items-center gap-3">
            <div className="w-9 h-9 bg-[#2EC4B6] rounded-lg flex items-center justify-center shadow-lg">
              <span className="text-white font-bold">BT</span>
            </div>
            <span className="text-white text-lg font-semibold">BizSetup</span>
          </div>
          <button
            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
            className="text-white p-2 hover:bg-white/10 rounded-lg transition-colors"
          >
            {mobileMenuOpen ? <X size={24} /> : <Menu size={24} />}
          </button>
        </div>
      </div>

      {/* Mobile Overlay */}
      {mobileMenuOpen && (
        <div
          className="lg:hidden fixed inset-0 bg-black/50 z-40 mt-[64px]"
          onClick={() => setMobileMenuOpen(false)}
        />
      )}

      {/* Sidebar */}
      <div
        className={`
          fixed top-0 left-0 h-screen bg-[#0D1B2A] text-white flex flex-col z-50
          transition-transform duration-300 ease-in-out
          w-64
          lg:translate-x-0
          ${mobileMenuOpen ? 'translate-x-0' : '-translate-x-full'}
          lg:mt-0 mt-[64px]
        `}
      >
        <div className="hidden lg:block p-6 border-b border-white/10">
          <div className="flex items-center gap-3">
            <div className="w-10 h-10 bg-[#2EC4B6] rounded-lg flex items-center justify-center shadow-lg">
              <span className="text-white font-bold text-lg">BT</span>
            </div>
            <span className="text-white text-xl font-semibold">BizSetup</span>
          </div>
        </div>

        <nav className="flex-1 px-4 py-6 overflow-y-auto">
          <ul className="space-y-2">
            {menuItems.map((item) => {
              const Icon = item.icon;
              const isActive = activePage === item.path;
              
              return (
                <li key={item.id}>
                  <button
                    onClick={() => handleNavigation(item.path)}
                    className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${
                      isActive
                        ? 'bg-[#2EC4B6] text-white'
                        : 'text-gray-400 hover:bg-white/5 hover:text-white'
                    }`}
                  >
                    <Icon size={20} />
                    <span className="text-sm">{item.label}</span>
                  </button>
                </li>
              );
            })}
          </ul>
        </nav>

        <div className="p-4 border-t border-white/10">
          <div className="flex items-center gap-3 px-4 py-3 mb-2">
            <div className="w-10 h-10 bg-[#2EC4B6] rounded-full flex items-center justify-center">
              <span className="text-white text-sm">{userName.charAt(0).toUpperCase()}</span>
            </div>
            <div>
              <p className="text-white text-sm truncate max-w-[140px]">{userName}</p>
              <p className="text-gray-400 text-xs capitalize">{role}</p>
            </div>
          </div>
          <button 
            onClick={handleLogout}
            className="w-full flex items-center gap-3 px-4 py-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors"
          >
            <LogOut size={18} />
            <span className="text-sm">Sign Out</span>
          </button>
        </div>
      </div>
    </>
  );
}
</file>

<file path="src/contexts/AuthContext.tsx">
import React, { createContext, useContext, useState, ReactNode, useEffect } from 'react';
import { api } from '../services/api'; // Using the api service created above
import { User, UserRole, RegisterData } from '../types';

interface AuthContextType {
  user: User | null;
  isAuthenticated: boolean;
  login: (email: string, password: string) => Promise<void>;
  register: (data: RegisterData) => Promise<void>;
  logout: () => void;
  updateUser: (user: Partial<User>) => void;
  isLoading: boolean;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export const useAuth = () => {
  const context = useContext(AuthContext);
  if (!context) {
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return context;
};

interface AuthProviderProps {
  children: ReactNode;
}

export const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {
  const [user, setUser] = useState<User | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  // Check for existing session on mount
  useEffect(() => {
    const checkAuth = async () => {
      const token = localStorage.getItem('token');
      const storedUser = localStorage.getItem('user');
      
      if (token && storedUser) {
        try {
          setUser(JSON.parse(storedUser));
        } catch (e) {
          console.error("Failed to parse stored user data");
          localStorage.removeItem('user');
          localStorage.removeItem('token');
        }
      }
      setIsLoading(false);
    };
    checkAuth();
  }, []);

  const login = async (email: string, password: string) => {
    try {
      const response = await api.post('/auth/login', { email, password });
      
      const { token, user: apiUser } = response;
      
      // Normalize Backend Data to match frontend User Interface
      const userData: User = {
        id: apiUser.id,
        email: apiUser.email || email,
        name: apiUser.fullName || apiUser.name, // Handle backend variation
        role: (apiUser.role || 'client').toLowerCase() as UserRole, // Normalize "Client" -> "client"
        company: apiUser.companyName || apiUser.company
      };

      localStorage.setItem('token', token);
      localStorage.setItem('user', JSON.stringify(userData));
      setUser(userData);
    } catch (error: any) {
      console.error("Login Failed", error);
      throw error; // Let the UI handle the specific error message
    }
  };

  const register = async (data: RegisterData) => {
    try {
      await api.post('/auth/register', {
        fullName: data.fullName,
        email: data.email,
        password: data.password,
        mobile: data.phone,
        companyName: data.companyName,
        role: 'Client' // Default role for public registration
      });
    } catch (error: any) {
      console.error("Registration Failed", error);
      throw error;
    }
  };

  const logout = () => {
    localStorage.removeItem('token');
    localStorage.removeItem('user');
    setUser(null);
    window.location.href = '/login';
  };

  const updateUser = (updates: Partial<User>) => {
    if (user) {
      const updatedUser = { ...user, ...updates };
      setUser(updatedUser);
      localStorage.setItem('user', JSON.stringify(updatedUser));
    }
  };

  const value: AuthContextType = {
    user,
    isAuthenticated: !!user,
    login,
    register,
    logout,
    updateUser,
    isLoading
  };

  return <AuthContext.Provider value={value}>{!isLoading && children}</AuthContext.Provider>;
};
</file>

<file path="src/pages/AdminAgents.tsx">
import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { Plus, Mail, Phone } from 'lucide-react';
import { Agent } from '../types';
import { toast } from 'sonner';
import api from '../lib/api';

export function AdminAgents() {
  const navigate = useNavigate();
  const [agents, setAgents] = useState<Agent[]>([]);
  const [showAddAgent, setShowAddAgent] = useState(false);
  const [loading, setLoading] = useState(true);
  
  const [newAgent, setNewAgent] = useState({
    fullName: '',
    email: '',
    phone: '',
    password: ''
  });

  useEffect(() => {
    fetchAgents();
  }, []);

  const fetchAgents = async () => {
    try {
      const res = await api.get('/admin/agents');
      const mappedAgents = res.data.map((u: any) => ({
        id: u.id,
        name: u.fullName,
        email: u.email,
        phone: u.mobile,
        status: u.status.toLowerCase(),
        joinedDate: new Date(u.createdAt).toLocaleDateString()
      }));
      setAgents(mappedAgents);
    } catch (error) {
      toast.error("Failed to load agents");
    } finally {
      setLoading(false);
    }
  };

  const handleAddAgent = async () => {
    if (!newAgent.fullName || !newAgent.email || !newAgent.password) {
      toast.error('Please fill in all required fields');
      return;
    }

    try {
      await api.post('/admin/agents', {
        fullName: newAgent.fullName,
        email: newAgent.email,
        mobile: newAgent.phone,
        password: newAgent.password
      });
      
      toast.success(`Agent ${newAgent.fullName} created successfully!`);
      setShowAddAgent(false);
      setNewAgent({ fullName: '', email: '', phone: '', password: '' });
      fetchAgents();
    } catch (error: any) {
      toast.error(error.response?.data?.message || "Failed to create agent");
    }
  };

  return (
    <>
      <div className="flex justify-between items-start mb-8">
        <div>
          <h1 className="mb-2 text-[#0D1B2A]">Agent Management</h1>
          <p className="text-[#4A5568]">Create and manage agent accounts</p>
        </div>
        <button
          onClick={() => setShowAddAgent(true)}
          className="flex items-center gap-2 bg-[#2EC4B6] text-white px-6 py-2.5 rounded-lg hover:bg-[#26a599] transition-all font-medium"
        >
          <Plus size={20} /> Add New Agent
        </button>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">
        {loading ? (
          <p className="col-span-full text-center py-8 text-[#4A5568]">Loading agents...</p>
        ) : agents.length === 0 ? (
          <p className="col-span-full text-center py-8 text-[#4A5568]">No agents found.</p>
        ) : (
          agents.map((agent) => (
            <div key={agent.id} className="bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow">
              <div className="flex justify-between items-start mb-4">
                <div className="flex items-start gap-3">
                  <div className="w-12 h-12 bg-gradient-to-br from-[#2EC4B6] to-[#26a599] rounded-full flex items-center justify-center text-white font-semibold">
                    {agent.name.charAt(0)}
                  </div>
                  <div>
                    <h3 className="font-semibold text-[#0D1B2A]">{agent.name}</h3>
                    <span className={`px-2 py-0.5 rounded text-xs ${
                      agent.status === 'active' ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-700'
                    }`}>
                      {agent.status}
                    </span>
                  </div>
                </div>
              </div>

              <div className="space-y-2 mb-4">
                <div className="flex items-center gap-2 text-sm text-[#4A5568]">
                  <Mail size={14} /> <span className="truncate">{agent.email}</span>
                </div>
                {agent.phone && (
                  <div className="flex items-center gap-2 text-sm text-[#4A5568]">
                    <Phone size={14} /> <span>{agent.phone}</span>
                  </div>
                )}
              </div>
            </div>
          ))
        )}
      </div>

      {/* Add Agent Modal */}
      {showAddAgent && (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
          <div className="bg-white rounded-2xl shadow-2xl max-w-lg w-full p-6">
            <div className="flex justify-between items-center mb-6">
              <h2 className="text-xl font-bold text-[#0D1B2A]">Add New Agent</h2>
              <button onClick={() => setShowAddAgent(false)} className="text-gray-400 hover:text-gray-600">â</button>
            </div>
            
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium mb-1">Full Name *</label>
                <input
                  type="text"
                  value={newAgent.fullName}
                  onChange={(e) => setNewAgent({ ...newAgent, fullName: e.target.value })}
                  className="w-full border rounded-lg px-3 py-2"
                />
              </div>
              <div>
                <label className="block text-sm font-medium mb-1">Email *</label>
                <input
                  type="email"
                  value={newAgent.email}
                  onChange={(e) => setNewAgent({ ...newAgent, email: e.target.value })}
                  className="w-full border rounded-lg px-3 py-2"
                />
              </div>
              <div>
                <label className="block text-sm font-medium mb-1">Phone</label>
                <input
                  type="text"
                  value={newAgent.phone}
                  onChange={(e) => setNewAgent({ ...newAgent, phone: e.target.value })}
                  className="w-full border rounded-lg px-3 py-2"
                />
              </div>
              <div>
                <label className="block text-sm font-medium mb-1">Password *</label>
                <input
                  type="password"
                  value={newAgent.password}
                  onChange={(e) => setNewAgent({ ...newAgent, password: e.target.value })}
                  className="w-full border rounded-lg px-3 py-2"
                />
              </div>
              
              <button onClick={handleAddAgent} className="w-full bg-[#2EC4B6] text-white py-3 rounded-lg hover:bg-[#26a599] font-medium">
                Create Account
              </button>
            </div>
          </div>
        </div>
      )}
    </>
  );
}
</file>

<file path="src/pages/AdminApprovals.tsx">
import React, { useEffect, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { CheckCircle, XCircle, Mail, Building } from 'lucide-react';
import { toast } from 'sonner';
import api from '../lib/api';
import { User } from '../types';

export function AdminApprovals() {
  const navigate = useNavigate();
  const [pendingUsers, setPendingUsers] = useState<User[]>([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const fetchPendingUsers = async () => {
      try {
        const response = await api.get('/admin/users/pending');
        setPendingUsers(response.data);
      } catch (error) {
        toast.error("Failed to fetch pending users");
      } finally {
        setLoading(false);
      }
    };
    fetchPendingUsers();
  }, []);

  const handleStatusChange = async (userId: string, status: 'Active' | 'Rejected') => {
    try {
      await api.patch(`/admin/users/${userId}/status`, { status });
      toast.success(`User ${status} successfully`);
      setPendingUsers(prev => prev.filter(u => u.id !== userId));
    } catch (error) {
      toast.error("Failed to update user status");
    }
  };

  return (
    <>
      <div className="mb-8">
        <h1 className="mb-2 text-[#0D1B2A]">User Approvals</h1>
        <p className="text-[#4A5568]">Review and approve new user registrations</p>
      </div>

      <div className="bg-white rounded-xl border border-gray-200 shadow-sm">
        <div className="p-6 border-b border-gray-200">
          <h3 className="text-[#0D1B2A]">Pending User Registrations</h3>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full">
            <thead>
              <tr className="border-b border-gray-200 bg-gray-50">
                <th className="px-6 py-3 text-left text-xs font-semibold text-[#4A5568]">User</th>
                <th className="px-6 py-3 text-left text-xs font-semibold text-[#4A5568]">Role</th>
                <th className="px-6 py-3 text-left text-xs font-semibold text-[#4A5568]">Details</th>
                <th className="px-6 py-3 text-left text-xs font-semibold text-[#4A5568]">Actions</th>
              </tr>
            </thead>
            <tbody>
              {loading ? (
                <tr><td colSpan={4} className="px-6 py-8 text-center text-[#4A5568]">Loading...</td></tr>
              ) : pendingUsers.length === 0 ? (
                <tr>
                  <td colSpan={4} className="p-12 text-center">
                    <CheckCircle className="mx-auto mb-4 text-gray-400" size={64} />
                    <h3 className="mb-2 text-[#0D1B2A]">All Caught Up!</h3>
                    <p className="text-[#4A5568]">No pending user approvals at this time</p>
                  </td>
                </tr>
              ) : (
                pendingUsers.map((user: any) => (
                  <tr key={user.id} className="border-b border-gray-100 hover:bg-gray-50 transition-colors">
                    <td className="px-6 py-4">
                      <div>
                        <p className="font-medium text-[#1A202C]">{user.fullName}</p>
                        <div className="flex items-center gap-1 text-sm text-[#4A5568] mt-1">
                          <Mail size={14} />
                          <span>{user.email}</span>
                        </div>
                      </div>
                    </td>
                    <td className="px-6 py-4">
                      <span className={`px-3 py-1 rounded-full text-xs font-medium ${
                        user.role === 'Client' ? 'bg-blue-100 text-blue-700' : 'bg-purple-100 text-purple-700'
                      }`}>
                        {user.role}
                      </span>
                    </td>
                    <td className="px-6 py-4">
                      {user.ClientProfile?.companyName && (
                        <div className="flex items-center gap-2 text-sm text-[#4A5568]">
                          <Building size={14} />
                          <span>{user.ClientProfile.companyName}</span>
                        </div>
                      )}
                      <p className="text-xs text-[#4A5568]">{user.mobile}</p>
                    </td>
                    <td className="px-6 py-4">
                      <div className="flex gap-2">
                        <button
                          onClick={() => handleStatusChange(user.id, 'Active')}
                          className="flex items-center gap-1 px-3 py-1.5 bg-[#2ECC71] text-white rounded-lg hover:bg-[#27ae60] transition-all text-sm font-medium"
                        >
                          <CheckCircle size={16} /> Approve
                        </button>
                        <button
                          onClick={() => handleStatusChange(user.id, 'Rejected')}
                          className="flex items-center gap-1 px-3 py-1.5 bg-[#E74C3C] text-white rounded-lg hover:bg-[#c0392b] transition-all text-sm font-medium"
                        >
                          <XCircle size={16} /> Reject
                        </button>
                      </div>
                    </td>
                  </tr>
                ))
              )}
            </tbody>
          </table>
        </div>
      </div>
    </>
  );
}
</file>

<file path="src/pages/AdminDashboard.tsx">
import React, { useEffect, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { Users, Briefcase, UserCheck, CheckCircle, XCircle, Save } from 'lucide-react';
import api from '../lib/api';
import { toast } from 'sonner';
import { User, ServiceRequest } from '../types';

export function AdminDashboard() {
  const navigate = useNavigate();
  const [loading, setLoading] = useState(true);
  
  // Data State
  const [pendingUsers, setPendingUsers] = useState<User[]>([]);
  const [pendingRequests, setPendingRequests] = useState<ServiceRequest[]>([]);
  const [agentsList, setAgentsList] = useState<User[]>([]);
  
  const [selectedAssignments, setSelectedAssignments] = useState<Record<string, string>>({});

  const fetchDashboardData = async () => {
    try {
      setLoading(true);
      const [usersRes, requestsRes, agentsRes] = await Promise.all([
        api.get('/admin/users/pending'),
        api.get('/requests'),
        api.get('/admin/agents')
      ]);
      setPendingUsers(usersRes.data);
      setPendingRequests(requestsRes.data);
      setAgentsList(agentsRes.data);
    } catch (error: any) {
      console.error("Dashboard Fetch Error:", error);
      toast.error("Failed to load dashboard data");
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchDashboardData();
  }, []);

  const handleUserStatus = async (userId: string, status: 'Active' | 'Rejected') => {
    try {
      await api.patch(`/admin/users/${userId}/status`, { status });
      toast.success(`User ${status === 'Active' ? 'approved' : 'rejected'} successfully`);
      setPendingUsers(prev => prev.filter(u => u.id !== userId));
    } catch (error: any) {
      toast.error(error.message || "Failed to update user status");
    }
  };

  const handleAssignAgent = async (requestId: string) => {
    const agentId = selectedAssignments[requestId];
    if (!agentId) {
      toast.error("Please select an agent first");
      return;
    }
    try {
      await api.patch(`/requests/${requestId}/assign`, { agentId });
      toast.success("Agent assigned successfully");
      setPendingRequests(prev => prev.filter(r => r.id !== requestId));
      const newAssignments = { ...selectedAssignments };
      delete newAssignments[requestId];
      setSelectedAssignments(newAssignments);
    } catch (error: any) {
      toast.error(error.response?.data?.message || "Failed to assign agent");
    }
  };

  const formatDate = (dateString: string) => {
    if (!dateString) return 'N/A';
    return new Date(dateString).toLocaleDateString('en-US', {
      month: 'short', day: 'numeric', year: 'numeric'
    });
  };

  return (
    <>
      {/* Page Title */}
      <div className="mb-6">
        <p className="text-sm text-[#4A5568] mb-2">Admin Dashboard</p>
      </div>

      {/* Welcome Section */}
      <div className="mb-8">
        <h1 className="mb-1 text-[#1A202C]">Welcome back! ð</h1>
        <p className="text-[#4A5568]">Here's what needs your attention today.</p>
      </div>

      {/* Stats Cards */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
        <div className="bg-white rounded-lg border border-gray-200 p-6">
          <div className="flex items-start justify-between mb-4">
            <p className="text-sm text-[#4A5568]">Pending Approvals</p>
            <div className="w-8 h-8 bg-[#F39C12]/10 rounded-lg flex items-center justify-center">
              <UserCheck size={20} className="text-[#F39C12]" />
            </div>
          </div>
          <p className="text-3xl text-[#1A202C]">{loading ? '-' : pendingUsers.length}</p>
        </div>

        <div className="bg-white rounded-lg border border-gray-200 p-6">
          <div className="flex items-start justify-between mb-4">
            <p className="text-sm text-[#4A5568]">Unassigned Requests</p>
            <div className="w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center">
              <Briefcase size={20} className="text-[#4A5568]" />
            </div>
          </div>
          <p className="text-3xl text-[#1A202C]">{loading ? '-' : pendingRequests.length}</p>
        </div>

        <div className="bg-white rounded-lg border border-gray-200 p-6">
          <div className="flex items-start justify-between mb-4">
            <p className="text-sm text-[#4A5568]">Active Agents</p>
            <div className="w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center">
              <Users size={20} className="text-[#4A5568]" />
            </div>
          </div>
          <p className="text-3xl text-[#1A202C]">{loading ? '-' : agentsList.length}</p>
        </div>
      </div>

      {/* Pending User Approvals */}
      <div className="bg-white rounded-lg border border-gray-200 mb-6">
        <div className="p-4 sm:p-6 border-b border-gray-200">
          <div className="flex items-center gap-2 mb-1">
            <UserCheck size={20} className="text-[#F39C12]" />
            <h3 className="text-[#1A202C]">Pending User Approvals</h3>
          </div>
          <p className="text-sm text-[#4A5568]">New user registrations awaiting approval</p>
        </div>

        <div className="hidden md:block overflow-x-auto">
          <table className="w-full">
            <thead>
              <tr className="border-b border-gray-200">
                <th className="px-6 py-3 text-left text-xs text-[#4A5568]">Name</th>
                <th className="px-6 py-3 text-left text-xs text-[#4A5568]">Email</th>
                <th className="px-6 py-3 text-left text-xs text-[#4A5568]">Role</th>
                <th className="px-6 py-3 text-left text-xs text-[#4A5568]">Registered</th>
                <th className="px-6 py-3 text-left text-xs text-[#4A5568]">Actions</th>
              </tr>
            </thead>
            <tbody>
              {loading ? (
                <tr><td colSpan={5} className="px-6 py-8 text-center text-[#4A5568]">Loading...</td></tr>
              ) : pendingUsers.length === 0 ? (
                <tr><td colSpan={5} className="px-6 py-8 text-center text-[#4A5568]">No pending approvals.</td></tr>
              ) : (
                pendingUsers.map((user: any) => (
                  <tr key={user.id} className="border-b border-gray-100 hover:bg-gray-50">
                    <td className="px-6 py-4 text-sm text-[#1A202C]">{user.fullName || user.name}</td>
                    <td className="px-6 py-4 text-sm text-[#4A5568]">{user.email}</td>
                    <td className="px-6 py-4 text-sm text-[#4A5568] capitalize">{user.role}</td>
                    <td className="px-6 py-4 text-sm text-[#4A5568]">{formatDate(user.createdAt)}</td>
                    <td className="px-6 py-4">
                      <div className="flex gap-2">
                        <button 
                          onClick={() => handleUserStatus(user.id, 'Active')}
                          className="text-[#2ECC71] hover:text-[#27ae60] text-sm flex items-center gap-1"
                        >
                          <CheckCircle size={14} />
                          Approve
                        </button>
                        <button 
                          onClick={() => handleUserStatus(user.id, 'Rejected')}
                          className="text-[#E74C3C] hover:text-[#c0392b] text-sm flex items-center gap-1"
                        >
                          <XCircle size={14} />
                          Reject
                        </button>
                      </div>
                    </td>
                  </tr>
                ))
              )}
            </tbody>
          </table>
        </div>
      </div>

      {/* Request Triage */}
      <div className="bg-white rounded-lg border border-gray-200">
        <div className="p-4 sm:p-6 border-b border-gray-200">
          <div className="flex items-center gap-2 mb-1">
            <Briefcase size={20} className="text-[#E74C3C]" />
            <h3 className="text-[#1A202C]">Unassigned Requests</h3>
          </div>
          <p className="text-sm text-[#4A5568]">Client requests that need to be assigned to agents</p>
        </div>

        <div className="hidden md:block overflow-x-auto">
          <table className="w-full">
            <thead>
              <tr className="border-b border-gray-200">
                <th className="px-6 py-3 text-left text-xs text-[#4A5568]">Client</th>
                <th className="px-6 py-3 text-left text-xs text-[#4A5568]">Category</th>
                <th className="px-6 py-3 text-left text-xs text-[#4A5568]">Priority</th>
                <th className="px-6 py-3 text-left text-xs text-[#4A5568]">Received</th>
                <th className="px-6 py-3 text-left text-xs text-[#4A5568]">Assign To</th>
                <th className="px-6 py-3 text-left text-xs text-[#4A5568]">Actions</th>
              </tr>
            </thead>
            <tbody>
              {loading ? (
                <tr><td colSpan={6} className="px-6 py-8 text-center text-[#4A5568]">Loading...</td></tr>
              ) : pendingRequests.length === 0 ? (
                <tr><td colSpan={6} className="px-6 py-8 text-center text-[#4A5568]">No unassigned requests.</td></tr>
              ) : (
                pendingRequests.map((request: any) => (
                  <tr key={request.id} className="border-b border-gray-100 hover:bg-gray-50">
                    <td className="px-6 py-4 text-sm text-[#1A202C]">
                      {request.Client?.companyName || "Unknown Client"}
                    </td>
                    <td className="px-6 py-4 text-sm text-[#4A5568]">
                      {request.Category?.name || "General"}
                    </td>
                    <td className="px-6 py-4 text-sm">
                      <span
                        className={`px-2 py-1 rounded text-xs ${
                          request.priority === 'High'
                            ? 'bg-[#E74C3C]/10 text-[#E74C3C]'
                            : request.priority === 'Medium'
                            ? 'bg-[#F39C12]/10 text-[#F39C12]'
                            : 'bg-[#3498DB]/10 text-[#3498DB]'
                        }`}
                      >
                        {(request.priority || 'Medium').toUpperCase()}
                      </span>
                    </td>
                    <td className="px-6 py-4 text-sm text-[#4A5568]">{formatDate(request.createdAt)}</td>
                    <td className="px-6 py-4">
                      <select 
                        className="px-3 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:border-[#2EC4B6]"
                        value={selectedAssignments[request.id] || ""}
                        onChange={(e) => setSelectedAssignments({
                          ...selectedAssignments,
                          [request.id]: e.target.value
                        })}
                      >
                        <option value="">Select agent...</option>
                        {agentsList.map((agent: any) => (
                          <option key={agent.id} value={agent.id}>
                            {agent.fullName || agent.name}
                          </option>
                        ))}
                      </select>
                    </td>
                    <td className="px-6 py-4">
                      <button 
                        onClick={() => handleAssignAgent(request.id)}
                        disabled={!selectedAssignments[request.id]}
                        className="text-[#2EC4B6] hover:text-[#26a599] text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1"
                      >
                        <Save size={16} />
                        Assign
                      </button>
                    </td>
                  </tr>
                ))
              )}
            </tbody>
          </table>
        </div>
      </div>
    </>
  );
}
</file>

<file path="src/pages/AgentClients.tsx">
import React, { useEffect, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { Mail, Building, ExternalLink, Loader2 } from 'lucide-react';
import { Client } from '../types';
import api from '../lib/api';
import { toast } from 'sonner';

export function AgentClients() {
  const navigate = useNavigate();
  const [clients, setClients] = useState<Client[]>([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const fetchClients = async () => {
      try {
        const res = await api.get('/clients/agent-list');
        setClients(res.data);
      } catch (error) {
        toast.error("Failed to load clients");
      } finally {
        setLoading(false);
      }
    };
    fetchClients();
  }, []);

  if (loading) {
    return (
      <div className="flex items-center justify-center h-screen">
        <Loader2 className="w-8 h-8 text-[#2EC4B6] animate-spin" />
      </div>
    );
  }

  // Derived Stats - FIXED: Added (c.activeProjects ?? 0) to handle undefined safely
  const activeClients = clients.filter(c => (c.activeProjects ?? 0) > 0).length;
  const totalActiveProjects = clients.reduce((sum, c) => sum + (c.activeProjects ?? 0), 0);

  return (
    <>
      {/* Page Header */}
      <div className="mb-8">
        <h1 className="mb-2 text-[#0D1B2A]">Clients</h1>
        <p className="text-[#4A5568]">Manage your client relationships and track their projects</p>
      </div>

      {/* Stats Cards */}
      <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
        <div className="bg-white rounded-lg border border-gray-200 p-6 shadow-sm">
          <p className="text-sm text-[#4A5568] mb-2">Total Clients</p>
          <p className="text-3xl font-semibold text-[#2EC4B6]">{clients.length}</p>
        </div>
        <div className="bg-white rounded-lg border border-gray-200 p-6 shadow-sm">
          <p className="text-sm text-[#4A5568] mb-2">Active Clients</p>
          <p className="text-3xl font-semibold text-[#2ECC71]">{activeClients}</p>
        </div>
        <div className="bg-white rounded-lg border border-gray-200 p-6 shadow-sm">
          <p className="text-sm text-[#4A5568] mb-2">Active Projects</p>
          <p className="text-3xl font-semibold text-[#F39C12]">{totalActiveProjects}</p>
        </div>
      </div>

      {/* Clients Grid */}
      {clients.length === 0 ? (
        <div className="bg-white rounded-xl border border-gray-200 p-12 text-center text-gray-500">
          No clients assigned yet.
        </div>
      ) : (
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {clients.map((client) => (
            <div key={client.id} className="bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow">
              <div className="flex justify-between items-start mb-4">
                <div className="flex items-start gap-4">
                  <div className="w-12 h-12 bg-gradient-to-br from-[#2EC4B6] to-[#26a599] rounded-full flex items-center justify-center text-white font-semibold">
                    {client.name.split(' ').map(n => n[0]).join('')}
                  </div>
                  <div>
                    <h3 className="font-semibold text-[#0D1B2A] mb-1">{client.name}</h3>
                    <p className="text-sm text-[#4A5568]">{client.company}</p>
                  </div>
                </div>
                <span className={`px-3 py-1 rounded-full text-xs font-medium ${
                  (client.activeProjects ?? 0) > 0
                    ? 'bg-green-100 text-green-700' 
                    : 'bg-gray-100 text-gray-700'
                }`}>
                  {(client.activeProjects ?? 0) > 0 ? 'Active' : 'Inactive'}
                </span>
              </div>

              <div className="space-y-3 mb-4">
                <div className="flex items-center gap-3 text-sm">
                  <Mail className="text-[#4A5568]" size={16} />
                  <span className="text-[#4A5568]">{client.email}</span>
                </div>
                {client.industry && (
                  <div className="flex items-center gap-3 text-sm">
                    <Building className="text-[#4A5568]" size={16} />
                    <span className="text-[#4A5568]">{client.industry}</span>
                  </div>
                )}
              </div>

              <div className="grid grid-cols-3 gap-4 py-4 border-t border-gray-200">
                <div>
                  <p className="text-xs text-[#4A5568] mb-1">Total Projects</p>
                  <p className="font-semibold text-[#1A202C]">{client.projectsCount}</p>
                </div>
                <div>
                  <p className="text-xs text-[#4A5568] mb-1">Active</p>
                  <p className="font-semibold text-[#2EC4B6]">{client.activeProjects ?? 0}</p>
                </div>
                <div>
                  <p className="text-xs text-[#4A5568] mb-1">Joined</p>
                  <p className="font-semibold text-[#1A202C]">
                    {new Date(client.joinedDate).toLocaleDateString()}
                  </p>
                </div>
              </div>

              <button
                className="w-full bg-[#2EC4B6] text-white px-4 py-2.5 rounded-lg hover:bg-[#26a599] transition-all font-medium flex items-center justify-center gap-2 h-[44px] cursor-not-allowed opacity-70"
                title="Client details view coming soon"
              >
                <ExternalLink size={18} />
                View Details
              </button>
            </div>
          ))}
        </div>
      )}
    </>
  );
}
</file>

<file path="src/pages/AgentDashboard.tsx">
import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { Briefcase, FolderOpen, Clock, Loader2, Eye, Send, RefreshCw, FilePlus } from 'lucide-react';
import { ProposalGenerator } from '../components/ProposalGenerator';
import { StatusBadge } from '../components/StatusBadge';
import { Project } from '../types';
import api from '../lib/api';
import { toast } from 'sonner';

export function AgentDashboard() {
  const navigate = useNavigate();
  const [showProposalModal, setShowProposalModal] = useState(false);
  const [selectedRequest, setSelectedRequest] = useState<any | null>(null);
  
  const [requests, setRequests] = useState<any[]>([]);
  const [projects, setProjects] = useState<Project[]>([]);
  const [loading, setLoading] = useState(true);
  const [sendingId, setSendingId] = useState<string | null>(null);

  const fetchData = async () => {
    try {
      const [requestsRes, projectsRes] = await Promise.all([
        api.get('/requests'),
        api.get('/projects')
      ]);

      const mappedRequests = requestsRes.data.map((req: any) => ({
        id: req.id.toString(),
        client: req.Client?.companyName || 'Unknown Client',
        clientEmail: req.Client?.User?.email || '',
        category: req.Category?.name || 'General',
        priority: req.priority,
        createdAt: new Date(req.createdAt).toLocaleDateString(),
        status: req.status === 'Assigned' ? 'pending' : req.status.toLowerCase(),
        details: req.details,
        // Proposal Info
        pdfPath: req.Proposal?.pdfPath,
        proposalId: req.Proposal?.id,
        proposalStatus: req.Proposal?.status // 'Draft', 'Sent', etc.
      }));

      const mappedProjects: Project[] = projectsRes.data.map((p: any) => ({
        id: p.id.toString(),
        name: `Project #${p.id}`,
        client: p.Client?.companyName || 'Unknown',
        status: mapBackendStatus(p.globalStatus),
        progress: p.progressPercent || 0,
        ecd: p.ecd ? new Date(p.ecd).toLocaleDateString() : 'TBD',
        category: p.Request?.Category?.name || 'General'
      }));

      setRequests(mappedRequests);
      setProjects(mappedProjects);
    } catch (error) {
      console.error("Dashboard Load Error", error);
      toast.error("Failed to load dashboard data");
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    fetchData();
  }, []);

  const mapBackendStatus = (status: string) => {
    const lower = status?.toLowerCase() || '';
    if (lower === 'in progress') return 'in-progress';
    if (lower === 'pending') return 'planning';
    return lower;
  };

  const getPDFUrl = (path: string) => {
    const baseUrl = import.meta.env.VITE_API_URL 
      ? import.meta.env.VITE_API_URL.replace('/api/v1', '') 
      : 'http://localhost:3000';
    return `${baseUrl}/${path.replace(/\\/g, '/')}`;
  };

  const handleSendToClient = async (proposalId: string) => {
    if (!window.confirm("Send this proposal to the client? This will email them and update their dashboard.")) return;
    
    setSendingId(proposalId);
    try {
      await api.post(`/proposals/${proposalId}/send`, {});
      toast.success("Proposal sent successfully!");
      fetchData(); // Refresh to update status
    } catch (error: any) {
      toast.error(error.response?.data?.message || "Failed to send proposal");
    } finally {
      setSendingId(null);
    }
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center h-96">
        <Loader2 className="w-8 h-8 text-[#2EC4B6] animate-spin" />
      </div>
    );
  }

  const relevantRequests = requests.filter(r => 
    r.status === 'pending' || 
    r.status === 'assigned' || 
    r.status === 'new' || 
    r.status === 'quoted'
  );

  return (
    <>
      <div className="mb-6">
        <p className="text-sm text-[#4A5568] mb-2">Agent Dashboard</p>
      </div>

      <div className="mb-8">
        <h1 className="mb-1 text-[#1A202C]">Welcome back! ð</h1>
        <p className="text-[#4A5568]">Here's what needs your attention today.</p>
      </div>

      {/* Stats */}
      <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
        <div className="bg-white rounded-lg border border-gray-200 p-6">
          <div className="flex items-start justify-between mb-4">
            <p className="text-sm text-[#4A5568]">Relevant Requests</p>
            <div className="w-8 h-8 bg-[#2EC4B6]/10 rounded-lg flex items-center justify-center">
              <Briefcase className="text-[#2EC4B6]" size={20} />
            </div>
          </div>
          <p className="text-3xl text-[#2EC4B6]">{relevantRequests.length}</p>
        </div>

        <div className="bg-white rounded-lg border border-gray-200 p-6">
          <div className="flex items-start justify-between mb-4">
            <p className="text-sm text-[#4A5568]">Active Projects</p>
            <div className="w-8 h-8 bg-[#F39C12]/10 rounded-lg flex items-center justify-center">
              <FolderOpen className="text-[#F39C12]" size={20} />
            </div>
          </div>
          <p className="text-3xl text-[#F39C12]">{projects.length}</p>
        </div>
      </div>

      {/* Service Requests Table */}
      <div className="bg-white rounded-lg border border-gray-200 mb-6">
        <div className="p-4 sm:p-6 border-b border-gray-200">
          <div className="flex items-center gap-2 mb-1">
            <Briefcase className="text-[#2EC4B6]" size={20} />
            <h3 className="text-[#1A202C]">Service Requests</h3>
          </div>
          <p className="text-sm text-[#4A5568]">Manage client requests and proposals.</p>
        </div>

        <div className="hidden md:block overflow-x-auto">
          <table className="w-full">
            <thead>
              <tr className="border-b border-gray-200">
                <th className="px-6 py-3 text-left text-xs text-[#4A5568] font-semibold">Client</th>
                <th className="px-6 py-3 text-left text-xs text-[#4A5568] font-semibold">Category</th>
                <th className="px-6 py-3 text-left text-xs text-[#4A5568] font-semibold">Priority</th>
                <th className="px-6 py-3 text-left text-xs text-[#4A5568] font-semibold">Date</th>
                <th className="px-6 py-3 text-left text-xs text-[#4A5568] font-semibold">Status</th>
                <th className="px-6 py-3 text-center text-xs text-[#4A5568] font-semibold">Actions</th>
              </tr>
            </thead>
            <tbody>
              {relevantRequests.length === 0 ? (
                <tr><td colSpan={6} className="px-6 py-8 text-center text-[#4A5568]">No requests found.</td></tr>
              ) : (
                relevantRequests.map((request) => (
                  <tr key={request.id} className="border-b border-gray-100 hover:bg-gray-50 transition-colors">
                    <td className="px-6 py-4">
                      <div>
                        <p className="text-sm font-medium text-[#1A202C]">{request.client}</p>
                        <p className="text-xs text-[#4A5568]">{request.clientEmail}</p>
                      </div>
                    </td>
                    <td className="px-6 py-4 text-sm text-[#1A202C]">{request.category}</td>
                    <td className="px-6 py-4">
                      <span className={`px-2 py-1 rounded text-xs ${
                        request.priority === 'High' ? 'bg-red-100 text-red-700' : 'bg-yellow-100 text-yellow-700'
                      }`}>
                        {request.priority || 'Medium'}
                      </span>
                    </td>
                    <td className="px-6 py-4 text-sm text-[#4A5568]">{request.createdAt}</td>
                    <td className="px-6 py-4">
                      {/* Custom Badge Logic based on Proposal Status */}
                      {request.proposalStatus === 'Draft' ? (
                        <span className="bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-xs font-medium">Draft Generated</span>
                      ) : request.proposalStatus === 'Sent' ? (
                        <span className="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-xs font-medium">Sent to Client</span>
                      ) : (
                        <StatusBadge status={request.status} label="Pending Review" />
                      )}
                    </td>
                    <td className="px-6 py-4">
                      <div className="flex items-center justify-center gap-2">
                        
                        {/* CASE 1: No PDF Generated yet */}
                        {!request.pdfPath && (
                          <button
                            onClick={() => {
                              setSelectedRequest(request);
                              setShowProposalModal(true);
                            }}
                            className="bg-[#2EC4B6] text-white px-3 py-1.5 rounded text-xs font-medium hover:bg-[#26a599] transition-colors flex items-center gap-1"
                          >
                            <FilePlus size={14} /> Create Proposal
                          </button>
                        )}

                        {/* CASE 2: PDF Generated (Draft or Sent) */}
                        {request.pdfPath && (
                          <>
                            {/* 1. View PDF */}
                            <button
                              onClick={() => window.open(getPDFUrl(request.pdfPath), '_blank')}
                              className="text-gray-600 hover:text-[#3498DB] p-2 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors"
                              title="View Generated PDF"
                            >
                              <Eye size={16} />
                            </button>

                            {/* 2. Send to Client (Only if Draft) */}
                            {request.proposalStatus === 'Draft' && (
                              <button
                                onClick={() => handleSendToClient(request.proposalId)}
                                disabled={sendingId === request.proposalId}
                                className="text-white bg-[#3498DB] hover:bg-[#2980B9] px-3 py-1.5 rounded text-xs font-medium flex items-center gap-1 transition-colors disabled:opacity-70"
                                title="Send to Client Dashboard & Email"
                              >
                                {sendingId === request.proposalId ? <Loader2 className="animate-spin" size={14}/> : <Send size={14} />}
                                Send to Client
                              </button>
                            )}

                            {/* 3. Re-create / Overwrite */}
                            <button
                              onClick={() => {
                                if(window.confirm("This will overwrite the existing proposal draft. Continue?")) {
                                  setSelectedRequest(request);
                                  setShowProposalModal(true);
                                }
                              }}
                              className="text-gray-500 hover:text-[#E74C3C] p-2 rounded-lg hover:bg-red-50 transition-colors"
                              title="Create New (Overwrite)"
                            >
                              <RefreshCw size={16} />
                            </button>
                          </>
                        )}
                      </div>
                    </td>
                  </tr>
                ))
              )}
            </tbody>
          </table>
        </div>
      </div>

      {/* Active Projects */}
      <div className="bg-white rounded-lg border border-gray-200 mb-6">
        <div className="p-6 border-b border-gray-200 flex justify-between items-start">
          <div>
            <div className="flex items-center gap-2 mb-1">
              <FolderOpen className="text-[#F39C12]" size={20} />
              <h3 className="text-[#1A202C]">Active Projects</h3>
            </div>
            <p className="text-sm text-[#4A5568]">Manage ongoing client projects</p>
          </div>
          <button onClick={() => navigate('/agent/projects')} className="text-[#2EC4B6] hover:text-[#26a599] text-sm font-medium">
            View All
          </button>
        </div>

        <div className="p-6 space-y-4">
          {projects.length === 0 ? (
            <div className="text-center py-4 text-gray-500">No active projects.</div>
          ) : (
            projects.map((project) => (
              <div key={project.id} className="border border-gray-200 rounded-lg p-4 hover:border-[#2EC4B6] transition-colors">
                <div className="flex justify-between items-start mb-3">
                  <div>
                    <h4 className="font-medium text-[#1A202C] mb-1">{project.name}</h4>
                    <p className="text-sm text-[#4A5568]">{project.client}</p>
                  </div>
                  <StatusBadge status={project.status} />
                </div>
                <div className="flex justify-between items-center">
                  <div className="flex items-center gap-2 text-xs text-[#4A5568]">
                    <Clock size={14} />
                    <span>ECD: {project.ecd}</span>
                  </div>
                  <button
                    onClick={() => navigate('/agent/project-management/' + project.id)}
                    className="text-[#2EC4B6] hover:text-[#26a599] text-sm font-medium"
                  >
                    Manage â
                  </button>
                </div>
              </div>
            ))
          )}
        </div>
      </div>

      {/* Proposal Generator Modal */}
      {showProposalModal && selectedRequest && (
        <ProposalGenerator
          requestId={selectedRequest.id}
          clientEmail={selectedRequest.clientEmail}
          clientName={selectedRequest.client}
          serviceCategory={selectedRequest.category}
          onClose={() => {
            setShowProposalModal(false);
            setSelectedRequest(null);
          }}
          onSuccess={() => {
            fetchData(); 
          }}
        />
      )}
    </>
  );
}
</file>

<file path="src/pages/AgentProfile.tsx">
import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { Edit2, Mail, Phone, Award, Briefcase, Save, Loader2, Shield } from 'lucide-react';
import { useAuth } from '../contexts/AuthContext';
import api from '../lib/api';
import { toast } from 'sonner';

export function AgentProfile() {
  const navigate = useNavigate();
  const { user, updateUser } = useAuth();
  const [isEditing, setIsEditing] = useState(false);
  const [loading, setLoading] = useState(true);
  
  const [formData, setFormData] = useState({
    fullName: '',
    email: '',
    phone: '',
    currentPassword: '',
    newPassword: '',
    confirmPassword: ''
  });

  const [stats, setStats] = useState({
    totalClients: 0,
    activeProjects: 0,
    completedProjects: 0,
    totalRevenue: '$0', // Backend revenue tracking not implemented yet
    avgRating: 5.0
  });

  useEffect(() => {
    const fetchData = async () => {
      try {
        // 1. Fetch User Details
        const userRes = await api.get('/auth/me');
        const userData = userRes.data;

        setFormData(prev => ({
          ...prev,
          fullName: userData.fullName || '',
          email: userData.email || '',
          phone: userData.mobile || ''
        }));

        // 2. Fetch Projects for Stats
        const projectsRes = await api.get('/projects');
        const projects = projectsRes.data;
        
        // Calculate Stats
        const active = projects.filter((p: any) => p.globalStatus === 'In Progress' || p.globalStatus === 'Pending').length;
        const completed = projects.filter((p: any) => p.globalStatus === 'Delivered').length;
        
        // Count unique clients
        const uniqueClients = new Set(projects.map((p: any) => p.clientId)).size;

        setStats(prev => ({
          ...prev,
          activeProjects: active,
          completedProjects: completed,
          totalClients: uniqueClients
        }));

      } catch (error) {
        console.error("Profile load error", error);
        toast.error("Failed to load profile data");
      } finally {
        setLoading(false);
      }
    };

    fetchData();
  }, []);

  const handleSave = async () => {
    if (formData.newPassword && formData.newPassword !== formData.confirmPassword) {
      toast.error("New passwords do not match");
      return;
    }

    try {
      const payload: any = {
        fullName: formData.fullName,
        mobile: formData.phone
      };

      if (formData.newPassword) {
        payload.password = formData.newPassword;
      }

      const res = await api.put('/auth/me', payload);
      
      // Update Context
      updateUser({ name: formData.fullName });
      
      toast.success("Profile updated successfully");
      setIsEditing(false);
      
      // Clear password fields
      setFormData(prev => ({ ...prev, currentPassword: '', newPassword: '', confirmPassword: '' }));
    } catch (error: any) {
      toast.error(error.message || "Failed to update profile");
    }
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center h-screen">
        <Loader2 className="w-8 h-8 text-[#2EC4B6] animate-spin" />
      </div>
    );
  }

  return (
    <>
      {/* Page Header */}
      <div className="flex justify-between items-start mb-8">
        <div>
          <h1 className="mb-2 text-[#0D1B2A]">My Profile</h1>
          <p className="text-[#4A5568]">Manage your professional information and settings</p>
        </div>
        <button
          onClick={() => setIsEditing(!isEditing)}
          className={`flex items-center gap-2 px-6 py-2.5 rounded-lg font-medium transition-all h-[44px] border-2 ${
            isEditing 
              ? 'bg-gray-100 border-gray-300 text-gray-700' 
              : 'border-[#2EC4B6] text-[#2EC4B6] hover:bg-[#F0FDFA]'
          }`}
        >
          <Edit2 size={18} />
          {isEditing ? 'Cancel Editing' : 'Edit Profile'}
        </button>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* Left Column - Profile Card & Stats */}
        <div className="space-y-6">
          {/* Profile Card */}
          <div className="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
            <div className="text-center mb-6">
              <div className="w-24 h-24 bg-gradient-to-br from-[#2EC4B6] to-[#26a599] rounded-full mx-auto mb-4 flex items-center justify-center text-white text-3xl font-semibold">
                {formData.fullName.charAt(0).toUpperCase()}
              </div>
              <h3 className="text-[#0D1B2A] mb-1">{formData.fullName}</h3>
              <p className="text-sm text-[#4A5568] mb-2">Digital Agent</p>
              <div className="flex items-center justify-center gap-2">
                <Award className="text-[#F39C12]" size={16} />
                <span className="text-sm font-medium text-[#F39C12]">{stats.avgRating} Rating</span>
              </div>
            </div>

            <div className="space-y-4 pt-4 border-t border-gray-200">
              <div className="flex items-center gap-3">
                <div className="w-10 h-10 bg-[#2EC4B6]/10 rounded-lg flex items-center justify-center">
                  <Mail className="text-[#2EC4B6]" size={18} />
                </div>
                <div className="flex-1 min-w-0">
                  <p className="text-xs text-[#4A5568]">Email</p>
                  <p className="text-sm font-medium text-[#1A202C] truncate">{formData.email}</p>
                </div>
              </div>

              <div className="flex items-center gap-3">
                <div className="w-10 h-10 bg-[#3498DB]/10 rounded-lg flex items-center justify-center">
                  <Phone className="text-[#3498DB]" size={18} />
                </div>
                <div className="flex-1">
                  <p className="text-xs text-[#4A5568]">Phone</p>
                  <p className="text-sm font-medium text-[#1A202C]">{formData.phone || 'Not Set'}</p>
                </div>
              </div>
            </div>
          </div>

          {/* Performance Stats */}
          <div className="bg-gradient-to-br from-[#0D1B2A] to-[#1a2d42] rounded-xl p-6 text-white shadow-lg">
            <h4 className="text-white mb-4">Performance Stats</h4>
            <div className="space-y-3">
              <div className="flex justify-between items-center">
                <span className="text-sm text-gray-300">Total Clients</span>
                <span className="font-semibold">{stats.totalClients}</span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm text-gray-300">Active Projects</span>
                <span className="font-semibold">{stats.activeProjects}</span>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm text-gray-300">Completed</span>
                <span className="font-semibold">{stats.completedProjects}</span>
              </div>
            </div>
          </div>
        </div>

        {/* Right Column - Details Form */}
        <div className="lg:col-span-2 space-y-6">
          
          {/* General Information */}
          <div className="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
            <h3 className="text-[#0D1B2A] mb-6">General Information</h3>
            
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label className="block text-sm font-medium text-[#1A202C] mb-2">Full Name</label>
                <input
                  type="text"
                  value={formData.fullName}
                  onChange={(e) => setFormData({ ...formData, fullName: e.target.value })}
                  className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6] disabled:bg-gray-50 disabled:text-gray-500"
                  disabled={!isEditing}
                />
              </div>
              
              <div>
                <label className="block text-sm font-medium text-[#1A202C] mb-2">Email Address</label>
                <input
                  type="email"
                  value={formData.email}
                  disabled
                  className="w-full px-4 py-2.5 border border-gray-300 rounded-lg bg-gray-100 text-gray-500 cursor-not-allowed"
                  title="Email cannot be changed"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-[#1A202C] mb-2">Phone Number</label>
                <input
                  type="text"
                  value={formData.phone}
                  onChange={(e) => setFormData({ ...formData, phone: e.target.value })}
                  className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6] disabled:bg-gray-50 disabled:text-gray-500"
                  disabled={!isEditing}
                  placeholder="+971..."
                />
              </div>
            </div>
          </div>

          {/* Security Settings (Password Update) */}
          <div className="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
            <div className="flex items-center gap-3 mb-6">
              <Shield className="text-[#2EC4B6]" size={24} />
              <h3 className="text-[#0D1B2A]">Security Settings</h3>
            </div>
            
            {isEditing ? (
              <div className="space-y-4">
                <p className="text-sm text-[#4A5568] bg-blue-50 p-3 rounded-lg">
                  Leave these fields blank if you do not want to change your password.
                </p>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label className="block text-sm font-medium text-[#1A202C] mb-2">New Password</label>
                    <input
                      type="password"
                      value={formData.newPassword}
                      onChange={(e) => setFormData({ ...formData, newPassword: e.target.value })}
                      className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6]"
                      placeholder="Min 8 characters"
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-[#1A202C] mb-2">Confirm New Password</label>
                    <input
                      type="password"
                      value={formData.confirmPassword}
                      onChange={(e) => setFormData({ ...formData, confirmPassword: e.target.value })}
                      className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:border-[#2EC4B6]"
                      placeholder="Confirm password"
                    />
                  </div>
                </div>
              </div>
            ) : (
              <p className="text-sm text-gray-500 italic">Click "Edit Profile" to change your password.</p>
            )}
          </div>

          {/* Action Buttons */}
          {isEditing && (
            <div className="flex gap-4">
              <button
                onClick={handleSave}
                className="flex-1 bg-[#2EC4B6] hover:bg-[#26a599] text-white py-3 rounded-lg transition-all font-medium h-[48px] flex items-center justify-center gap-2"
              >
                <Save size={18} />
                Save Changes
              </button>
              <button
                onClick={() => {
                  setIsEditing(false);
                  setFormData(prev => ({ ...prev, newPassword: '', confirmPassword: '' }));
                }}
                className="flex-1 bg-white border-2 border-gray-300 text-[#1A202C] py-3 rounded-lg hover:bg-gray-50 transition-all font-medium h-[48px]"
              >
                Cancel
              </button>
            </div>
          )}
        </div>
      </div>
    </>
  );
}
</file>

<file path="src/pages/AgentProjects.tsx">
import React, { useEffect, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { ExternalLink, Briefcase, Loader2 } from 'lucide-react';
import { StatusBadge } from '../components/StatusBadge';
import { Project } from '../types';
import api from '../lib/api';
import { toast } from 'sonner';

export function AgentProjects() {
  const navigate = useNavigate();
  const [projects, setProjects] = useState<Project[]>([]);
  const [loading, setLoading] = useState(true);
  const [activeFilter, setActiveFilter] = React.useState<'all' | 'planning' | 'in-progress' | 'review' | 'completed'>('all');

  useEffect(() => {
    const fetchProjects = async () => {
      try {
        const res = await api.get('/projects');
        const mappedData: Project[] = res.data.map((p: any) => ({
          id: p.id.toString(),
          name: `Project #${p.id}`,
          client: p.Client?.companyName || 'Unknown',
          category: p.Request?.Category?.name || 'Service',
          status: mapStatus(p.globalStatus),
          progress: p.progressPercent || 0,
          startDate: new Date(p.createdAt).toLocaleDateString(),
          estimatedCompletion: p.ecd ? new Date(p.ecd).toLocaleDateString() : 'TBD',
          budget: p.Request?.Proposal?.totalAmount ? `$${p.Request.Proposal.totalAmount}` : 'TBD',
          milestones: [],
          deliverables: []
        }));
        setProjects(mappedData);
      } catch (error) {
        toast.error("Failed to load projects");
      } finally {
        setLoading(false);
      }
    };
    fetchProjects();
  }, []);

  const mapStatus = (status: string) => {
    const lower = status?.toLowerCase() || 'pending';
    if (lower === 'pending') return 'planning';
    if (lower === 'in progress') return 'in-progress';
    if (lower === 'delivered') return 'review';
    return lower;
  };

  const filteredProjects = activeFilter === 'all' 
    ? projects 
    : projects.filter(p => p.status === activeFilter);

  const filterButtons = [
    { id: 'all', label: 'All Projects' },
    { id: 'in-progress', label: 'In Progress' },
    { id: 'planning', label: 'Planning' },
    { id: 'review', label: 'Review' },
    { id: 'completed', label: 'Completed' },
  ];

  if (loading) {
    return (
      <div className="flex items-center justify-center h-screen">
        <Loader2 className="w-8 h-8 text-[#2EC4B6] animate-spin" />
      </div>
    );
  }

  return (
    <>
      <div className="mb-8">
        <h1 className="mb-2 text-[#0D1B2A]">Projects</h1>
        <p className="text-[#4A5568]">Manage and track all your client projects</p>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
        <div className="bg-white rounded-lg border border-gray-200 p-6 shadow-sm">
          <p className="text-sm text-[#4A5568] mb-2">Total Projects</p>
          <p className="text-3xl font-semibold text-[#2EC4B6]">{projects.length}</p>
        </div>
        <div className="bg-white rounded-lg border border-gray-200 p-6 shadow-sm">
          <p className="text-sm text-[#4A5568] mb-2">In Progress</p>
          <p className="text-3xl font-semibold text-[#F39C12]">{projects.filter(p => p.status === 'in-progress').length}</p>
        </div>
      </div>

      <div className="flex gap-3 mb-6 overflow-x-auto pb-2">
        {filterButtons.map((filter) => (
          <button
            key={filter.id}
            className={`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-all ${
              filter.id === activeFilter
                ? 'bg-[#2EC4B6] text-white'
                : 'bg-white text-[#4A5568] border border-gray-200 hover:border-[#2EC4B6]'
            }`}
            onClick={() => setActiveFilter(filter.id as any)}
          >
            {filter.label}
          </button>
        ))}
      </div>

      <div className="space-y-4">
        {filteredProjects.length > 0 ? (
          filteredProjects.map((project) => (
            <div key={project.id} className="bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow">
              <div className="flex justify-between items-start mb-4">
                <div className="flex-1">
                  <div className="flex items-center gap-3 mb-2">
                    <h3 className="font-semibold text-[#0D1B2A]">{project.name}</h3>
                    <StatusBadge status={project.status} />
                  </div>
                  <div className="flex items-center gap-4 text-sm text-[#4A5568]">
                    <span>{project.client}</span>
                    <span>â¢</span>
                    <span>{project.category}</span>
                  </div>
                </div>
                <div className="text-right">
                  <p className="text-sm text-[#4A5568] mb-1">Budget</p>
                  <p className="text-xl font-semibold text-[#2EC4B6]">{project.budget}</p>
                </div>
              </div>

              <div className="mb-4">
                <div className="flex justify-between text-sm mb-2">
                  <span className="text-[#4A5568]">Progress</span>
                  <span className="text-[#1A202C] font-medium">{project.progress}%</span>
                </div>
                <div className="w-full bg-gray-200 rounded-full h-2.5">
                  <div
                    className="bg-gradient-to-r from-[#2EC4B6] to-[#26a599] h-2.5 rounded-full transition-all duration-500"
                    style={{ width: `${project.progress}%` }}
                  ></div>
                </div>
              </div>

              <div className="flex items-center justify-end">
                <button
                  onClick={() => navigate(`/agent/project-management/${project.id}`)}
                  className="bg-[#2EC4B6] text-white px-6 py-2.5 rounded-lg hover:bg-[#26a599] transition-all font-medium flex items-center gap-2 h-[44px]"
                >
                  <ExternalLink size={18} />
                  Manage
                </button>
              </div>
            </div>
          ))
        ) : (
          <div className="bg-white rounded-xl border border-gray-200 p-12 text-center">
            <Briefcase className="mx-auto mb-4 text-gray-400" size={64} />
            <h3 className="mb-2 text-[#0D1B2A]">No Projects Found</h3>
          </div>
        )}
      </div>
    </>
  );
}
</file>

<file path="src/pages/ClientDashboard.tsx">
import React, { useEffect, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { Plus, FileText, FolderOpen, ArrowRight, AlertCircle, Download, Check, Loader2 } from 'lucide-react';
import { StatusBadge } from '../components/StatusBadge';
import { useAuth } from '../contexts/AuthContext';
import { ServiceRequest } from '../types';
import api from '../lib/api';
import { toast } from 'sonner';

export function ClientDashboard() {
  const navigate = useNavigate();
  const { user } = useAuth();
  
  // State for real data
  const [requests, setRequests] = useState<ServiceRequest[]>([]);
  const [loading, setLoading] = useState(true);

  // Helper function to map Backend Database Status -> Frontend Visual Status
  const mapBackendStatus = (dbStatus: string) => {
    switch (dbStatus) {
      case 'Pending Triage': return 'pending-review';
      case 'Assigned': return 'in-progress';
      case 'Quoted': return 'action-required';
      case 'Converted': return 'approved';
      case 'Rejected': return 'rejected';
      default: return 'pending';
    }
  };

  const fetchRequests = async () => {
    try {
      const response = await api.get('/requests');
      
      const mappedRequests = response.data.map((req: any) => ({
        id: req.id.toString(),
        client: user?.name || '',
        clientEmail: user?.email || '',
        category: req.Category?.name || 'General Service',
        dateSubmitted: new Date(req.createdAt).toLocaleDateString('en-US', {
          month: 'short', day: 'numeric', year: 'numeric'
        }),
        createdAt: req.createdAt,
        status: mapBackendStatus(req.status),
        details: req.details,
        proposalAmount: req.Proposal ? `$${req.Proposal.totalAmount}` : undefined,
        proposalId: req.Proposal?.id,
        pdfPath: req.Proposal?.pdfPath
      }));

      setRequests(mappedRequests);
    } catch (error) {
      console.error("Failed to fetch requests:", error);
      toast.error("Could not load your requests. Please try again.");
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    if (user) {
      fetchRequests();
    }
  }, [user]);

  const handleViewPdf = (pdfPath?: string) => {
    if (!pdfPath) {
      toast.error("Proposal PDF not available");
      return;
    }
    
    // Construct proper URL
    // import.meta.env.VITE_API_URL is typically "http://localhost:3000/api/v1"
    // Backend serves static files at root "/uploads" -> "http://localhost:3000/uploads/..."
    const baseUrl = import.meta.env.VITE_API_URL 
      ? import.meta.env.VITE_API_URL.replace('/api/v1', '') 
      : 'http://localhost:3000';
    
    const cleanPath = pdfPath.replace(/\\/g, '/'); // Fix Windows backslashes
    const fullUrl = `${baseUrl}/${cleanPath}`;
    
    window.open(fullUrl, '_blank');
  };

  const handleAcceptProposal = async (proposalId?: string) => {
    if (!proposalId) return;
    
    if(!window.confirm("Are you sure you want to accept this proposal? A new project will be created.")) return;

    try {
      await api.patch(`/proposals/${proposalId}/accept`);
      toast.success("Proposal Accepted! Project started.");
      fetchRequests(); // Refresh data
    } catch (error) {
      toast.error("Failed to accept proposal");
    }
  };

  const actionRequiredRequest = requests.find(r => r.status === 'action-required');
  const hasActionRequired = !!actionRequiredRequest;

  const pendingCount = requests.filter(r => r.status === 'pending-review' || r.status === 'pending').length;
  const actionCount = requests.filter(r => r.status === 'action-required').length;

  if (loading) {
    return (
      <div className="min-h-screen bg-[#F5F7FA] flex items-center justify-center">
        <Loader2 className="h-8 w-8 text-[#2EC4B6] animate-spin" />
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-[#F5F7FA]">

      <div className="max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8">
        {/* Welcome Section */}
        <div className="mb-8">
          <h1 className="mb-2 text-[#0D1B2A]">Welcome, {user?.name || 'Business Owner'}!</h1>
          <p className="text-[#4A5568]">Request services, review proposals, and manage your projects</p>
        </div>

        {/* ... Rest of the dashboard content ... */}
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
          {/* Left Column */}
          <div className="lg:col-span-2 space-y-6">
            {/* Hero Section */}
            <div className="bg-gradient-to-br from-[#2EC4B6] to-[#26a599] rounded-xl p-8 text-white shadow-lg">
              <h2 className="mb-3 text-white">Ready to grow your business?</h2>
              <p className="mb-6 text-white/90">
                Start a new service request and receive custom proposals from our digital experts
              </p>
              <button
                onClick={() => navigate('/needs-assessment')}
                className="bg-white text-[#2EC4B6] px-8 py-3 rounded-lg hover:bg-gray-50 transition-all font-medium flex items-center gap-2 group h-[48px]"
              >
                Start New Request
                <ArrowRight size={20} className="group-hover:translate-x-1 transition-transform" />
              </button>
            </div>

            {/* Proposal Alert */}
            {hasActionRequired && actionRequiredRequest && (
              <div className="bg-gradient-to-br from-[#FFF4E6] to-[#FFF9F0] border-2 border-[#F39C12] rounded-xl p-6 shadow-md">
                <div className="flex items-start gap-4">
                  <div className="w-10 h-10 bg-[#F39C12] rounded-full flex items-center justify-center flex-shrink-0">
                    <AlertCircle className="text-white" size={24} />
                  </div>
                  <div className="flex-1">
                    <h3 className="mb-2 text-[#0D1B2A]">New Proposal Received!</h3>
                    <p className="text-sm text-[#4A5568] mb-4">
                      {actionRequiredRequest.category} - <span className="font-semibold text-[#0D1B2A]">{actionRequiredRequest.proposalAmount || 'Price TBD'}</span>
                    </p>
                    <div className="flex gap-3">
                      <button 
                        onClick={() => handleViewPdf(actionRequiredRequest.pdfPath)}
                        className="bg-white border-2 border-[#0D1B2A] text-[#0D1B2A] px-6 py-2.5 rounded-lg hover:bg-[#0D1B2A] hover:text-white transition-all font-medium flex items-center gap-2 h-[44px]"
                      >
                        <Download size={18} />
                        View PDF
                      </button>
                      <button 
                        onClick={() => handleAcceptProposal(actionRequiredRequest.proposalId)}
                        className="bg-[#2EC4B6] text-white px-6 py-2.5 rounded-lg hover:bg-[#26a599] transition-all font-medium flex items-center gap-2 h-[44px]"
                      >
                        <Check size={18} />
                        Accept Quote
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            )}

            {/* My Requests Section */}
            <div className="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
              <div className="flex justify-between items-center mb-6">
                <h3 className="text-[#0D1B2A]">My Requests</h3>
                <button
                  onClick={() => navigate('/needs-assessment')}
                  className="text-[#2EC4B6] hover:text-[#26a599] text-sm font-medium flex items-center gap-1"
                >
                  <Plus size={16} />
                  New Request
                </button>
              </div>

              <div className="overflow-x-auto">
                <table className="w-full">
                  <thead>
                    <tr className="border-b border-gray-200">
                      <th className="text-left py-3 px-4 text-sm font-semibold text-[#4A5568]">Service Category</th>
                      <th className="text-left py-3 px-4 text-sm font-semibold text-[#4A5568]">Date Submitted</th>
                      <th className="text-left py-3 px-4 text-sm font-semibold text-[#4A5568]">Status</th>
                      <th className="text-left py-3 px-4 text-sm font-semibold text-[#4A5568]">Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    {requests.length === 0 ? (
                      <tr>
                        <td colSpan={4} className="py-8 text-center text-[#4A5568]">
                          No requests found. Start a new one!
                        </td>
                      </tr>
                    ) : (
                      requests.map((request) => (
                        <tr key={request.id} className="border-b border-gray-100 hover:bg-gray-50 transition-colors">
                          <td className="py-4 px-4">
                            <span className="text-[#1A202C] font-medium">{request.category}</span>
                          </td>
                          <td className="py-4 px-4">
                            <span className="text-[#4A5568] text-sm">{request.dateSubmitted}</span>
                          </td>
                          <td className="py-4 px-4">
                            <StatusBadge status={request.status} />
                          </td>
                          <td className="py-4 px-4">
                            {request.pdfPath && (
                              <button 
                                onClick={() => handleViewPdf(request.pdfPath)}
                                className="text-sm text-[#3498DB] hover:underline flex items-center gap-1"
                              >
                                <FileText size={14} /> Review Quote
                              </button>
                            )}
                          </td>
                        </tr>
                      ))
                    )}
                  </tbody>
                </table>
              </div>
            </div>

            {/* Quick Stats */}
            <div className="grid grid-cols-3 gap-4">
              <div className="bg-white rounded-lg border border-gray-200 p-5 shadow-sm">
                <p className="text-sm text-[#4A5568] mb-2">Total Requests</p>
                <p className="text-3xl font-semibold text-[#0D1B2A]">{requests.length}</p>
              </div>
              <div className="bg-white rounded-lg border border-gray-200 p-5 shadow-sm">
                <p className="text-sm text-[#4A5568] mb-2">Pending Review</p>
                <p className="text-3xl font-semibold text-[#F39C12]">
                  {pendingCount}
                </p>
              </div>
              <div className="bg-white rounded-lg border border-gray-200 p-5 shadow-sm">
                <p className="text-sm text-[#4A5568] mb-2">Action Required</p>
                <p className="text-3xl font-semibold text-[#E74C3C]">
                  {actionCount}
                </p>
              </div>
            </div>
          </div>

          {/* Right Column - Sidebar Quick Actions */}
          <div className="space-y-6">
            <div className="bg-white rounded-xl border border-gray-200 p-6 shadow-sm">
              <h4 className="text-[#0D1B2A] mb-4">Quick Actions</h4>
              <div className="space-y-3">
                <button
                  onClick={() => navigate('/needs-assessment')}
                  className="w-full text-left px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-[#2EC4B6] hover:bg-[#F0FDFA] transition-all group"
                >
                  <div className="flex items-center gap-3">
                    <div className="w-8 h-8 bg-[#2EC4B6]/10 rounded-lg flex items-center justify-center group-hover:bg-[#2EC4B6] transition-colors">
                      <Plus className="text-[#2EC4B6] group-hover:text-white" size={18} />
                    </div>
                    <p className="text-[#1A202C] text-sm font-medium">Request New Service</p>
                  </div>
                </button>
                <button
                  onClick={() => navigate('/my-documents')}
                  className="w-full text-left px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-[#2EC4B6] hover:bg-[#F0FDFA] transition-all group"
                >
                  <div className="flex items-center gap-3">
                    <div className="w-8 h-8 bg-[#2EC4B6]/10 rounded-lg flex items-center justify-center group-hover:bg-[#2EC4B6] transition-colors">
                      <FolderOpen className="text-[#2EC4B6] group-hover:text-white" size={18} />
                    </div>
                    <p className="text-[#1A202C] text-sm font-medium">My Vault</p>
                  </div>
                </button>
                <button
                  onClick={() => navigate('/my-profile')}
                  className="w-full text-left px-4 py-3 border-2 border-gray-200 rounded-lg hover:border-[#2EC4B6] hover:bg-[#F0FDFA] transition-all group"
                >
                  <div className="flex items-center gap-3">
                    <div className="w-8 h-8 bg-[#2EC4B6]/10 rounded-lg flex items-center justify-center group-hover:bg-[#2EC4B6] transition-colors">
                      <FileText className="text-[#2EC4B6] group-hover:text-white" size={18} />
                    </div>
                    <p className="text-[#1A202C] text-sm font-medium">View My Profile</p>
                  </div>
                </button>
              </div>
            </div>

            {/* Workflow Guide */}
            <div className="bg-gradient-to-br from-[#0D1B2A] to-[#1a2d42] rounded-xl p-6 text-white shadow-lg">
              <h4 className="text-white mb-4">How It Works</h4>
              <div className="space-y-4">
                <div className="flex items-start gap-3">
                  <div className="w-6 h-6 bg-[#2EC4B6] rounded-full flex items-center justify-center flex-shrink-0 text-sm font-semibold">
                    1
                  </div>
                  <div>
                    <p className="text-sm font-medium text-white">Submit Request</p>
                    <p className="text-xs text-gray-300">Complete needs assessment</p>
                  </div>
                </div>
                <div className="flex items-start gap-3">
                  <div className="w-6 h-6 bg-[#2EC4B6] rounded-full flex items-center justify-center flex-shrink-0 text-sm font-semibold">
                    2
                  </div>
                  <div>
                    <p className="text-sm font-medium text-white">Review Proposal</p>
                    <p className="text-xs text-gray-300">Agent creates custom quote</p>
                  </div>
                </div>
                <div className="flex items-start gap-3">
                  <div className="w-6 h-6 bg-[#2EC4B6] rounded-full flex items-center justify-center flex-shrink-0 text-sm font-semibold">
                    3
                  </div>
                  <div>
                    <p className="text-sm font-medium text-white">Accept & Start</p>
                    <p className="text-xs text-gray-300">Work begins on milestones</p>
                  </div>
                </div>
              </div>
            </div>

            {/* Help Button */}
            <button className="w-full bg-[#2EC4B6] hover:bg-[#26a599] text-white py-4 rounded-lg transition-colors font-medium shadow-md">
              Need help? Contact your agent
            </button>
          </div>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="src/pages/AdminRequests.tsx">
import React, { useEffect, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { FileText, Download } from 'lucide-react';
import { ServiceRequest } from '../types';
import api from '../lib/api';
import { toast } from 'sonner';

export function AdminRequests() {
  const navigate = useNavigate();
  const [requests, setRequests] = useState<ServiceRequest[]>([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const fetchRequests = async () => {
      try {
        const res = await api.get('/requests');
        setRequests(res.data);
      } catch (error) {
        toast.error("Failed to fetch requests");
      } finally {
        setLoading(false);
      }
    };
    fetchRequests();
  }, []);

  const handleViewPdf = (pdfPath: string) => {
    const baseUrl = import.meta.env.VITE_API_URL 
      ? import.meta.env.VITE_API_URL.replace('/api/v1', '') 
      : 'http://localhost:3000';
    const fullUrl = `${baseUrl}/${pdfPath.replace(/\\/g, '/')}`;
    window.open(fullUrl, '_blank');
  };

  return (
    <>
      <div className="mb-8">
        <h1 className="mb-2 text-[#0D1B2A]">Service Requests</h1>
        <p className="text-[#4A5568]">Monitor and manage all service requests</p>
      </div>

      <div className="bg-white rounded-xl border border-gray-200 shadow-sm">
        <div className="p-6 border-b border-gray-200 flex items-center gap-2">
          <FileText className="text-[#2EC4B6]" size={24} />
          <h3 className="text-[#0D1B2A]">All Service Requests</h3>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full">
            <thead>
              <tr className="border-b border-gray-200 bg-gray-50">
                <th className="px-6 py-3 text-left text-xs font-semibold text-[#4A5568]">ID</th>
                <th className="px-6 py-3 text-left text-xs font-semibold text-[#4A5568]">Client</th>
                <th className="px-6 py-3 text-left text-xs font-semibold text-[#4A5568]">Category</th>
                <th className="px-6 py-3 text-left text-xs font-semibold text-[#4A5568]">Agent</th>
                <th className="px-6 py-3 text-left text-xs font-semibold text-[#4A5568]">Status</th>
                <th className="px-6 py-3 text-left text-xs font-semibold text-[#4A5568]">Proposal</th>
              </tr>
            </thead>
            <tbody>
              {loading ? (
                <tr><td colSpan={6} className="p-8 text-center">Loading...</td></tr>
              ) : requests.length === 0 ? (
                <tr><td colSpan={6} className="p-8 text-center">No requests found.</td></tr>
              ) : (
                requests.map((request: any) => (
                  <tr key={request.id} className="border-b border-gray-100 hover:bg-gray-50">
                    <td className="px-6 py-4 font-mono text-sm text-[#4A5568]">#{request.id}</td>
                    <td className="px-6 py-4">
                      <div>
                        <p className="font-medium text-[#1A202C]">{request.Client?.companyName || "Unknown"}</p>
                        <p className="text-xs text-[#4A5568]">{request.Client?.User?.email}</p>
                      </div>
                    </td>
                    <td className="px-6 py-4 text-sm">{request.Category?.name}</td>
                    <td className="px-6 py-4 text-sm text-[#4A5568]">
                      {request.AssignedAgent ? request.AssignedAgent.fullName : 'Unassigned'}
                    </td>
                    <td className="px-6 py-4">
                      <span className={`px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700`}>
                        {request.status}
                      </span>
                    </td>
                    <td className="px-6 py-4">
                      {request.Proposal?.pdfPath ? (
                        <button
                          onClick={() => handleViewPdf(request.Proposal.pdfPath)}
                          className="text-[#3498DB] hover:text-[#2980B9] flex items-center gap-1 text-xs font-medium"
                        >
                          <Download size={14} /> View PDF
                        </button>
                      ) : (
                        <span className="text-xs text-gray-400">-</span>
                      )}
                    </td>
                  </tr>
                ))
              )}
            </tbody>
          </table>
        </div>
      </div>
    </>
  );
}
</file>

<file path="src/types/index.ts">
/**
 * BizTech Biz Digital - Centralized Type Definitions
 */

// ============================================================================
// USER & AUTHENTICATION TYPES
// ============================================================================

export type UserRole = 'client' | 'agent' | 'admin';

export interface User {
  id: string;
  email: string;
  name: string;
  role: UserRole;
  phone?: string;
  company?: string;
}

export interface AuthState {
  user: User | null;
  isAuthenticated: boolean;
}

export interface RegisterData {
  fullName: string;
  email: string;
  password: string;
  companyName?: string;
  phone?: string;
}

export interface LoginFormData {
  email: string;
  password: string;
}

// ============================================================================
// REQUEST TYPES
// ============================================================================

export type RequestStatus = 
  | 'new'
  | 'pending-review' 
  | 'awaiting-quote' 
  | 'action-required'
  | 'proposal-sent'
  | 'accepted'
  | 'rejected'
  | 'in-progress'
  | 'completed';

export type RequestPriority = 'low' | 'medium' | 'high' | 'urgent';

export interface ServiceRequest {
  id: string;
  client: string;
  clientId?: string;
  clientEmail: string;
  agent?: string;
  agentId?: string;
  category: string;
  subcategory?: string;
  title?: string;
  description?: string;
  details: string;
  status: string;
  priority?: string;
  budget?: string;
  timeline?: string;
  dateSubmitted: string;
  createdAt: string;
  updatedAt?: string;
  proposalAmount?: string;
  proposalSent?: boolean;
  proposalId?: string; // Added
  pdfPath?: string;    // Added
  attachments?: any[];
}

export interface Attachment {
  id: string;
  name: string;
  type: string;
  size: number;
  url: string;
  uploadedDate: string;
  uploadedBy: string;
}

// ============================================================================
// CLIENT TYPES
// ============================================================================

export interface Client {
  id: string;
  name: string;
  email: string;
  company: string;
  industry: string;
  phone?: string;
  status?: 'active' | 'inactive' | 'pending';
  projectsCount: number;
  activeProjects?: number;
  totalSpent?: number;
  joinedDate: string;
  lastActivity?: string;
}

// ============================================================================
// AGENT TYPES
// ============================================================================

export interface Agent {
  id: string;
  name: string;
  email: string;
  phone: string;
  specialization: string;
  expertise: string[];
  status: 'active' | 'inactive' | 'on-leave';
  activeProjects: number;
  completedProjects: number;
  rating?: number;
  revenue?: number;
  joinedDate: string;
  avatar?: string;
}

export interface AgentStats {
  activeProjects: number;
  completedProjects: number;
  totalRevenue: number;
  avgRating: number;
}

// ============================================================================
// PROJECT TYPES
// ============================================================================

export type ProjectStatus = 'planning' | 'in-progress' | 'review' | 'completed' | 'delivered' | 'pending' | 'on-hold';

export interface Project {
  id: string;
  name: string;
  client: string;
  clientId?: string;
  clientEmail?: string;
  agent?: string;
  agentId?: string;
  category: string;
  status: string;
  progress: number;
  startDate?: string;
  deadline?: string;
  ecd?: string;
  estimatedCompletion?: string;
  budget?: string | number;
  spent?: number;
  description?: string;
  milestones?: any[];
  deliverables?: any[];
}

export interface Milestone {
  id: string;
  title: string;
  description?: string;
  status: 'pending' | 'in-progress' | 'completed';
  dueDate: string;
  completedDate?: string;
  progress: number;
}

export interface Deliverable {
  id: string;
  name: string;
  description?: string;
  type: 'file' | 'link' | 'document';
  status: 'pending' | 'delivered' | 'approved' | 'rejected';
  url?: string;
  uploadedDate?: string;
  approvedDate?: string;
}

// ============================================================================
// PROPOSAL TYPES
// ============================================================================

export interface Proposal {
  id: string;
  requestId: string;
  agentId: string;
  clientId: string;
  title: string;
  description: string;
  scope: string[];
  deliverables: any[];
  timeline: string;
  budget: number;
  terms?: string;
  status: 'draft' | 'sent' | 'accepted' | 'rejected' | 'expired';
  createdDate: string;
  sentDate?: string;
  expiryDate?: string;
  acceptedDate?: string;
}

export interface ProposalDeliverable {
  id: string;
  name: string;
  description: string;
  quantity: number;
  price: number;
}

// ============================================================================
// DOCUMENT & VAULT TYPES
// ============================================================================

export type DocumentType = 'credential' | 'contract' | 'invoice' | 'report' | 'other';
export type DocumentStatus = 'active' | 'archived' | 'expired';

export interface Document {
  id: string;
  name: string;
  type: string;
  category?: string;
  description?: string;
  url?: string;
  size?: number;
  uploadedDate: string;
  uploadedBy: string;
  lastAccessed?: string;
  expiryDate?: string;
  status: string;
  isEncrypted?: boolean;
  sharedWith?: string[];
}

export interface VaultCredential {
  id: string;
  service: string;
  username: string;
  password?: string; // Encrypted
  url?: string;
  notes?: string;
  category: string;
  createdDate: string;
  lastModified: string;
  sharedWith: string[];
  isActive: boolean;
}

// ============================================================================
// NEEDS ASSESSMENT TYPES
// ============================================================================

export interface NeedsAssessmentData {
  serviceType: string;
  subcategory?: string;
  projectTitle?: string;
  projectDescription: string;
  goals: string[];
  targetAudience?: string;
  technicalRequirements?: string[];
  platforms?: string[];
  integrations?: string[];
  timeline: string;
  budget: string;
  flexibleTimeline?: boolean;
  flexibleBudget?: boolean;
  hasExistingAssets?: boolean;
  existingAssets?: string;
  competitorReferences?: string;
  additionalNotes?: string;
  attachments?: File[];
}

// ============================================================================
// NOTIFICATION TYPES
// ============================================================================

export type NotificationType = 'info' | 'success' | 'warning' | 'error';

export interface Notification {
  id: string;
  type: NotificationType;
  title: string;
  message: string;
  timestamp: string;
  read: boolean;
  actionUrl?: string;
  actionLabel?: string;
}

// ============================================================================
// DASHBOARD STATS TYPES
// ============================================================================

export interface ClientDashboardStats {
  activeProjects: number;
  completedProjects: number;
  pendingRequests: number;
  totalSpent: number;
}

export interface AgentDashboardStats {
  activeProjects: number;
  totalClients: number;
  pendingRequests: number;
  monthlyRevenue: number;
}

export interface AdminDashboardStats {
  totalClients: number;
  totalAgents: number;
  activeProjects: number;
  pendingApprovals: number;
  monthlyRevenue: number;
  newRequests: number;
}

// ============================================================================
// APPROVAL TYPES
// ============================================================================

export type ApprovalStatus = 'pending' | 'approved' | 'rejected';
export type ApprovalType = 'user-registration' | 'agent-application' | 'project-proposal';

export interface Approval {
  id: string;
  type: ApprovalType;
  applicantName: string;
  applicantEmail: string;
  dateSubmitted: string;
  status: ApprovalStatus;
  reviewedBy?: string;
  reviewedDate?: string;
  notes?: string;
  details?: any; // Type-specific details
}

// ============================================================================
// SETTINGS TYPES
// ============================================================================

export interface PlatformSettings {
  platformName: string;
  platformEmail: string;
  platformPhone?: string;
  supportEmail: string;
  allowClientRegistration: boolean;
  requireAdminApproval: boolean;
  enableNotifications: boolean;
  enableTwoFactor: boolean;
  defaultCommissionRate?: number;
  currency: string;
  timezone: string;
  smtpHost?: string;
  smtpPort?: number;
  smtpUser?: string;
  sessionTimeout: number;
  maxLoginAttempts: number;
  passwordMinLength: number;
  requireStrongPassword: boolean;
}

export interface UserSettings {
  userId: string;
  emailNotifications: boolean;
  smsNotifications: boolean;
  twoFactorEnabled: boolean;
  language: string;
  timezone: string;
  theme: 'light' | 'dark' | 'auto';
}

// ============================================================================
// FORM TYPES
// ============================================================================

export interface LoginFormData {
  email: string;
  password: string;
}

export interface RegisterFormData {
  fullName: string;
  companyName: string;
  email: string;
  password: string;
  confirmPassword: string;
  phone?: string;
  industry?: string;
  agreeToTerms?: boolean;
}

export interface ProfileFormData {
  fullName: string;
  email: string;
  phone?: string;
  companyName?: string;
  industry?: string;
  companySize?: string;
  address?: string;
  currentPassword?: string;
  newPassword?: string;
  confirmPassword?: string;
}

// ============================================================================
// ANALYTICS TYPES
// ============================================================================

export interface ChartDataPoint {
  name: string;
  value: number;
  label?: string;
}

export interface TimeSeriesData {
  date: string;
  value: number;
  label?: string;
}

export interface RevenueData {
  month: string;
  revenue: number;
  projects: number;
}

// ============================================================================
// API RESPONSE TYPES
// ============================================================================

export interface ApiResponse<T = any> {
  success: boolean;
  data?: T;
  message?: string;
  error?: string;
  errors?: Record<string, string[]>;
}

export interface PaginatedResponse<T = any> {
  data: T[];
  total: number;
  page: number;
  pageSize: number;
  totalPages: number;
}

// ============================================================================
// UTILITY TYPES
// ============================================================================

export type SortOrder = 'asc' | 'desc';

export interface SortConfig {
  field: string;
  order: SortOrder;
}

export interface FilterConfig {
  field: string;
  operator: 'equals' | 'contains' | 'gt' | 'lt' | 'in';
  value: any;
}

export interface PaginationConfig {
  page: number;
  pageSize: number;
  sort?: SortConfig;
  filters?: FilterConfig[];
}

export interface StatusBadgeProps {
  status: string;
  variant?: 'default' | 'outlined';
}

export interface ProgressCircleProps {
  progress?: number;
  percentage?: number;
  size?: number;
  strokeWidth?: number;
  showLabel?: boolean;
}

export interface SidebarProps {
  role: 'client' | 'agent' | 'admin';
  activePage: string;
  onNavigate: (page: string) => void;
  userName?: string;
}
</file>

</files>
